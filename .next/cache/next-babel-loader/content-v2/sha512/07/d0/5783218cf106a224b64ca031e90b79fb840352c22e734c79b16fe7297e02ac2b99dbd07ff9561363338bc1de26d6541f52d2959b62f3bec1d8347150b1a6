{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectDestructuringEmpty from \"@babel/runtime/helpers/esm/objectDestructuringEmpty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Button, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions } from \"@material-ui/core\";\nimport { AddBox, FileCopy } from \"@material-ui/icons\";\nimport Admin from \"../../../../layouts/Admin\";\nimport styles from \"../../../../assets/jss/nextjs-material-dashboard/views/rtlStyle.js\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport GridContainer from \"../../../../components/Grid/GridContainer.js\";\nimport GridItem from \"../../../../components/Grid/GridItem.js\";\nimport ActionTable from \"../../../../components/MaterialTable/ActionTable\";\nimport Placeholder from \"../../../../Utility/Placeholders\";\nimport { useRouter } from \"next/router\";\nimport { useTranslation } from \"../../../../Utility/Translations/useTranslation\";\n// import Userservice from \"../../../../Services/Userservice\";\nimport SuiButton from \"../../../../components/SuiButton\";\nimport UserService from \"../../../../Services/UserService\";\nimport UserDetails from \"./user-details\";\n\nvar UsersList = function UsersList(_ref) {\n  _objectDestructuringEmpty(_ref);\n\n  var _useTranslation = useTranslation(),\n      translate = _useTranslation.translate;\n\n  var useStyles = makeStyles(styles);\n  var classes = useStyles();\n  var router = useRouter();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      showUserDetail = _React$useState2[0],\n      setshowUserDetail = _React$useState2[1];\n\n  var _React$useState3 = React.useState(),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      User = _React$useState4[0],\n      setUser = _React$useState4[1];\n\n  var _React$useState5 = React.useState(null),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      searchResult = _React$useState6[0],\n      setSearchResult = _React$useState6[1];\n\n  var _React$useState7 = React.useState(true),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      loading = _React$useState8[0],\n      setLoading = _React$useState8[1];\n\n  var setShow = function setShow() {\n    setshowUserDetail(!showUserDetail);\n  };\n\n  var activateEdit = function activateEdit() {\n    setIsEditable(!isEditable);\n  };\n\n  var getUser = function getUser(data) {\n    setLoading(true);\n\n    var _User = Users.find(function (item, index) {\n      return item.id === (data === null || data === void 0 ? void 0 : data.id);\n    });\n\n    UserService.Get(data.id).then(function (res) {\n      var _User = res.result;\n      setUser(_User);\n      console.log(_User);\n      setIsCreate(false);\n      setIsEditable(true);\n      setshowUserDetail(true);\n      setLoading(false);\n    }).catch(function (error) {\n      console.error(\"error\", error);\n    });\n  };\n\n  var _useState = useState(true),\n      isCreate = _useState[0],\n      setIsCreate = _useState[1];\n\n  var handleCreate = function handleCreate() {\n    setUser(null);\n    setIsCreate(true);\n    setIsEditable(false);\n    setshowUserDetail(true);\n  };\n\n  var handleClose = function handleClose() {\n    setSearchResult(null);\n    setshowUserDetail(false);\n  };\n  /********************** Filter && Sort *********/\n\n\n  var inputLabel = React.useRef(null);\n\n  var _React$useState9 = React.useState(0),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      labelWidth = _React$useState10[0],\n      setLabelWidth = _React$useState10[1];\n\n  React.useEffect(function () {\n    var _inputLabel$current;\n\n    setLabelWidth(inputLabel === null || inputLabel === void 0 ? void 0 : (_inputLabel$current = inputLabel.current) === null || _inputLabel$current === void 0 ? void 0 : _inputLabel$current.offsetWidth);\n  }, []);\n  var inputSortLabel = React.useRef(null);\n\n  var _React$useState11 = React.useState(0),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      sortLabelWidth = _React$useState12[0],\n      setSortLabelWidth = _React$useState12[1];\n\n  React.useEffect(function () {\n    var _inputSortLabel$curre;\n\n    setSortLabelWidth(inputSortLabel === null || inputSortLabel === void 0 ? void 0 : (_inputSortLabel$curre = inputSortLabel.current) === null || _inputSortLabel$curre === void 0 ? void 0 : _inputSortLabel$curre.offsetWidth);\n  }, []);\n\n  var _React$useState13 = React.useState(null),\n      _React$useState14 = _slicedToArray(_React$useState13, 2),\n      Users = _React$useState14[0],\n      setUsers = _React$useState14[1];\n\n  var _React$useState15 = React.useState(null),\n      _React$useState16 = _slicedToArray(_React$useState15, 2),\n      filteredUsers = _React$useState16[0],\n      setFilteredUsers = _React$useState16[1];\n\n  var _React$useState17 = React.useState(0),\n      _React$useState18 = _slicedToArray(_React$useState17, 2),\n      filter = _React$useState18[0],\n      setFilter = _React$useState18[1];\n\n  var _React$useState19 = React.useState(\"\"),\n      _React$useState20 = _slicedToArray(_React$useState19, 2),\n      search = _React$useState20[0],\n      setSearch = _React$useState20[1];\n\n  var _React$useState21 = React.useState(0),\n      _React$useState22 = _slicedToArray(_React$useState21, 2),\n      sortBy = _React$useState22[0],\n      setSortBy = _React$useState22[1];\n\n  var handleSortBy = function handleSortBy(_value) {\n    setSortBy(_value);\n  };\n  /************************** Data ****************************/\n\n\n  var getUsers = function getUsers() {\n    UserService.GetAll().then(function (res) {\n      var Users = res.result.sort(function (a, b) {\n        return b.id - a.id;\n      });\n      setFilteredUsers(Users);\n      setUsers(Users);\n      setLoading(false);\n    }).catch(function (error) {\n      console.error(\"error\", error);\n    });\n  };\n\n  useEffect(function () {\n    getUsers();\n  }, []);\n  /************************** Finish Data ****************************/\n\n  /************************** Handle edit data ****************************/\n\n  var _React$useState23 = React.useState(false),\n      _React$useState24 = _slicedToArray(_React$useState23, 2),\n      isEditable = _React$useState24[0],\n      setIsEditable = _React$useState24[1];\n  /************************** Finish Handle edit data ****************************/\n\n  /**************************  Handle Export data ****************************/\n\n\n  var _React$useState25 = React.useState(false),\n      _React$useState26 = _slicedToArray(_React$useState25, 2),\n      showExportColumns = _React$useState26[0],\n      setShowExportColumns = _React$useState26[1];\n\n  var columns = [{\n    title: translate(\"Id\"),\n    field: \"id\",\n    hidden: true\n  }, {\n    title: translate(\"الايميل\"),\n    field: \"email\"\n  }, {\n    title: translate(\"الأدوار\"),\n    field: \"roles\"\n  }];\n  /************************** Finish Handle Export Data ****************************/\n\n  var _React$useState27 = React.useState(false),\n      _React$useState28 = _slicedToArray(_React$useState27, 2),\n      confirm = _React$useState28[0],\n      setConfirm = _React$useState28[1];\n\n  var _React$useState29 = React.useState(false),\n      _React$useState30 = _slicedToArray(_React$useState29, 2),\n      deleteUser = _React$useState30[0],\n      setDeleteUser = _React$useState30[1];\n\n  var handleConfirmOpen = function handleConfirmOpen(data) {\n    setDeleteUser(data.id);\n    setConfirm(true);\n  };\n\n  var handleConfirmClose = function handleConfirmClose() {\n    setConfirm(false);\n  };\n\n  var handleDeleteUser = function handleDeleteUser() {};\n\n  var ConfirmDialog = function ConfirmDialog() {\n    return /*#__PURE__*/_jsx(\"div\", {\n      children: /*#__PURE__*/_jsxs(Dialog, {\n        open: confirm,\n        onClose: handleConfirmClose,\n        \"aria-labelledby\": \"alert-dialog-title\",\n        \"aria-describedby\": \"alert-dialog-description\",\n        children: [/*#__PURE__*/_jsx(DialogTitle, {\n          id: \"alert-dialog-title\",\n          children: translate(\"Delete a User\")\n        }), /*#__PURE__*/_jsx(DialogContent, {\n          children: /*#__PURE__*/_jsx(DialogContentText, {\n            id: \"alert-dialog-description\",\n            children: translate(\"Are you sure you want to delete this User\")\n          })\n        }), /*#__PURE__*/_jsxs(DialogActions, {\n          children: [/*#__PURE__*/_jsx(Button, {\n            onClick: handleDeleteUser,\n            children: translate(\"Yes\")\n          }), /*#__PURE__*/_jsx(Button, {\n            onClick: handleConfirmClose,\n            autoFocus: true,\n            children: translate(\"No\")\n          })]\n        })]\n      })\n    });\n  };\n  /************************** Handle Delete User ****************************/\n\n\n  var tableRef = useRef();\n\n  var renderUsers = function renderUsers() {\n    if (filteredUsers != null && filteredUsers.length > 0) {\n      var data = filteredUsers;\n      var options = {\n        // exportAllData: true,\n        // exportButton: true,\n        actionsColumnIndex: -1,\n        headerStyle: {\n          backgroundColor: \"#01579b\",\n          color: \"#FFF\",\n          fontWeight: \"bold\"\n        },\n        filtering: false,\n        paging: true,\n        pageSize: 10,\n        maxBodyHeight: \"500px\",\n        search: false,\n        tableLayout: \"auto\"\n      };\n      var actions = [// {\n      //     icon: () => (\n      //         <SuiButton\n      //             style={{\n      //                 minWidth: 80,\n      //                 color: \"#dc3545\",\n      //                 backgroundColor: \"transparent\",\n      //                 border: \"1px solid #dc3545\",\n      //             }}\n      //             color={\"danger\"}\n      //         >\n      //             {translate(\"Delete\")}\n      //         </SuiButton>\n      //     ),\n      //     onClick: (evt, data) => handleConfirmOpen(data),\n      // },\n      {\n        icon: function icon() {\n          return /*#__PURE__*/_jsxs(SuiButton, {\n            style: {\n              minWidth: 140,\n              width: 140\n            },\n            color: \"primary\",\n            children: [translate(\"تفاصيل\"), /*#__PURE__*/_jsx(FileCopy, {})]\n          });\n        },\n        onClick: function onClick(evt, data) {\n          return getUser(data);\n        }\n      }];\n      if (!loading) return /*#__PURE__*/_jsx(\"div\", {\n        ref: tableRef,\n        children: /*#__PURE__*/_jsx(ActionTable, {\n          Title: translate(\"جدول المستخدمين\"),\n          Columns: columns,\n          Data: data.map(function (item) {\n            return _objectSpread(_objectSpread({}, item), {}, {\n              roles: item.roles.map(function (e) {\n                return e.name;\n              }).join(\" , \")\n            });\n          }),\n          Options: options,\n          Actions: actions\n        })\n      });else return /*#__PURE__*/_jsx(Placeholder, {\n        loading: loading\n      });\n    } else return /*#__PURE__*/_jsx(Placeholder, {\n      loading: false\n    });\n  };\n\n  var handleBack = function handleBack() {\n    getUsers();\n    setshowUserDetail(false);\n  };\n\n  return /*#__PURE__*/_jsxs(GridContainer, {\n    children: [!showUserDetail && /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(GridItem, {\n        md: 12,\n        children: /*#__PURE__*/_jsx(GridItem, {\n          container: true,\n          md: 12,\n          style: {\n            margin: \"0px 0px 10px 0\"\n          },\n          children: /*#__PURE__*/_jsx(GridItem, {\n            children: /*#__PURE__*/_jsxs(Button, {\n              style: {\n                margin: \"0px 5px\"\n              },\n              disabled: false,\n              variant: \"contained\",\n              className: classes.submitBtn,\n              onClick: handleCreate,\n              children: [/*#__PURE__*/_jsx(\"span\", {\n                style: {\n                  padding: \"0px 0px 0px 10px\"\n                },\n                children: translate(\"إضافة مستخدم\")\n              }), /*#__PURE__*/_jsx(AddBox, {})]\n            })\n          })\n        })\n      }), /*#__PURE__*/_jsx(GridItem, {\n        md: 12,\n        children: renderUsers()\n      })]\n    }), showUserDetail && /*#__PURE__*/_jsx(UserDetails, {\n      isEditable: isEditable,\n      isCreate: isCreate,\n      details: User,\n      activateEdit: activateEdit,\n      handleBack: handleBack,\n      show: showUserDetail\n    }), /*#__PURE__*/_jsx(ConfirmDialog, {})]\n  });\n};\n\nUsersList.auth = true;\nUsersList.layout = Admin;\nexport default UsersList;","map":null,"metadata":{},"sourceType":"module"}