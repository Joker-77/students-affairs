{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useEffect } from \"react\";\nimport { Formik, Form, FieldArray } from \"formik\";\nimport { TextField, Box, Typography, MenuItem, Grid } from \"@material-ui/core\";\nimport Card from \"../../../../components/Card/Card.js\";\nimport CardHeader from \"../../../../components/Card/CardHeader.js\";\nimport CardBody from \"../../../../components/Card/CardBody.js\";\nimport SuiButton from \"../../../../components/SuiButton\";\nimport { useRouter } from \"next/router\";\nimport { useTranslation } from \"../../../../Utility/Translations/useTranslation\";\nimport { governorates } from \"../../../../Static/resources\";\nimport * as Yup from \"yup\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport styles from \"../../../../assets/jss/nextjs-material-dashboard/views/rtlStyle\";\n\nvar AddCertificateModal = function AddCertificateModal(_ref) {\n  var initValues = _ref.initValues,\n      callback = _ref.callback;\n\n  var _useRouter = useRouter(),\n      locale = _useRouter.locale;\n\n  var _useTranslation = useTranslation(),\n      translate = _useTranslation.translate;\n\n  var useStyles = makeStyles(styles);\n  var classes = useStyles();\n  useEffect(function () {\n    return console.log(initValues);\n  }, []);\n  var courses = [{\n    id: 'math',\n    value: translate('Math')\n  }, {\n    id: 'physics',\n    value: translate('Physics')\n  }, // {\n  //   id: 'arabic',\n  //   value: translate('Arabic'),\n  // },\n  {\n    id: 'chemestry',\n    value: translate('Chemistry')\n  }, {\n    id: 'sum',\n    value: translate('Sum')\n  } // {\n  //   id: 'science',\n  //   value: translate('Science'),\n  // },\n  // {\n  //   id: 'nationality',\n  //   value: translate('Nationality Course'),\n  // },\n  ]; // const langCourses = [\n  //   {\n  //     id: 'english',\n  //     value: translate('English'),\n  //   },\n  //   {\n  //     id: 'الفرنسية',\n  //     value: translate('French'),\n  //   },\n  //   {\n  //     id: 'الروسية',\n  //     value: translate('Russian'),\n  //   },\n  // ];\n\n  var _React$useState = React.useState(true),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      disabled = _React$useState2[0],\n      setDisabled = _React$useState2[1];\n\n  var formScheme = Yup.object().shape({// type: Yup.string().required(translate(\"{0} is required\", \"Type\")),\n    // year: Yup.string().required(translate(\"{0} is required\", \"Year\")),\n    // result: Yup.string().required(translate(\"{0} is required\", \"Result\")),\n    // city: Yup.string().required(translate(\"{0} is required\", \"City\")),\n    // round: Yup.string().required(translate(\"{0} is required\", \"Round\")),\n    // subscription_number: Yup.string().required(translate(\"{0} is required\", \"Subscription number\")),\n    // candidate_id: Yup.string().required(translate(\"{0} is required\", \"Candidate\")),\n  });\n\n  var submitForm = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values, setSubmitting) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function submitForm(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(Box, {\n    children: /*#__PURE__*/_jsxs(Card, {\n      children: [/*#__PURE__*/_jsx(CardHeader, {\n        children: /*#__PURE__*/_jsxs(\"h4\", {\n          style: {\n            fontWeight: \"bold\",\n            color: \"#01579b\"\n          },\n          children: [translate(\"Certificate Details\"), \" \"]\n        })\n      }), /*#__PURE__*/_jsx(CardBody, {\n        children: /*#__PURE__*/_jsx(Formik, {\n          initialValues: initValues,\n          validationSchema: formScheme,\n          onSubmit: function onSubmit(values, _ref3) {\n            var setSubmitting = _ref3.setSubmitting;\n            submitForm(values, setSubmitting);\n          },\n          children: function children(formik) {\n            var _values$details, _values$details$;\n\n            var values = formik.values,\n                handleChange = formik.handleChange,\n                handleSubmit = formik.handleSubmit,\n                errors = formik.errors,\n                touched = formik.touched,\n                handleBlur = formik.handleBlur,\n                isSubmitting = formik.isSubmitting,\n                isValid = formik.isValid,\n                dirty = formik.dirty;\n            var validCourses = (_values$details = values.details) === null || _values$details === void 0 ? void 0 : _values$details.filter(function (item) {\n              return courses.map(function (c) {\n                return c.id;\n              }).includes(item.key);\n            }); // const sumValidCourses = validCourses.reduce((partialSum, a) => partialSum + +a.value, 0);\n            // validCourses = [...validCourses, {key: 'sum', value: sumValidCourses + values.result}];\n\n            return /*#__PURE__*/_jsxs(Form, {\n              children: [/*#__PURE__*/_jsxs(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 4,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"Year\")\n                      })\n                    }), /*#__PURE__*/_jsx(TextField, {\n                      disabled: disabled,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"number\",\n                      min: 0,\n                      id: \"year\",\n                      name: \"year\",\n                      value: values.year,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.year && errors.year),\n                      helperText: touched.year && errors.year,\n                      placeholder: translate(\"Year\"),\n                      fullWidth: true\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 4,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"Result\")\n                      })\n                    }), /*#__PURE__*/_jsx(TextField, {\n                      disabled: disabled,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"number\",\n                      min: 0,\n                      id: \"result\",\n                      name: \"result\",\n                      value: values === null || values === void 0 ? void 0 : (_values$details$ = values.details[9]) === null || _values$details$ === void 0 ? void 0 : _values$details$.value,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.result && errors.result),\n                      helperText: touched.result && errors.result,\n                      placeholder: translate(\"Result\"),\n                      fullWidth: true\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 4,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"City\")\n                      })\n                    }), /*#__PURE__*/_jsx(TextField, {\n                      disabled: disabled,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"select\",\n                      id: \"city\",\n                      name: \"city\",\n                      select: true,\n                      value: values.city,\n                      onChange: handleChange(\"city\"),\n                      onBlur: handleBlur,\n                      placeholder: translate(\"City\"),\n                      fullWidth: true,\n                      children: governorates(translate).map(function (city) {\n                        return /*#__PURE__*/_jsx(MenuItem, {\n                          value: city.value,\n                          children: city.value\n                        }, city.value);\n                      })\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 4,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"Round\")\n                      })\n                    }), /*#__PURE__*/_jsx(TextField, {\n                      disabled: disabled,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"text\",\n                      id: \"round\",\n                      name: \"round\",\n                      value: values.round,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.round && errors.round),\n                      helperText: touched.round && errors.round,\n                      placeholder: translate(\"Round\"),\n                      fullWidth: true\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 4,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"Subscription number\")\n                      })\n                    }), /*#__PURE__*/_jsx(TextField, {\n                      disabled: disabled,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"number\",\n                      min: 0,\n                      id: \"subscription_number\",\n                      name: \"subscription_number\",\n                      value: values.subscription_number,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.subscription_number && errors.subscription_number),\n                      helperText: touched.subscription_number && errors.subscription_number,\n                      placeholder: translate(\"Subscription number\"),\n                      fullWidth: true\n                    })]\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(Box, {\n                mb: 2,\n                children: [/*#__PURE__*/_jsx(Box, {\n                  mb: 1,\n                  ml: 0.5,\n                  children: /*#__PURE__*/_jsx(Typography, {\n                    component: \"label\",\n                    variant: \"caption\",\n                    children: translate(\"Marks\")\n                  })\n                }), /*#__PURE__*/_jsx(FieldArray, {\n                  name: \"details\",\n                  render: function render(arrayHelpers) {\n                    return /*#__PURE__*/_jsxs(\"div\", {\n                      children: [validCourses && validCourses.length > 0 ? validCourses.map(function (mark, index) {\n                        return /*#__PURE__*/_jsx(\"div\", {\n                          children: /*#__PURE__*/_jsxs(Grid, {\n                            container: true,\n                            spacing: 2,\n                            children: [/*#__PURE__*/_jsx(Grid, {\n                              item: true,\n                              xs: 4,\n                              children: /*#__PURE__*/_jsx(TextField, {\n                                disabled: disabled,\n                                variant: \"outlined\",\n                                size: \"small\",\n                                type: \"select\",\n                                id: \"details.\".concat(index, \".key\"),\n                                name: \"details.\".concat(index, \".key\"),\n                                select: true,\n                                value: mark.key,\n                                onChange: handleChange(\"details.\".concat(index, \".key\")),\n                                onBlur: handleBlur,\n                                placeholder: translate(\"Course\"),\n                                fullWidth: true,\n                                children: courses.map(function (course) {\n                                  return /*#__PURE__*/_jsx(MenuItem, {\n                                    value: course.id,\n                                    children: course.value\n                                  }, course.id);\n                                })\n                              })\n                            }), /*#__PURE__*/_jsx(Grid, {\n                              item: true,\n                              xs: 4,\n                              children: /*#__PURE__*/_jsx(TextField, {\n                                disabled: disabled,\n                                onChange: handleChange(\"details.\".concat(index, \".value\")),\n                                variant: \"outlined\",\n                                size: \"small\",\n                                type: \"number\",\n                                min: 0,\n                                id: \"details.\".concat(index, \".value\"),\n                                name: \"details.\".concat(index, \".value\"),\n                                value: mark.value,\n                                onBlur: handleBlur,\n                                error: Boolean((touched === null || touched === void 0 ? void 0 : touched.details) && (errors === null || errors === void 0 ? void 0 : errors.details)),\n                                helperText: (touched === null || touched === void 0 ? void 0 : touched.details) && (errors === null || errors === void 0 ? void 0 : errors.details),\n                                placeholder: translate(\"Mark\") //fullWidth\n\n                              })\n                            }), !disabled && /*#__PURE__*/_jsxs(Grid, {\n                              item: true,\n                              xs: 4,\n                              children: [/*#__PURE__*/_jsx(SuiButton, {\n                                style: {\n                                  margin: 5\n                                },\n                                color: \"error\",\n                                onClick: function onClick() {\n                                  return arrayHelpers.remove(index);\n                                } // remove a friend from the list\n                                ,\n                                children: \"-\"\n                              }), /*#__PURE__*/_jsx(SuiButton, {\n                                style: {\n                                  margin: 5\n                                },\n                                color: \"primary\",\n                                onClick: function onClick() {\n                                  return arrayHelpers.insert(index + 1, {\n                                    phone: '',\n                                    type: ''\n                                  });\n                                } // insert an empty string at a position\n                                ,\n                                children: \"+\"\n                              })]\n                            })]\n                          })\n                        }, index);\n                      }) : /*#__PURE__*/_jsx(React.Fragment, {\n                        children: !disabled && /*#__PURE__*/_jsx(SuiButton, {\n                          variant: \"gradient\",\n                          color: \"primary\",\n                          onClick: function onClick() {\n                            return arrayHelpers.push('');\n                          },\n                          children: translate(\"Add a mark\")\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {}), /*#__PURE__*/_jsxs(Grid, {\n                        container: true,\n                        spacing: 2,\n                        children: [/*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 6,\n                          children: /*#__PURE__*/_jsx(\"p\", {\n                            children: translate(\"Weighted mark\")\n                          })\n                        }), /*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 6,\n                          children: /*#__PURE__*/_jsx(\"p\", {\n                            children: /*#__PURE__*/_jsx(\"strong\", {\n                              children: values.weighted_mark\n                            })\n                          })\n                        })]\n                      })]\n                    });\n                  }\n                })]\n              })]\n            });\n          }\n        })\n      })]\n    })\n  });\n};\n\nexport default AddCertificateModal;","map":null,"metadata":{},"sourceType":"module"}