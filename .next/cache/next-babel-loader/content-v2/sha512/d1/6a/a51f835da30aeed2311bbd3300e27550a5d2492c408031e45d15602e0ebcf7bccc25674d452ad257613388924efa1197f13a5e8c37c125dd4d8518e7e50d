{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"F:\\\\StudentAffairs\\\\students\\\\students\\\\pages\\\\students_affairs\\\\affairs_officer\\\\candidates\\\\candidates-list.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect } from \"react\";\nimport { Button, AccordionDetails, Accordion, Typography, Dialog, DialogTitle, DialogActions } from \"@material-ui/core\";\nimport Admin from \"../../../../layouts/Admin\";\nimport styles from \"../../../../assets/jss/nextjs-material-dashboard/views/rtlStyle.js\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport GridContainer from \"../../../../components/Grid/GridContainer.js\";\nimport GridItem from \"../../../../components/Grid/GridItem.js\";\nimport { ExportToCsv } from \"export-to-csv\";\nimport ActionTable from \"../../../../components/MaterialTable/ActionTable\";\nimport Placeholder from \"../../../../Utility/Placeholders\";\nimport CandidateService from \"../../../../Services/CandidateService\";\nimport SearchAddCandidateModal from \"../../../../components/Modals/SearchAddCandidateModal\";\nimport * as Yup from \"yup\";\nimport { useRouter } from \"next/router\";\nimport { useTranslation } from \"../../../../Utility/Translations/useTranslation\";\nimport SuiButton from \"../../../../components/SuiButton\";\nimport { setCandidate, useAppDispatch } from \"../../../../redux\";\nimport AddTestResultsFileModal from \"../../../../components/Modals/AddTestResultsFileModal\";\nimport AddCandidateOutSideMinistryModal from \"../../../../components/Modals/AddCandidateOutSideMinistryModal\";\nimport _ from \"lodash\";\nimport { Description } from \"@material-ui/icons\";\n\nconst CandidatesList = ({\n  forRegistrations = false,\n  title,\n  customColumns\n}) => {\n  _s();\n\n  const router = useRouter();\n  const {\n    translate\n  } = useTranslation();\n  const useStyles = makeStyles(styles);\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const [Candidates, setCandidates] = React.useState(null);\n  const [loading, setLoading] = React.useState(false);\n  const [open, setOpen] = React.useState(false);\n  const [searchResult, setSearchResult] = React.useState(null);\n  const [items, setItems] = React.useState([]); // Confirm Delete\n\n  const [confirmDelete, setConfirmDelete] = React.useState(false);\n  const [deleteId, setDeleteId] = React.useState(null);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setSearchResult(null);\n    setOpen(false);\n  };\n\n  const [initAddCandidate, setInitAddCandidate] = React.useState({\n    subscription_number: \"\",\n    year: \"\",\n    governorate: \"\",\n    round: \"\"\n  });\n  const AddCandidateScheme = Yup.object().shape({\n    subscription_number: Yup.string().required(translate(\"{0} is required\", \"Subscription number\")),\n    year: Yup.string().required(translate(\"{0} is required\", \"Year\")),\n    governorate: Yup.string().required(translate(\"{0} is required\", \"City\")),\n    round: Yup.string().required(translate(\"{0} is required\", \"Round\"))\n  });\n  const [openTestResults, setOpenTestResults] = React.useState(false);\n\n  const handleOpenTestResults = () => {\n    setOpenTestResults(true);\n  };\n\n  const handleCloseTestResults = () => {\n    setOpenTestResults(false);\n  };\n\n  const [openOutsideCandidate, setOpenOutsideCandidate] = React.useState(false);\n\n  const handleOpenOutsideCandidate = () => {\n    setOpenOutsideCandidate(true);\n  };\n\n  const handleCloseOutsideCandidate = () => {\n    setOpenOutsideCandidate(false);\n  };\n\n  const submitSearchCandidate = async (values, setSubmitting) => {\n    setSubmitting(true);\n    CandidateService.Search(values).then(res => {\n      setSearchResult({\n        found: Boolean(res.result),\n        result: res.result\n      }); // setOpen(false);\n    }).catch(error => {\n      console.error(\"error\", error);\n    }).finally(() => {\n      setSubmitting(false);\n    });\n  };\n\n  const submitAddCandidate = async (values, setSubmitting) => {\n    setSubmitting(true);\n    CandidateService.AddAfterSearch(_objectSpread(_objectSpread({}, values), {}, {\n      external: 0\n    })).then(res => {\n      const candidatesCopy = [res.result, ...Candidates];\n      setCandidates(candidatesCopy);\n      handleClose();\n      dispatch(setCandidate(res.result));\n      router.push(`/${router.locale}/students_affairs/affairs_officer/candidates/candidate-details`);\n    }).catch(error => {\n      console.error(\"error\", error);\n    }).finally(() => {\n      setSubmitting(false);\n    });\n  };\n  /************************** Data ****************************/\n\n\n  const getCandidates = async () => {\n    var result = await CandidateService.GetAll().then(res => {\n      var _res$result;\n\n      console.clear();\n      console.log(res);\n      return forRegistrations ? (_res$result = res.result) === null || _res$result === void 0 ? void 0 : _res$result.filter(item => {\n        var _item$registerations;\n\n        return ((_item$registerations = item.registerations) === null || _item$registerations === void 0 ? void 0 : _item$registerations.length) > 0;\n      }) : res.result;\n    }).catch(error => {\n      console.error(\"error\", error);\n    });\n    return result;\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    setItems([]);\n    getCandidates().then(res => {\n      setCandidates(res);\n      setLoading(false);\n    });\n  }, []);\n  /************************** Finish Data ****************************/\n\n  let columns = [{\n    title: translate(\"Id\"),\n    field: \"id\",\n    hidden: true,\n    filtering: false\n  }, {\n    title: translate(\"Name\"),\n    field: \"full_name\",\n    filtering: false\n  }, {\n    title: translate(\"Father\"),\n    field: \"father.first_name\",\n    hidden: true,\n    filtering: false\n  }, {\n    title: translate(\"Mother\"),\n    field: \"mother.first_name\",\n    hidden: true,\n    filtering: false\n  }, {\n    title: translate(\"Registeration number\"),\n    field: \"registeration_number\",\n    filtering: false,\n    type: \"string\"\n  }, {\n    title: translate(\"Subscription number\"),\n    field: \"certificates[0].subscription_number\",\n    filtering: false\n  }, {\n    title: translate(\"City\"),\n    field: \"certificates[0].city\",\n    filtering: false\n  }, {\n    title: translate(\"Round\"),\n    field: \"certificates[0].round\",\n    filtering: false\n  }, {\n    title: translate(\"Ministry External\"),\n    field: \"external_value\",\n    filtering: false\n  }, {\n    title: translate(\"Registration Year\"),\n    field: \"registeration_year_name\",\n    filtering: false\n  } // {\n  //     title: translate(\"Result\"),\n  //     field: \"certificates[0].result\",\n  // },\n  ]; // confirm\n\n  const ConfirmDialog = ({\n    id,\n    show,\n    handleClose,\n    handleDeleteCandidate\n  }) => {\n    return /*#__PURE__*/_jsxDEV(Dialog, {\n      open: show,\n      maxWidth: \"sm\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          children: `هل تريد تأكيد حذف المرشّح ${name}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: handleClose,\n          children: /*#__PURE__*/_jsxDEV(Close, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleClose,\n          color: \"secondary\",\n          variant: \"contained\",\n          children: translate(\"Cancel\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => handleDeleteCandidate(id),\n          color: \"primary\",\n          variant: \"contained\",\n          children: translate(\"Confirm\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this);\n  };\n\n  const [name, setName] = React.useState(\"\");\n\n  const handleConfirmDialog = data => {\n    console.clear();\n    console.log(data);\n    setDeleteId(data.id);\n    setName(`${data === null || data === void 0 ? void 0 : data.first_name} ${data === null || data === void 0 ? void 0 : data.last_name}`);\n    setConfirmDelete(true);\n  };\n\n  const handleCloseConfirmDialog = () => {\n    setDeleteId(null);\n    setConfirmDelete(false);\n  };\n\n  const handleDeleteCandidate = data => {\n    console.clear();\n    console.log(data);\n    CandidateService.Delete(data.id).then(response => {\n      toast.success(\"تم حذف المرشّح بنجاح\");\n    }).catch(error => {});\n  };\n\n  const renderCandidates = () => {\n    if (loading) return /*#__PURE__*/_jsxDEV(Placeholder, {\n      loading: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 25\n    }, this);\n\n    if (Candidates != null && Candidates.length > 0) {\n      let data = Candidates;\n      let options = {\n        exportAllData: true,\n        exportButton: true,\n        actionsColumnIndex: -1,\n        headerStyle: {\n          backgroundColor: \"#01579b\",\n          color: \"#FFF\",\n          fontWeight: \"bold\"\n        },\n        filtering: true,\n        paging: true,\n        pageSize: 10,\n        maxBodyHeight: \"500px\"\n      };\n      const btnLabel = !forRegistrations ? \"Candidate Details\" : \"Edit Registration\";\n      const btnPage = !forRegistrations ? \"candidate-details\" : \"edit-registration\";\n      let actions = [{\n        icon: () => /*#__PURE__*/_jsxDEV(SuiButton, {\n          style: {\n            minWidth: 140\n          },\n          color: \"primary\",\n          children: translate(btnLabel)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }, this),\n        onClick: (evt, data) => {\n          dispatch(setCandidate(data));\n          router.push(`/${router.locale}/students_affairs/affairs_officer/candidates/${btnPage}`);\n        }\n      }, {\n        icon: () => /*#__PURE__*/_jsxDEV(SuiButton, {\n          style: {\n            minWidth: 140\n          },\n          color: \"error\",\n          children: \"\\u062D\\u0630\\u0641 \\u0645\\u0631\\u0634\\u062D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this),\n        onClick: (evt, data) => {\n          handleConfirmDialog(data);\n        }\n      }];\n      return /*#__PURE__*/_jsxDEV(ActionTable, {\n        Title: title || translate(\"Candidates List\"),\n        Columns: customColumns || columns,\n        Data: data.map(item => {\n          var _item$person, _item$father, _item$person2;\n\n          return _objectSpread(_objectSpread({}, item), {}, {\n            registeration_year_name: item.registeration_year == new Date().getFullYear() ? \"الحالي\" : \"السابق\",\n            external_value: item.external ? translate(\"Yes\") : translate(\"No\"),\n            full_name: `${(_item$person = item.person) === null || _item$person === void 0 ? void 0 : _item$person.first_name} ${(_item$father = item.father) === null || _item$father === void 0 ? void 0 : _item$father.first_name} ${(_item$person2 = item.person) === null || _item$person2 === void 0 ? void 0 : _item$person2.last_name}`\n          });\n        }),\n        Options: options,\n        Actions: actions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this);\n    } else return /*#__PURE__*/_jsxDEV(Placeholder, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 19\n    }, this);\n  }; // Dynamic Export\n\n\n  const [showExportColumns, setShowExportColumns] = React.useState(false);\n  const [selectedColumns, setSelectedColumns] = React.useState([]);\n  const [checked, setChecked] = React.useState([]);\n\n  const handleExportData = () => {\n    setShowExportColumns(!showExportColumns);\n  };\n\n  const csvOptions = {\n    fieldSeparator: \";\",\n    quoteStrings: '\"',\n    decimalSeparator: \".\",\n    showLabels: true,\n    useBom: true,\n    useKeysAsHeaders: false,\n    headers: selectedColumns.map(c => c.title)\n  };\n  const csvExporter = new ExportToCsv(csvOptions);\n\n  const generateExcel = () => {\n    csvExporter.generateCsv(Candidates.map(ct => {\n      let object = {};\n      selectedColumns.forEach((item, index) => {\n        var _ct$person, _ct$father, _ct$person2, _$get;\n\n        if (item.field == \"full_name\") _.set(object, `col ${index}`, `${(_ct$person = ct.person) === null || _ct$person === void 0 ? void 0 : _ct$person.first_name} ${(_ct$father = ct.father) === null || _ct$father === void 0 ? void 0 : _ct$father.first_name} ${(_ct$person2 = ct.person) === null || _ct$person2 === void 0 ? void 0 : _ct$person2.last_name}`);else _.set(object, `col ${index}`, (_$get = _.get(ct, item.field)) !== null && _$get !== void 0 ? _$get : \"\");\n      });\n      console.log(object);\n      return object;\n    }));\n  };\n\n  const handleCheck = event => {\n    var updatedList = [...checked];\n\n    if (event.target.checked) {\n      updatedList = [...checked, event.target.value];\n    } else {\n      updatedList.splice(checked.indexOf(event.target.value), 1);\n    }\n\n    setChecked(updatedList);\n    setSelectedColumns(columns.filter(item => {\n      return updatedList.includes(item.field);\n    }));\n  };\n\n  const handleAllExportData = () => {\n    let allColumns = [{\n      title: \"رقم التسجيل\",\n      field: \"registeration_number\",\n      hidden: true,\n      filtering: false\n    }, {\n      title: \"الاسم الثلاثي\",\n      field: \"full_name\",\n      filtering: false\n    }, {\n      title: \"رقم الاكتتاب\",\n      field: \"certificates[0].subscription_number\",\n      hidden: true,\n      filtering: false\n    }, {\n      title: \"المحافظة\",\n      field: \"certificates[0].city\",\n      filtering: false,\n      type: \"string\"\n    }, {\n      title: \"الدورة\",\n      field: \"certificates[0].round\",\n      filtering: false\n    }, {\n      title: \"2400\",\n      field: \"certificates[0].details[9].value\",\n      filtering: false\n    }, {\n      title: \"رياضيات\",\n      field: \"certificates[0].details[4].value\",\n      filtering: false\n    }, {\n      title: \"فيزياء\",\n      field: \"certificates[0].details[5].value\",\n      filtering: false\n    }, {\n      title: \"كيمياء\",\n      field: \"certificates[0].details[6].value\",\n      filtering: false\n    }, {\n      title: \"3600\",\n      field: \"registerations[0].mark_3600\",\n      filtering: false\n    }, {\n      title: \"الهاتف\",\n      field: \"person.phones[0].phone\",\n      filtering: false\n    }, {\n      title: \"مكان امتحان القبول\",\n      field: \"exam_place\",\n      filtering: false\n    }, {\n      title: \"امتحان قبول الرياضيات\",\n      field: \"registerations[0].math\",\n      filtering: false\n    }, {\n      title: \"امتحان قبول الفيزياء\",\n      field: \"registerations[0].physics\",\n      filtering: false\n    }, {\n      title: \"3400\",\n      field: \"registerations[0].mark_3400\",\n      filtering: false\n    }, {\n      title: \"حالة القبول\",\n      field: \"registerations[0].status\",\n      filtering: false\n    }, {\n      title: translate(\"Ministry External\"),\n      field: \"external\",\n      filtering: false\n    }, {\n      title: \"أولى\",\n      field: \"desires[0].speciality.ar_name\",\n      filtering: false\n    }, {\n      title: \"ثانية\",\n      field: \"desires[1].speciality.ar_name\",\n      filtering: false\n    }, {\n      title: \"ثالثة\",\n      field: \"desires[2].speciality.ar_name\",\n      filtering: false\n    }, {\n      title: \"رابعة\",\n      field: \"desires[3].speciality.ar_name\",\n      filtering: false\n    }, {\n      title: \"خامسة\",\n      field: \"desires[4].speciality.ar_name\",\n      filtering: false\n    }, {\n      title: \"سادسة\",\n      field: \"desires[5].speciality.ar_name\",\n      filtering: false\n    }, {\n      title: \"مثبتة\",\n      field: \"selected_desire?.speciality_name\",\n      filtering: false\n    }, {\n      title: translate(\"Registration Year\"),\n      field: \"registeration_year\",\n      filtering: false\n    }, {\n      title: \"فئة التسجيل\",\n      field: \"registeration_class\",\n      filtering: false\n    }, {\n      title: \"مكان الدراسة\",\n      field: \"study_place\",\n      filtering: false\n    }];\n    let localCsvOptions = {\n      fieldSeparator: \";\",\n      quoteStrings: '\"',\n      decimalSeparator: \".\",\n      showLabels: true,\n      useBom: true,\n      useKeysAsHeaders: false,\n      headers: allColumns.map(c => c.title)\n    };\n    let localCsvExporter = new ExportToCsv(localCsvOptions);\n    setTimeout(() => {\n      localCsvExporter.generateCsv(Candidates.map(ct => {\n        let object = {};\n        allColumns.forEach((item, index) => {\n          var _ct$person3, _ct$father2, _ct$person4, _$get2;\n\n          if (item.field == \"full_name\") _.set(object, `col ${index}`, `${(_ct$person3 = ct.person) === null || _ct$person3 === void 0 ? void 0 : _ct$person3.first_name} ${(_ct$father2 = ct.father) === null || _ct$father2 === void 0 ? void 0 : _ct$father2.first_name} ${(_ct$person4 = ct.person) === null || _ct$person4 === void 0 ? void 0 : _ct$person4.last_name}`);else if (item.field == \"registerations[0].mark_3600\") {\n            var _ct$certificates$, _ct$certificates$2, _ct$certificates$2$de, _ct$certificates$3, _ct$certificates$3$de, _ct$certificates$4, _ct$certificates$4$de;\n\n            let value = parseInt(ct === null || ct === void 0 ? void 0 : (_ct$certificates$ = ct.certificates[0]) === null || _ct$certificates$ === void 0 ? void 0 : _ct$certificates$.result) + parseInt((_ct$certificates$2 = ct.certificates[0]) === null || _ct$certificates$2 === void 0 ? void 0 : (_ct$certificates$2$de = _ct$certificates$2.details[4]) === null || _ct$certificates$2$de === void 0 ? void 0 : _ct$certificates$2$de.value) + parseInt((_ct$certificates$3 = ct.certificates[0]) === null || _ct$certificates$3 === void 0 ? void 0 : (_ct$certificates$3$de = _ct$certificates$3.details[5]) === null || _ct$certificates$3$de === void 0 ? void 0 : _ct$certificates$3$de.value) + parseInt((_ct$certificates$4 = ct.certificates[0]) === null || _ct$certificates$4 === void 0 ? void 0 : (_ct$certificates$4$de = _ct$certificates$4.details[6]) === null || _ct$certificates$4$de === void 0 ? void 0 : _ct$certificates$4$de.value);\n\n            _.set(object, `col ${index}`, `${value}`);\n          } else if (item.field == \"registerations[0].mark_3400\") {\n            var _ct$registerations;\n\n            if ((ct === null || ct === void 0 ? void 0 : (_ct$registerations = ct.registerations) === null || _ct$registerations === void 0 ? void 0 : _ct$registerations.length) > 0) {\n              var _ct$certificates$5, _ct$registerations$, _ct$registerations$2;\n\n              let value = parseInt(ct === null || ct === void 0 ? void 0 : (_ct$certificates$5 = ct.certificates[0]) === null || _ct$certificates$5 === void 0 ? void 0 : _ct$certificates$5.result) + parseInt(ct === null || ct === void 0 ? void 0 : (_ct$registerations$ = ct.registerations[0]) === null || _ct$registerations$ === void 0 ? void 0 : _ct$registerations$.math) + parseInt(ct === null || ct === void 0 ? void 0 : (_ct$registerations$2 = ct.registerations[0]) === null || _ct$registerations$2 === void 0 ? void 0 : _ct$registerations$2.physics);\n\n              _.set(object, `col ${index}`, `${value}`);\n            } else _.set(object, `col ${index}`, \"\");\n          } else if (item.field == \"external\") {\n            let value = ct.external == 0 ? \"وزارة\" : \"خارج الوزارة\";\n\n            _.set(object, `col ${index}`, `${value}`);\n          } else _.set(object, `col ${index}`, (_$get2 = _.get(ct, item.field)) !== null && _$get2 !== void 0 ? _$get2 : \"\");\n        });\n        return object;\n      }));\n    }, 2000);\n  };\n\n  return /*#__PURE__*/_jsxDEV(GridContainer, {\n    children: [/*#__PURE__*/_jsxDEV(GridItem, {\n      md: 12,\n      children: [/*#__PURE__*/_jsxDEV(ConfirmDialog, {\n        id: deleteId,\n        show: confirmDelete,\n        handleClose: handleCloseConfirmDialog,\n        handleDeleteCandidate: handleDeleteCandidate\n      }, \"Confirm Delete Cadidate\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 9\n      }, this), !forRegistrations && /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            marginLeft: 10\n          },\n          disabled: false,\n          variant: \"contained\",\n          className: classes.submitBtn,\n          onClick: handleOpen,\n          children: translate(\"Add New Candidate\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            marginLeft: 10\n          },\n          disabled: false,\n          variant: \"contained\",\n          className: classes.submitBtn,\n          onClick: handleOpenOutsideCandidate,\n          children: [translate(\"Add Candidate\"), \" \", translate(\"out-side of ministry data\")]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SuiButton, {\n          style: {\n            marginLeft: 10\n          },\n          disabled: false,\n          variant: \"gradient\",\n          onClick: handleOpenTestResults,\n          color: \"dark\",\n          children: translate(\"Add acceptance test results\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SuiButton, {\n          style: {\n            marginLeft: 10\n          },\n          disabled: false,\n          variant: \"gradient\",\n          onClick: handleExportData,\n          color: \"dark\",\n          children: translate(\"Export\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(SuiButton, {\n        style: {\n          marginLeft: 10\n        },\n        disabled: false,\n        variant: \"gradient\",\n        onClick: handleAllExportData,\n        color: \"dark\",\n        children: translate(\"تصدير كامل المعلومات\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 9\n      }, this), showExportColumns && /*#__PURE__*/_jsxDEV(GridItem, {\n        style: {\n          marginBottom: \"1em\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Accordion, {\n          children: /*#__PURE__*/_jsxDEV(AccordionDetails, {\n            children: /*#__PURE__*/_jsxDEV(GridItem, {\n              container: true,\n              children: [/*#__PURE__*/_jsxDEV(GridItem, {\n                md: 12,\n                style: {\n                  display: \"flex\",\n                  justifyContent: \"center\"\n                },\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  style: {\n                    backgroundColor: \"lightgray\",\n                    boxShadow: \"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)\",\n                    padding: \"0em 1.2em\",\n                    margin: \"0em 0em .5em 0em\"\n                  },\n                  children: translate(\"Select Columns\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 647,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 643,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(GridItem, {\n                md: 12,\n                children: [/*#__PURE__*/_jsxDEV(GridItem, {\n                  className: \"list-container\",\n                  style: {\n                    display: \"flex\",\n                    justifyContent: \"space-between\"\n                  },\n                  children: columns // .filter((item) => !item.hidden)\n                  .map((item, index) => /*#__PURE__*/_jsxDEV(GridItem, {\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      value: item.field,\n                      type: \"checkbox\",\n                      onChange: handleCheck\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 671,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: item.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 676,\n                      columnNumber: 29\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 670,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 660,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(GridItem, {\n                  md: 12,\n                  style: {\n                    display: \"flex\",\n                    justifyContent: \"center\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    style: {\n                      margin: \"0px 5px\"\n                    },\n                    disabled: false,\n                    variant: \"contained\",\n                    className: classes.successText,\n                    onClick: generateExcel,\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        padding: \"0px 0px 0px 10px\"\n                      },\n                      children: translate(\"Export\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 691,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Description, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 694,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 684,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 680,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 659,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 642,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 640,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 639,\n        columnNumber: 11\n      }, this), renderCandidates()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchAddCandidateModal, {\n      searchResult: searchResult,\n      onAddClick: submitAddCandidate,\n      title: translate(\"Add Candidate\"),\n      open: open,\n      formScheme: AddCandidateScheme,\n      handleClose: handleClose,\n      initValues: initAddCandidate,\n      submitForm: submitSearchCandidate\n    }, \"addCandidate\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 705,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddTestResultsFileModal, {\n      title: translate(\"Add acceptance test results\"),\n      open: openTestResults,\n      handleClose: handleCloseTestResults,\n      submitForm: () => handleCloseTestResults()\n    }, \"addAcceptanceTestResults\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 716,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddCandidateOutSideMinistryModal, {\n      // title={translate(\"Add acceptance test results\")}\n      open: openOutsideCandidate,\n      handleClose: handleCloseOutsideCandidate\n    }, \"addOutsideCandidate\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 723,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 579,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CandidatesList, \"3P2cA8F10s8RjmfxS/IH8Vy3Slk=\", true, function () {\n  return [useRouter, useTranslation, useAppDispatch];\n});\n\n_c = CandidatesList;\nCandidatesList.auth = true;\nCandidatesList.layout = Admin;\nexport default CandidatesList;\n\nvar _c;\n\n$RefreshReg$(_c, \"CandidatesList\");","map":{"version":3,"sources":["F:/StudentAffairs/students/students/pages/students_affairs/affairs_officer/candidates/candidates-list.tsx"],"names":["React","useEffect","Button","AccordionDetails","Accordion","Typography","Dialog","DialogTitle","DialogActions","Admin","styles","makeStyles","GridContainer","GridItem","ExportToCsv","ActionTable","Placeholder","CandidateService","SearchAddCandidateModal","Yup","useRouter","useTranslation","SuiButton","setCandidate","useAppDispatch","AddTestResultsFileModal","AddCandidateOutSideMinistryModal","_","Description","CandidatesList","forRegistrations","title","customColumns","router","translate","useStyles","classes","dispatch","Candidates","setCandidates","useState","loading","setLoading","open","setOpen","searchResult","setSearchResult","items","setItems","confirmDelete","setConfirmDelete","deleteId","setDeleteId","handleOpen","handleClose","initAddCandidate","setInitAddCandidate","subscription_number","year","governorate","round","AddCandidateScheme","object","shape","string","required","openTestResults","setOpenTestResults","handleOpenTestResults","handleCloseTestResults","openOutsideCandidate","setOpenOutsideCandidate","handleOpenOutsideCandidate","handleCloseOutsideCandidate","submitSearchCandidate","values","setSubmitting","Search","then","res","found","Boolean","result","catch","error","console","finally","submitAddCandidate","AddAfterSearch","external","candidatesCopy","push","locale","getCandidates","GetAll","clear","log","filter","item","registerations","length","columns","field","hidden","filtering","type","ConfirmDialog","id","show","handleDeleteCandidate","name","setName","handleConfirmDialog","data","first_name","last_name","handleCloseConfirmDialog","Delete","response","toast","success","renderCandidates","options","exportAllData","exportButton","actionsColumnIndex","headerStyle","backgroundColor","color","fontWeight","paging","pageSize","maxBodyHeight","btnLabel","btnPage","actions","icon","minWidth","onClick","evt","map","registeration_year_name","registeration_year","Date","getFullYear","external_value","full_name","person","father","showExportColumns","setShowExportColumns","selectedColumns","setSelectedColumns","checked","setChecked","handleExportData","csvOptions","fieldSeparator","quoteStrings","decimalSeparator","showLabels","useBom","useKeysAsHeaders","headers","c","csvExporter","generateExcel","generateCsv","ct","forEach","index","set","get","handleCheck","event","updatedList","target","value","splice","indexOf","includes","handleAllExportData","allColumns","localCsvOptions","localCsvExporter","setTimeout","parseInt","certificates","details","math","physics","marginLeft","submitBtn","marginBottom","display","justifyContent","boxShadow","padding","margin","successText","auth","layout"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport {\r\n  Button,\r\n  AccordionDetails,\r\n  Accordion,\r\n  Typography,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport Admin from \"../../../../layouts/Admin\";\r\nimport styles from \"../../../../assets/jss/nextjs-material-dashboard/views/rtlStyle.js\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport GridContainer from \"../../../../components/Grid/GridContainer.js\";\r\nimport GridItem from \"../../../../components/Grid/GridItem.js\";\r\nimport { ExportToCsv } from \"export-to-csv\";\r\nimport { ICandidateModel } from \"../../../../Models/ApiResponse/CandidateModel\";\r\nimport ActionTable from \"../../../../components/MaterialTable/ActionTable\";\r\nimport Placeholder from \"../../../../Utility/Placeholders\";\r\nimport CandidateService from \"../../../../Services/CandidateService\";\r\nimport SearchAddCandidateModal from \"../../../../components/Modals/SearchAddCandidateModal\";\r\nimport * as Yup from \"yup\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useTranslation } from \"../../../../Utility/Translations/useTranslation\";\r\nimport SuiButton from \"../../../../components/SuiButton\";\r\nimport { setCandidate, useAppDispatch } from \"../../../../redux\";\r\nimport AddTestResultsFileModal from \"../../../../components/Modals/AddTestResultsFileModal\";\r\nimport AddCandidateOutSideMinistryModal from \"../../../../components/Modals/AddCandidateOutSideMinistryModal\";\r\nimport _ from \"lodash\";\r\nimport { Description } from \"@material-ui/icons\";\r\nimport DesireService from \"../../../../Services/DesireService\";\r\n\r\ninterface ICandidatesListProps {\r\n  forRegistrations: boolean;\r\n  title: string;\r\n  customColumns: any[];\r\n}\r\nconst CandidatesList: React.FC<ICandidatesListProps> = ({\r\n  forRegistrations = false,\r\n  title,\r\n  customColumns,\r\n}) => {\r\n  const router = useRouter();\r\n  const { translate } = useTranslation();\r\n  const useStyles = makeStyles(styles);\r\n  const classes = useStyles();\r\n  const dispatch = useAppDispatch();\r\n  const [Candidates, setCandidates] = React.useState<ICandidateModel[]>(null);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [open, setOpen] = React.useState(false);\r\n  const [searchResult, setSearchResult] = React.useState(null);\r\n  const [items, setItems] = React.useState([]);\r\n  // Confirm Delete\r\n  const [confirmDelete, setConfirmDelete] = React.useState(false);\r\n  const [deleteId, setDeleteId] = React.useState(null);\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n  const handleClose = () => {\r\n    setSearchResult(null);\r\n    setOpen(false);\r\n  };\r\n  const [initAddCandidate, setInitAddCandidate] = React.useState<object>({\r\n    subscription_number: \"\",\r\n    year: \"\",\r\n    governorate: \"\",\r\n    round: \"\",\r\n  });\r\n\r\n  const AddCandidateScheme = Yup.object().shape({\r\n    subscription_number: Yup.string().required(\r\n      translate(\"{0} is required\", \"Subscription number\")\r\n    ),\r\n    year: Yup.string().required(translate(\"{0} is required\", \"Year\")),\r\n    governorate: Yup.string().required(translate(\"{0} is required\", \"City\")),\r\n    round: Yup.string().required(translate(\"{0} is required\", \"Round\")),\r\n  });\r\n\r\n  const [openTestResults, setOpenTestResults] = React.useState(false);\r\n\r\n  const handleOpenTestResults = () => {\r\n    setOpenTestResults(true);\r\n  };\r\n  const handleCloseTestResults = () => {\r\n    setOpenTestResults(false);\r\n  };\r\n\r\n  const [openOutsideCandidate, setOpenOutsideCandidate] = React.useState(false);\r\n\r\n  const handleOpenOutsideCandidate = () => {\r\n    setOpenOutsideCandidate(true);\r\n  };\r\n  const handleCloseOutsideCandidate = () => {\r\n    setOpenOutsideCandidate(false);\r\n  };\r\n\r\n  const submitSearchCandidate = async (values: any, setSubmitting) => {\r\n    setSubmitting(true);\r\n    CandidateService.Search(values)\r\n      .then((res) => {\r\n        setSearchResult({ found: Boolean(res.result), result: res.result });\r\n        // setOpen(false);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"error\", error);\r\n      })\r\n      .finally(() => {\r\n        setSubmitting(false);\r\n      });\r\n  };\r\n\r\n  const submitAddCandidate = async (values: any, setSubmitting) => {\r\n    setSubmitting(true);\r\n    CandidateService.AddAfterSearch({ ...values, external: 0 })\r\n      .then((res) => {\r\n        const candidatesCopy = [res.result, ...Candidates];\r\n        setCandidates(candidatesCopy);\r\n        handleClose();\r\n        dispatch(setCandidate(res.result));\r\n        router.push(\r\n          `/${router.locale}/students_affairs/affairs_officer/candidates/candidate-details`\r\n        );\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"error\", error);\r\n      })\r\n      .finally(() => {\r\n        setSubmitting(false);\r\n      });\r\n  };\r\n\r\n  /************************** Data ****************************/\r\n  const getCandidates = async () => {\r\n    var result = await CandidateService.GetAll()\r\n      .then((res) => {\r\n        console.clear();\r\n        console.log(res);\r\n        return forRegistrations\r\n          ? res.result?.filter((item) => item.registerations?.length > 0)\r\n          : res.result;\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"error\", error);\r\n      });\r\n    return result;\r\n  };\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setItems([]);\r\n    getCandidates().then((res) => {\r\n      setCandidates(res);\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n  /************************** Finish Data ****************************/\r\n  let columns = [\r\n    {\r\n      title: translate(\"Id\"),\r\n      field: \"id\",\r\n      hidden: true,\r\n      filtering: false,\r\n    },\r\n    {\r\n      title: translate(\"Name\"),\r\n      field: \"full_name\",\r\n      filtering: false,\r\n    },\r\n    {\r\n      title: translate(\"Father\"),\r\n      field: \"father.first_name\",\r\n      hidden: true,\r\n      filtering: false,\r\n    },\r\n    {\r\n      title: translate(\"Mother\"),\r\n      field: \"mother.first_name\",\r\n      hidden: true,\r\n      filtering: false,\r\n    },\r\n    {\r\n      title: translate(\"Registeration number\"),\r\n      field: \"registeration_number\",\r\n      filtering: false,\r\n      type: \"string\",\r\n    },\r\n    {\r\n      title: translate(\"Subscription number\"),\r\n      field: \"certificates[0].subscription_number\",\r\n      filtering: false,\r\n    },\r\n    {\r\n      title: translate(\"City\"),\r\n      field: \"certificates[0].city\",\r\n      filtering: false,\r\n    },\r\n    {\r\n      title: translate(\"Round\"),\r\n      field: \"certificates[0].round\",\r\n      filtering: false,\r\n    },\r\n    {\r\n      title: translate(\"Ministry External\"),\r\n      field: \"external_value\",\r\n      filtering: false,\r\n    },\r\n    {\r\n      title: translate(\"Registration Year\"),\r\n      field: \"registeration_year_name\",\r\n      filtering: false,\r\n    },\r\n    // {\r\n    //     title: translate(\"Result\"),\r\n    //     field: \"certificates[0].result\",\r\n    // },\r\n  ];\r\n  // confirm\r\n  const ConfirmDialog = ({ id, show, handleClose, handleDeleteCandidate }) => {\r\n    return (\r\n      <Dialog open={show} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>\r\n          <Typography>{`هل تريد تأكيد حذف المرشّح ${name}`}</Typography>\r\n        </DialogTitle>\r\n        <Box position=\"absolute\" top={0} right={0}>\r\n          <IconButton onClick={handleClose}>\r\n            <Close />\r\n          </IconButton>\r\n        </Box>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"secondary\" variant=\"contained\">\r\n            {translate(\"Cancel\")}\r\n          </Button>\r\n          <Button\r\n            onClick={() => handleDeleteCandidate(id)}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n          >\r\n            {translate(\"Confirm\")}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  };\r\n  const [name, setName] = React.useState(\"\");\r\n  const handleConfirmDialog = (data) => {\r\n    console.clear();\r\n    console.log(data);\r\n    setDeleteId(data.id);\r\n    setName(`${data?.first_name} ${data?.last_name}`);\r\n    setConfirmDelete(true);\r\n  };\r\n\r\n  const handleCloseConfirmDialog = () => {\r\n    setDeleteId(null);\r\n    setConfirmDelete(false);\r\n  };\r\n  const handleDeleteCandidate = (data) => {\r\n    console.clear();\r\n    console.log(data);\r\n    CandidateService.Delete(data.id)\r\n      .then((response) => {\r\n        toast.success(\"تم حذف المرشّح بنجاح\");\r\n      })\r\n      .catch((error) => {});\r\n  };\r\n  const renderCandidates = () => {\r\n    if (loading) return <Placeholder loading />;\r\n    if (Candidates != null && Candidates.length > 0) {\r\n      let data = Candidates;\r\n      let options = {\r\n        exportAllData: true,\r\n        exportButton: true,\r\n        actionsColumnIndex: -1,\r\n        headerStyle: {\r\n          backgroundColor: \"#01579b\",\r\n          color: \"#FFF\",\r\n          fontWeight: \"bold\",\r\n        },\r\n        filtering: true,\r\n        paging: true,\r\n        pageSize: 10,\r\n        maxBodyHeight: \"500px\",\r\n      };\r\n      const btnLabel = !forRegistrations\r\n        ? \"Candidate Details\"\r\n        : \"Edit Registration\";\r\n      const btnPage = !forRegistrations\r\n        ? \"candidate-details\"\r\n        : \"edit-registration\";\r\n      let actions = [\r\n        {\r\n          icon: () => (\r\n            <SuiButton style={{ minWidth: 140 }} color={\"primary\"}>\r\n              {translate(btnLabel)}\r\n            </SuiButton>\r\n          ),\r\n          onClick: (evt, data) => {\r\n            dispatch(setCandidate(data));\r\n            router.push(\r\n              `/${router.locale}/students_affairs/affairs_officer/candidates/${btnPage}`\r\n            );\r\n          },\r\n        },\r\n        {\r\n          icon: () => (\r\n            <SuiButton style={{ minWidth: 140 }} color={\"error\"}>\r\n              حذف مرشح\r\n            </SuiButton>\r\n          ),\r\n          onClick: (evt, data) => {\r\n            handleConfirmDialog(data);\r\n          },\r\n        },\r\n      ];\r\n      return (\r\n        <ActionTable\r\n          Title={title || translate(\"Candidates List\")}\r\n          Columns={customColumns || columns}\r\n          Data={data.map((item) => {\r\n            return {\r\n              ...item,\r\n              registeration_year_name:\r\n                item.registeration_year == new Date().getFullYear()\r\n                  ? \"الحالي\"\r\n                  : \"السابق\",\r\n              external_value: item.external\r\n                ? translate(\"Yes\")\r\n                : translate(\"No\"),\r\n              full_name: `${item.person?.first_name} ${item.father?.first_name} ${item.person?.last_name}`,\r\n            };\r\n          })}\r\n          Options={options}\r\n          Actions={actions}\r\n        />\r\n      );\r\n    } else return <Placeholder />;\r\n  };\r\n\r\n  // Dynamic Export\r\n  const [showExportColumns, setShowExportColumns] = React.useState(false);\r\n  const [selectedColumns, setSelectedColumns] = React.useState([]);\r\n  const [checked, setChecked] = React.useState([]);\r\n  const handleExportData = () => {\r\n    setShowExportColumns(!showExportColumns);\r\n  };\r\n  const csvOptions = {\r\n    fieldSeparator: \";\",\r\n    quoteStrings: '\"',\r\n    decimalSeparator: \".\",\r\n    showLabels: true,\r\n    useBom: true,\r\n    useKeysAsHeaders: false,\r\n    headers: selectedColumns.map((c) => c.title),\r\n  };\r\n  const csvExporter = new ExportToCsv(csvOptions);\r\n  const generateExcel = () => {\r\n    csvExporter.generateCsv(\r\n      Candidates.map((ct) => {\r\n        let object = {};\r\n        selectedColumns.forEach((item, index) => {\r\n          if (item.field == \"full_name\")\r\n            _.set(\r\n              object,\r\n              `col ${index}`,\r\n              `${ct.person?.first_name} ${ct.father?.first_name} ${ct.person?.last_name}`\r\n            );\r\n          else _.set(object, `col ${index}`, _.get(ct, item.field) ?? \"\");\r\n        });\r\n        console.log(object);\r\n        return object;\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleCheck = (event) => {\r\n    var updatedList = [...checked];\r\n    if (event.target.checked) {\r\n      updatedList = [...checked, event.target.value];\r\n    } else {\r\n      updatedList.splice(checked.indexOf(event.target.value), 1);\r\n    }\r\n    setChecked(updatedList);\r\n    setSelectedColumns(\r\n      columns.filter((item) => {\r\n        return updatedList.includes(item.field);\r\n      })\r\n    );\r\n  };\r\n  const handleAllExportData = () => {\r\n    let allColumns = [\r\n      {\r\n        title: \"رقم التسجيل\",\r\n        field: \"registeration_number\",\r\n        hidden: true,\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"الاسم الثلاثي\",\r\n        field: \"full_name\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"رقم الاكتتاب\",\r\n        field: \"certificates[0].subscription_number\",\r\n        hidden: true,\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"المحافظة\",\r\n        field: \"certificates[0].city\",\r\n        filtering: false,\r\n        type: \"string\",\r\n      },\r\n      {\r\n        title: \"الدورة\",\r\n        field: \"certificates[0].round\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"2400\",\r\n        field: \"certificates[0].details[9].value\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"رياضيات\",\r\n        field: \"certificates[0].details[4].value\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"فيزياء\",\r\n        field: \"certificates[0].details[5].value\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"كيمياء\",\r\n        field: \"certificates[0].details[6].value\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"3600\",\r\n        field: \"registerations[0].mark_3600\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"الهاتف\",\r\n        field: \"person.phones[0].phone\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"مكان امتحان القبول\",\r\n        field: \"exam_place\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"امتحان قبول الرياضيات\",\r\n        field: \"registerations[0].math\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"امتحان قبول الفيزياء\",\r\n        field: \"registerations[0].physics\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"3400\",\r\n        field: \"registerations[0].mark_3400\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"حالة القبول\",\r\n        field: \"registerations[0].status\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: translate(\"Ministry External\"),\r\n        field: \"external\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"أولى\",\r\n        field: \"desires[0].speciality.ar_name\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"ثانية\",\r\n        field: \"desires[1].speciality.ar_name\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"ثالثة\",\r\n        field: \"desires[2].speciality.ar_name\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"رابعة\",\r\n        field: \"desires[3].speciality.ar_name\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"خامسة\",\r\n        field: \"desires[4].speciality.ar_name\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"سادسة\",\r\n        field: \"desires[5].speciality.ar_name\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"مثبتة\",\r\n        field: \"selected_desire?.speciality_name\",\r\n        filtering: false,\r\n      },\r\n\r\n      {\r\n        title: translate(\"Registration Year\"),\r\n        field: \"registeration_year\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"فئة التسجيل\",\r\n        field: \"registeration_class\",\r\n        filtering: false,\r\n      },\r\n      {\r\n        title: \"مكان الدراسة\",\r\n        field: \"study_place\",\r\n        filtering: false,\r\n      },\r\n    ];\r\n    let localCsvOptions = {\r\n      fieldSeparator: \";\",\r\n      quoteStrings: '\"',\r\n      decimalSeparator: \".\",\r\n      showLabels: true,\r\n      useBom: true,\r\n      useKeysAsHeaders: false,\r\n      headers: allColumns.map((c) => c.title),\r\n    };\r\n    let localCsvExporter = new ExportToCsv(localCsvOptions);\r\n    setTimeout(() => {\r\n      localCsvExporter.generateCsv(\r\n        Candidates.map((ct) => {\r\n          let object = {};\r\n          allColumns.forEach((item, index) => {\r\n            if (item.field == \"full_name\")\r\n              _.set(\r\n                object,\r\n                `col ${index}`,\r\n                `${ct.person?.first_name} ${ct.father?.first_name} ${ct.person?.last_name}`\r\n              );\r\n            else if (item.field == \"registerations[0].mark_3600\") {\r\n              let value =\r\n                parseInt(ct?.certificates[0]?.result) +\r\n                parseInt(ct.certificates[0]?.details[4]?.value) +\r\n                parseInt(ct.certificates[0]?.details[5]?.value) +\r\n                parseInt(ct.certificates[0]?.details[6]?.value);\r\n              _.set(object, `col ${index}`, `${value}`);\r\n            } else if (item.field == \"registerations[0].mark_3400\") {\r\n              if (ct?.registerations?.length > 0) {\r\n                let value =\r\n                  parseInt(ct?.certificates[0]?.result) +\r\n                  parseInt(ct?.registerations[0]?.math) +\r\n                  parseInt(ct?.registerations[0]?.physics);\r\n                _.set(object, `col ${index}`, `${value}`);\r\n              } else _.set(object, `col ${index}`, \"\");\r\n            } else if (item.field == \"external\") {\r\n              let value = ct.external == 0 ? \"وزارة\" : \"خارج الوزارة\";\r\n              _.set(object, `col ${index}`, `${value}`);\r\n            } else _.set(object, `col ${index}`, _.get(ct, item.field) ?? \"\");\r\n          });\r\n          return object;\r\n        })\r\n      );\r\n    }, 2000);\r\n  };\r\n  return (\r\n    <GridContainer>\r\n      <GridItem md={12}>\r\n        <ConfirmDialog\r\n          key={\"Confirm Delete Cadidate\"}\r\n          id={deleteId}\r\n          show={confirmDelete}\r\n          handleClose={handleCloseConfirmDialog}\r\n          handleDeleteCandidate={handleDeleteCandidate}\r\n        />\r\n        {!forRegistrations && (\r\n          <React.Fragment>\r\n            <Button\r\n              style={{ marginLeft: 10 }}\r\n              disabled={false}\r\n              variant=\"contained\"\r\n              className={classes.submitBtn}\r\n              onClick={handleOpen}\r\n            >\r\n              {translate(\"Add New Candidate\")}\r\n            </Button>\r\n            <Button\r\n              style={{ marginLeft: 10 }}\r\n              disabled={false}\r\n              variant=\"contained\"\r\n              className={classes.submitBtn}\r\n              onClick={handleOpenOutsideCandidate}\r\n            >\r\n              {translate(\"Add Candidate\")}{\" \"}\r\n              {translate(\"out-side of ministry data\")}\r\n            </Button>\r\n            <SuiButton\r\n              style={{ marginLeft: 10 }}\r\n              disabled={false}\r\n              variant=\"gradient\"\r\n              onClick={handleOpenTestResults}\r\n              color={\"dark\"}\r\n            >\r\n              {translate(\"Add acceptance test results\")}\r\n            </SuiButton>\r\n            <SuiButton\r\n              style={{ marginLeft: 10 }}\r\n              disabled={false}\r\n              variant=\"gradient\"\r\n              onClick={handleExportData}\r\n              color={\"dark\"}\r\n            >\r\n              {translate(\"Export\")}\r\n            </SuiButton>\r\n          </React.Fragment>\r\n        )}\r\n        <SuiButton\r\n          style={{ marginLeft: 10 }}\r\n          disabled={false}\r\n          variant=\"gradient\"\r\n          onClick={handleAllExportData}\r\n          color={\"dark\"}\r\n        >\r\n          {translate(\"تصدير كامل المعلومات\")}\r\n        </SuiButton>\r\n        {showExportColumns && (\r\n          <GridItem style={{ marginBottom: \"1em\" }}>\r\n            <Accordion>\r\n              <AccordionDetails>\r\n                <GridItem container>\r\n                  <GridItem\r\n                    md={12}\r\n                    style={{ display: \"flex\", justifyContent: \"center\" }}\r\n                  >\r\n                    <Typography\r\n                      style={{\r\n                        backgroundColor: \"lightgray\",\r\n                        boxShadow:\r\n                          \"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)\",\r\n                        padding: \"0em 1.2em\",\r\n                        margin: \"0em 0em .5em 0em\",\r\n                      }}\r\n                    >\r\n                      {translate(\"Select Columns\")}\r\n                    </Typography>\r\n                  </GridItem>\r\n                  <GridItem md={12}>\r\n                    <GridItem\r\n                      className=\"list-container\"\r\n                      style={{\r\n                        display: \"flex\",\r\n                        justifyContent: \"space-between\",\r\n                      }}\r\n                    >\r\n                      {columns\r\n                        // .filter((item) => !item.hidden)\r\n                        .map((item, index) => (\r\n                          <GridItem key={index}>\r\n                            <input\r\n                              value={item.field}\r\n                              type=\"checkbox\"\r\n                              onChange={handleCheck}\r\n                            />\r\n                            <span>{item.title}</span>\r\n                          </GridItem>\r\n                        ))}\r\n                    </GridItem>\r\n                    <GridItem\r\n                      md={12}\r\n                      style={{ display: \"flex\", justifyContent: \"center\" }}\r\n                    >\r\n                      <Button\r\n                        style={{ margin: \"0px 5px\" }}\r\n                        disabled={false}\r\n                        variant=\"contained\"\r\n                        className={classes.successText}\r\n                        onClick={generateExcel}\r\n                      >\r\n                        <span style={{ padding: \"0px 0px 0px 10px\" }}>\r\n                          {translate(\"Export\")}\r\n                        </span>\r\n                        <Description />\r\n                      </Button>\r\n                    </GridItem>\r\n                  </GridItem>\r\n                </GridItem>\r\n              </AccordionDetails>\r\n            </Accordion>\r\n          </GridItem>\r\n        )}\r\n        {renderCandidates()}\r\n      </GridItem>\r\n      <SearchAddCandidateModal\r\n        searchResult={searchResult}\r\n        onAddClick={submitAddCandidate}\r\n        key={\"addCandidate\"}\r\n        title={translate(\"Add Candidate\")}\r\n        open={open}\r\n        formScheme={AddCandidateScheme}\r\n        handleClose={handleClose}\r\n        initValues={initAddCandidate}\r\n        submitForm={submitSearchCandidate}\r\n      ></SearchAddCandidateModal>\r\n      <AddTestResultsFileModal\r\n        key={\"addAcceptanceTestResults\"}\r\n        title={translate(\"Add acceptance test results\")}\r\n        open={openTestResults}\r\n        handleClose={handleCloseTestResults}\r\n        submitForm={() => handleCloseTestResults()}\r\n      ></AddTestResultsFileModal>\r\n      <AddCandidateOutSideMinistryModal\r\n        key={\"addOutsideCandidate\"}\r\n        // title={translate(\"Add acceptance test results\")}\r\n        open={openOutsideCandidate}\r\n        handleClose={handleCloseOutsideCandidate}\r\n      ></AddCandidateOutSideMinistryModal>\r\n    </GridContainer>\r\n  );\r\n};\r\n(CandidatesList as any).auth = true;\r\n(CandidatesList as any).layout = Admin;\r\nexport default CandidatesList;\r\n"]},"metadata":{},"sourceType":"module"}