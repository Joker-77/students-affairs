{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from \"react\";\nimport { Box, Button, Dialog, DialogActions, DialogTitle, FormControl, Grid, IconButton, InputLabel, MenuItem, Select, Tab, Tabs, Typography, makeStyles } from \"@material-ui/core\";\nimport { useTranslation } from \"../../../../Utility/Translations/useTranslation\";\nimport styles from \"../../../../assets/jss/nextjs-material-dashboard/views/rtlStyle.js\";\nimport { Close } from \"@material-ui/icons\";\nimport YearsService from \"../../../../Services/SpecYearsService\";\nimport Router from \"next/router\";\nimport StudentsImportService from \"../../../../Services/StudentsImportService\";\nimport { toast } from \"react-toastify\";\n\nfunction TabPanel(props) {\n  var children = props.children,\n      value = props.value,\n      index = props.index,\n      other = _objectWithoutProperties(props, [\"children\", \"value\", \"index\"]);\n\n  return /*#__PURE__*/_jsx(\"div\", _objectSpread(_objectSpread({\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: \"simple-tabpanel-\".concat(index),\n    \"aria-labelledby\": \"simple-tab-\".concat(index)\n  }, other), {}, {\n    children: value === index && /*#__PURE__*/_jsx(Box, {\n      sx: {\n        p: 3\n      },\n      children: /*#__PURE__*/_jsx(Typography, {\n        children: children\n      })\n    })\n  }));\n}\n\nfunction tabProps(index) {\n  return {\n    id: \"simple-tab-\".concat(index),\n    \"aria-controls\": \"simple-tabpanel-\".concat(index)\n  };\n}\n\nvar InitPlanTabs = function InitPlanTabs(_ref) {\n  var latestYear = _ref.latestYear,\n      message = _ref.message,\n      specialties = _ref.specialties,\n      initYears = _ref.initYears;\n\n  var _React$useState = React.useState(0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      value = _React$useState2[0],\n      setValue = _React$useState2[1];\n\n  var _useTranslation = useTranslation(),\n      translate = _useTranslation.translate;\n\n  var useStyles = makeStyles(styles);\n  var classes = useStyles();\n\n  var handleChange = function handleChange(event, newValue) {\n    setValue(newValue);\n  };\n\n  var _useState = useState(null),\n      year = _useState[0],\n      setYear = _useState[1];\n\n  var _useState2 = useState(1),\n      speciality = _useState2[0],\n      setSpeciality = _useState2[1];\n\n  var _useState3 = useState(false),\n      openConfirmDialog = _useState3[0],\n      setOpenConfirmDialog = _useState3[1];\n\n  var _useState4 = useState(initYears),\n      years = _useState4[0],\n      setYears = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      studetnsMsg = _useState5[0],\n      setStudentMsg = _useState5[1];\n\n  var _useState6 = useState(false),\n      disabled = _useState6[0],\n      setDisabled = _useState6[1];\n\n  var handleChangeEduYear = function handleChangeEduYear(event) {\n    setYear(event.target.value);\n  };\n\n  var handleChangeSpec = function handleChangeSpec(event) {\n    var _event$target$value;\n\n    var _val = (_event$target$value = event.target.value) !== null && _event$target$value !== void 0 ? _event$target$value : \"\";\n\n    if (_val) {\n      setDisabled(true);\n      setSpeciality(event.target.value);\n      YearsService.GetWhereSpeciality(_val).then(function (response) {\n        var _response$result;\n\n        var res = (_response$result = response.result) === null || _response$result === void 0 ? void 0 : _response$result.map(function (data) {\n          return {\n            id: data.id,\n            en_name: data.en_name,\n            ar_name: data.ar_name,\n            code: data.code\n          };\n        });\n        console.clear();\n        console.log(res);\n        setYears(res);\n        if (res.length > 0) setYear(res[0].id);else setYear(undefined);\n        setDisabled(false);\n      }).catch(function (error) {});\n    }\n  };\n\n  var handleConfirm = function handleConfirm() {\n    setOpenConfirmDialog(true);\n  };\n\n  var handleConfirmDialog = function handleConfirmDialog() {\n    var _payload = {\n      edu_year_id: latestYear.id,\n      year_id: year\n    };\n    StudentsImportService.Import(_payload).then(function (result) {\n      if (result.success) {\n        toast.success(translate(\"Students Imported Successfully\"));\n        setOpenConfirmDialog(false);\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  var handleSpecifyCourses = function handleSpecifyCourses(e) {\n    e.preventDefault();\n    Router.push({\n      pathname: \"/students_affairs/affairs_officer/initialize-year/specify-courses\",\n      query: {\n        year: latestYear.id,\n        eduYear: latestYear.year\n      }\n    });\n  };\n\n  var handleAssignTeachers = function handleAssignTeachers(e) {\n    e.preventDefault();\n    Router.push({\n      pathname: \"/students_affairs/affairs_officer/initialize-year/assign-teachers\",\n      query: {\n        year: latestYear.id,\n        eduYear: latestYear.year\n      }\n    });\n  };\n\n  var ConfirmDialog = function ConfirmDialog(_ref2) {\n    var show = _ref2.show,\n        handleConfirmDialog = _ref2.handleConfirmDialog,\n        handleClose = _ref2.handleClose,\n        studentsMsg = _ref2.studentsMsg;\n    return /*#__PURE__*/_jsxs(Dialog, {\n      open: show,\n      maxWidth: \"sm\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsx(DialogTitle, {\n        children: /*#__PURE__*/_jsxs(Typography, {\n          children: [\"\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0627\\u0644\\u0637\\u0644\\u0627\\u0628 \", studentsMsg]\n        })\n      }), /*#__PURE__*/_jsx(Box, {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        children: /*#__PURE__*/_jsx(IconButton, {\n          onClick: function onClick() {\n            return handleClose(false);\n          },\n          children: /*#__PURE__*/_jsx(Close, {})\n        })\n      }), /*#__PURE__*/_jsxs(DialogActions, {\n        children: [/*#__PURE__*/_jsx(Button, {\n          onClick: function onClick() {\n            return handleClose(false);\n          },\n          color: \"secondary\",\n          variant: \"contained\",\n          children: translate(\"Cancel\")\n        }), /*#__PURE__*/_jsx(Button, {\n          onClick: handleConfirmDialog,\n          color: \"primary\",\n          variant: \"contained\",\n          children: translate(\"Confirm\")\n        })]\n      })]\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(Grid, {\n    container: true,\n    sx: {\n      width: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsx(Grid, {\n      item: true,\n      style: {\n        margin: \"0 0 1em 0\"\n      },\n      md: 12,\n      className: classes.typography,\n      children: /*#__PURE__*/_jsx(Typography, {\n        variant: \"h5\",\n        component: \"div\",\n        children: message\n      })\n    }), /*#__PURE__*/_jsx(Grid, {\n      item: true,\n      md: 12,\n      style: {\n        borderBottom: 1,\n        borderColor: \"divider\"\n      },\n      children: /*#__PURE__*/_jsxs(Tabs, {\n        value: value,\n        onChange: handleChange,\n        \"aria-label\": \"basic tabs example\",\n        children: [/*#__PURE__*/_jsx(Tab, _objectSpread({\n          label: \"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0627\\u0644\\u0637\\u0644\\u0627\\u0628\"\n        }, tabProps(0))), /*#__PURE__*/_jsx(Tab, _objectSpread({\n          label: \"\\u0627\\u0644\\u062E\\u0637\\u0651\\u0629 \\u0627\\u0644\\u062F\\u0631\\u0633\\u064A\\u0629\"\n        }, tabProps(1)))]\n      })\n    }), /*#__PURE__*/_jsxs(Grid, {\n      item: true,\n      md: 12,\n      children: [/*#__PURE__*/_jsxs(TabPanel, {\n        value: value,\n        index: 0,\n        children: [/*#__PURE__*/_jsxs(Grid, {\n          container: true,\n          spacing: 2,\n          children: [/*#__PURE__*/_jsx(Grid, {\n            item: true,\n            md: 4,\n            children: /*#__PURE__*/_jsxs(FormControl, {\n              fullWidth: true,\n              variant: \"filled\",\n              children: [/*#__PURE__*/_jsx(InputLabel, {\n                id: \"demo-simple-select-label\",\n                children: \"\\u0627\\u0644\\u0627\\u062E\\u062A\\u0635\\u0627\\u0635\"\n              }), /*#__PURE__*/_jsx(Select, {\n                labelId: \"demo-simple-select-label\",\n                id: \"demo-simple-select\",\n                value: speciality,\n                label: \"speciality\",\n                onChange: handleChangeSpec,\n                children: specialties.map(function (special) {\n                  return /*#__PURE__*/_jsx(MenuItem, {\n                    value: special.id,\n                    children: special.ar_name\n                  }, special.id);\n                })\n              })]\n            })\n          }), /*#__PURE__*/_jsx(Grid, {\n            item: true,\n            md: 4,\n            children: /*#__PURE__*/_jsxs(FormControl, {\n              variant: \"filled\",\n              fullWidth: true,\n              children: [/*#__PURE__*/_jsx(InputLabel, {\n                id: \"demo-simple-select-label\",\n                children: \"\\u0627\\u0644\\u0633\\u0646\\u0629 \\u0627\\u0644\\u062F\\u0631\\u0627\\u0633\\u064A\\u0629\"\n              }), /*#__PURE__*/_jsx(Select, {\n                disabled: disabled,\n                labelId: \"demo-simple-select-label\",\n                id: \"demo-simple-select\",\n                value: year,\n                label: \"Age\",\n                onChange: handleChangeEduYear,\n                children: years.map(function (year) {\n                  return /*#__PURE__*/_jsx(MenuItem, {\n                    value: year.id,\n                    children: year.ar_name\n                  }, year.id);\n                })\n              })]\n            })\n          }), /*#__PURE__*/_jsx(Grid, {\n            item: true,\n            md: 12,\n            children: /*#__PURE__*/_jsx(Button, {\n              type: \"submit\",\n              style: {\n                margin: \"2em 5px\",\n                width: \"20%\"\n              },\n              variant: \"contained\",\n              className: classes.submitBtn,\n              onClick: handleConfirm,\n              children: /*#__PURE__*/_jsx(\"span\", {\n                style: {\n                  padding: \"0px 0px 0px 10px\"\n                },\n                children: translate(\"Confirm\")\n              })\n            })\n          })]\n        }), /*#__PURE__*/_jsx(ConfirmDialog, {\n          show: openConfirmDialog,\n          handleClose: setOpenConfirmDialog,\n          handleConfirmDialog: handleConfirmDialog,\n          studentsMsg: \"\"\n        })]\n      }), /*#__PURE__*/_jsx(TabPanel, {\n        value: value,\n        index: 1,\n        children: /*#__PURE__*/_jsx(Grid, {\n          container: true,\n          spacing: 2,\n          children: /*#__PURE__*/_jsxs(Grid, {\n            item: true,\n            md: 12,\n            children: [/*#__PURE__*/_jsx(Button, {\n              type: \"submit\",\n              style: {\n                margin: \"2em 5px\",\n                width: \"20%\"\n              },\n              variant: \"contained\",\n              className: classes.submitBtn,\n              onClick: handleSpecifyCourses,\n              children: /*#__PURE__*/_jsx(\"span\", {\n                style: {\n                  padding: \"0px 0px 0px 10px\"\n                },\n                children: translate(\"Specify Courses\")\n              })\n            }), /*#__PURE__*/_jsx(Button, {\n              type: \"submit\",\n              style: {\n                margin: \"2em 5px\",\n                width: \"20%\"\n              },\n              variant: \"contained\",\n              className: classes.submitBtn,\n              onClick: handleAssignTeachers,\n              children: /*#__PURE__*/_jsx(\"span\", {\n                style: {\n                  padding: \"0px 0px 0px 10px\"\n                },\n                children: translate(\"Assign Teachers\")\n              })\n            })]\n          })\n        })\n      })]\n    })]\n  });\n};\n\nexport default InitPlanTabs;","map":null,"metadata":{},"sourceType":"module"}