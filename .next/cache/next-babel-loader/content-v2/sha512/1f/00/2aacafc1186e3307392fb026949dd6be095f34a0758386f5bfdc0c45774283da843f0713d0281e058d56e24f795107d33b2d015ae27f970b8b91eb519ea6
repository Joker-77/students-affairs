{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport Admin from \"../../../../layouts/Admin\";\nimport styles from \"../../../../assets/jss/nextjs-material-dashboard/views/rtlStyle.js\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useTranslation } from \"../../../../Utility/Translations/useTranslation\";\nimport { connect } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport * as Yup from \"yup\";\nimport { Box, FormControlLabel, Grid, MenuItem, Radio, RadioGroup, TextField, Typography } from \"@material-ui/core\";\nimport Card from \"../../../../components/Card/Card\";\nimport CardHeader from \"../../../../components/Card/CardHeader\";\nimport CardBody from \"../../../../components/Card/CardBody\";\nimport { Form, Formik } from \"formik\";\nimport { acceptPlaces, acceptStatus, registerationClasses } from \"../../../../Static/resources\";\nimport SuiButton from \"../../../../components/SuiButton\";\nimport SpecialityService from \"../../../../Services/SpecialityService\";\nimport RegisterationService from \"../../../../Services/RegisterationService\";\nimport { setCandidate, useAppDispatch } from \"../../../../redux\";\nimport { getCandidateToPrint } from \"../../../../Helpers/candidate-print\";\nimport DesireService from \"../../../../Services/DesireService\";\n\nvar EditRegistration = function EditRegistration(props) {\n  var _candidate$father, _candidate$certificat;\n\n  var useStyles = makeStyles(styles);\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation(),\n      translate = _useTranslation.translate;\n\n  var router = useRouter();\n  var locale = router === null || router === void 0 ? void 0 : router.locale;\n\n  var _useState = useState(props.candidate),\n      candidate = _useState[0],\n      updateCandidate = _useState[1];\n\n  var registeration = (candidate === null || candidate === void 0 ? void 0 : candidate.registerations[0]) || {};\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      disabled = _React$useState2[0],\n      setDisabled = _React$useState2[1];\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      specialities = _React$useState4[0],\n      setSpecialities = _React$useState4[1];\n\n  var formScheme = Yup.object().shape({});\n  /************************** Get Specialities ****************************/\n\n  useEffect(function () {\n    SpecialityService.GetAll().then(function (res) {\n      console.log(\"Speciality\", res);\n      setSpecialities(res.result);\n    }).catch(function (error) {\n      console.error(\"error\", error);\n    });\n  }, []);\n  /************************** Finish Data ****************************/\n\n  var submitForm = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values, setSubmitting) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setSubmitting(true);\n              console.log(\"values\", values);\n              RegisterationService.Edit(_objectSpread(_objectSpread({}, values), {}, {\n                id: registeration === null || registeration === void 0 ? void 0 : registeration.id\n              })).then(function (res) {\n                console.log(\"Registeration\", res);\n                router.back();\n              }).catch(function (error) {\n                console.error(\"error\", error);\n              }).finally(function () {\n                setSubmitting(false);\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function submitForm(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  /************************** Data ****************************/\n\n\n  useEffect(function () {\n    DesireService.GetAll(candidate === null || candidate === void 0 ? void 0 : candidate.id).then(function (res) {\n      console.log(\"Desire\", res);\n      updateCandidate(_objectSpread(_objectSpread({}, candidate), {}, {\n        desires: res.result.map(function (item) {\n          return _objectSpread(_objectSpread({}, item.speciality), {}, {\n            id: item.speciality_id.toString()\n          });\n        })\n      }));\n    }).catch(function (error) {\n      console.error(\"error\", error);\n    });\n  }, []);\n  /************************** Finish Data ****************************/\n\n  var dispatch = useAppDispatch();\n\n  var goToPrint = function goToPrint(docType) {\n    dispatch(setCandidate(candidate));\n    var printWindow = window.open('', '_blank');\n    console.clear();\n    console.log(candidate);\n    printWindow.document.write(getCandidateToPrint(candidate, docType));\n    setTimeout(function () {\n      return printWindow.print();\n    }, 1000);\n  };\n\n  return /*#__PURE__*/_jsxs(Box, {\n    children: [/*#__PURE__*/_jsx(SuiButton, {\n      style: {\n        margin: 5\n      },\n      onClick: function onClick() {\n        return goToPrint(2);\n      } // remove a friend from the list\n      ,\n      children: \"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u0627\\u0633\\u062A\\u0645\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0642\\u0628\\u0648\\u0644\"\n    }), /*#__PURE__*/_jsx(SuiButton, {\n      style: {\n        margin: 5\n      },\n      onClick: function onClick() {\n        return goToPrint(3);\n      } // remove a friend from the list\n      ,\n      children: \"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u0627\\u0644\\u0627\\u0633\\u062A\\u0645\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A\\u0629\"\n    }), /*#__PURE__*/_jsxs(Card, {\n      children: [/*#__PURE__*/_jsx(CardHeader, {\n        children: /*#__PURE__*/_jsxs(\"h4\", {\n          style: {\n            fontWeight: \"bold\",\n            color: \"#01579b\"\n          },\n          children: [translate(\"Edit Registration\"), \" \"]\n        })\n      }), /*#__PURE__*/_jsxs(CardBody, {\n        children: [/*#__PURE__*/_jsxs(Grid, {\n          container: true,\n          spacing: 2,\n          children: [/*#__PURE__*/_jsx(Grid, {\n            item: true,\n            md: 4,\n            children: /*#__PURE__*/_jsxs(Box, {\n              mb: 2,\n              children: [/*#__PURE__*/_jsx(Box, {\n                mb: 1,\n                ml: 0.5,\n                children: /*#__PURE__*/_jsx(Typography, {\n                  component: \"label\",\n                  variant: \"caption\",\n                  children: translate(\"Name\")\n                })\n              }), /*#__PURE__*/_jsx(TextField, {\n                disabled: true,\n                variant: \"outlined\",\n                size: \"small\",\n                value: \"\".concat(candidate === null || candidate === void 0 ? void 0 : candidate.person.first_name, \" \").concat(candidate === null || candidate === void 0 ? void 0 : (_candidate$father = candidate.father) === null || _candidate$father === void 0 ? void 0 : _candidate$father.first_name, \" \").concat(candidate === null || candidate === void 0 ? void 0 : candidate.person.last_name),\n                fullWidth: true\n              })]\n            })\n          }), /*#__PURE__*/_jsx(Grid, {\n            item: true,\n            md: 4,\n            children: /*#__PURE__*/_jsxs(Box, {\n              mb: 2,\n              children: [/*#__PURE__*/_jsx(Box, {\n                mb: 1,\n                ml: 0.5,\n                children: /*#__PURE__*/_jsx(Typography, {\n                  component: \"label\",\n                  variant: \"caption\",\n                  children: translate(\"Subscription number\")\n                })\n              }), /*#__PURE__*/_jsx(TextField, {\n                disabled: true,\n                variant: \"outlined\",\n                size: \"small\",\n                value: candidate === null || candidate === void 0 ? void 0 : (_candidate$certificat = candidate.certificates[0]) === null || _candidate$certificat === void 0 ? void 0 : _candidate$certificat.subscription_number,\n                fullWidth: true\n              })]\n            })\n          }), /*#__PURE__*/_jsx(Grid, {\n            item: true,\n            md: 4,\n            children: /*#__PURE__*/_jsxs(Box, {\n              mb: 2,\n              children: [/*#__PURE__*/_jsx(Box, {\n                mb: 1,\n                ml: 0.5,\n                children: /*#__PURE__*/_jsx(Typography, {\n                  component: \"label\",\n                  variant: \"caption\",\n                  children: translate(\"Registeration number\")\n                })\n              }), /*#__PURE__*/_jsx(TextField, {\n                disabled: true,\n                variant: \"outlined\",\n                size: \"small\",\n                type: \"number\",\n                value: candidate === null || candidate === void 0 ? void 0 : candidate.registeration_number,\n                fullWidth: true\n              })]\n            })\n          })]\n        }), /*#__PURE__*/_jsx(Formik, {\n          initialValues: registeration,\n          validationSchema: formScheme,\n          onSubmit: function onSubmit(values, _ref2) {\n            var setSubmitting = _ref2.setSubmitting;\n            submitForm(values, setSubmitting);\n          },\n          children: function children(formik) {\n            var values = formik.values,\n                handleChange = formik.handleChange,\n                handleSubmit = formik.handleSubmit,\n                errors = formik.errors,\n                touched = formik.touched,\n                handleBlur = formik.handleBlur,\n                isSubmitting = formik.isSubmitting,\n                isValid = formik.isValid,\n                dirty = formik.dirty;\n            return /*#__PURE__*/_jsxs(Form, {\n              children: [/*#__PURE__*/_jsxs(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 4,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"Mark from 2400\")\n                      })\n                    }), /*#__PURE__*/_jsx(TextField, {\n                      disabled: disabled,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"number\",\n                      min: 0,\n                      id: \"mark\",\n                      name: \"mark\",\n                      value: values.mark,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.mark && errors.mark),\n                      helperText: touched.mark && errors.mark,\n                      placeholder: translate(\"Mark from 2400\"),\n                      fullWidth: true\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 4,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: \"\".concat(translate(\"Acceptance Test\"), \" \").concat(translate(\"Math\"))\n                      })\n                    }), /*#__PURE__*/_jsx(TextField, {\n                      disabled: disabled,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"number\",\n                      min: 0,\n                      id: \"math\",\n                      name: \"math\",\n                      value: values.math,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.math && errors.math),\n                      helperText: touched.math && errors.math,\n                      placeholder: \"\".concat(translate(\"Acceptance Test\"), \" \").concat(translate(\"Math\")),\n                      fullWidth: true\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 4,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: \"\".concat(translate(\"Acceptance Test\"), \" \").concat(translate(\"Physics\"))\n                      })\n                    }), /*#__PURE__*/_jsx(TextField, {\n                      disabled: disabled,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"number\",\n                      min: 0,\n                      id: \"physics\",\n                      name: \"physics\",\n                      value: values.physics,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.physics && errors.physics),\n                      helperText: touched.physics && errors.physics,\n                      placeholder: \"\".concat(translate(\"Acceptance Test\"), \" \").concat(translate(\"Physics\")),\n                      fullWidth: true\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 4,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"Mark from 3400\")\n                      })\n                    }), /*#__PURE__*/_jsx(TextField, {\n                      disabled: disabled,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"number\",\n                      min: 0,\n                      id: \"mark_3400\",\n                      name: \"mark_3400\",\n                      value: values.mark_3400,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.mark_3400 && errors.mark_3400),\n                      helperText: touched.mark_3400 && errors.mark_3400,\n                      placeholder: translate(\"Mark from 3400\"),\n                      fullWidth: true\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 4,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"Mark from 3600\")\n                      })\n                    }), /*#__PURE__*/_jsx(TextField, {\n                      disabled: disabled,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"number\",\n                      min: 0,\n                      id: \"mark_3600\",\n                      name: \"mark_3600\",\n                      value: values.mark_3600,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.mark_3600 && errors.mark_3600),\n                      helperText: touched.mark_3600 && errors.mark_3600,\n                      placeholder: translate(\"Mark from 3600\"),\n                      fullWidth: true\n                    })]\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 3,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"Acceptance Status\")\n                      })\n                    }), /*#__PURE__*/_jsx(RadioGroup, {\n                      id: 'status',\n                      name: 'status',\n                      value: values === null || values === void 0 ? void 0 : values.status,\n                      onChange: handleChange,\n                      defaultValue: acceptStatus(translate)[0],\n                      children: acceptStatus(translate).map(function (place) {\n                        return /*#__PURE__*/_jsx(FormControlLabel, {\n                          value: place,\n                          control: /*#__PURE__*/_jsx(Radio, {}),\n                          label: place\n                        });\n                      })\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 3,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"Acceptance Class\")\n                      })\n                    }), /*#__PURE__*/_jsx(RadioGroup, {\n                      id: 'class',\n                      name: 'class',\n                      value: values === null || values === void 0 ? void 0 : values.class,\n                      onChange: handleChange,\n                      defaultValue: registerationClasses(translate)[0],\n                      children: registerationClasses(translate).map(function (place) {\n                        return /*#__PURE__*/_jsx(FormControlLabel, {\n                          value: place,\n                          control: /*#__PURE__*/_jsx(Radio, {}),\n                          label: place\n                        });\n                      })\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 3,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"Acceptance Place\")\n                      })\n                    }), /*#__PURE__*/_jsx(RadioGroup, {\n                      id: 'accept_place',\n                      name: 'accept_place',\n                      value: values === null || values === void 0 ? void 0 : values.accept_place,\n                      onChange: handleChange,\n                      defaultValue: acceptPlaces(translate)[0],\n                      children: acceptPlaces(translate).map(function (place) {\n                        return /*#__PURE__*/_jsx(FormControlLabel, {\n                          value: place,\n                          control: /*#__PURE__*/_jsx(Radio, {}),\n                          label: place\n                        });\n                      })\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 3,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"Acceptance Speciality\")\n                      })\n                    }), /*#__PURE__*/_jsx(TextField, {\n                      disabled: disabled,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"select\",\n                      id: \"speciality_id\",\n                      name: \"speciality_id\",\n                      select: true,\n                      value: values.speciality_id,\n                      onChange: handleChange(\"speciality_id\"),\n                      onBlur: handleBlur,\n                      placeholder: translate(\"Acceptance Speciality\"),\n                      fullWidth: true,\n                      children: specialities.filter(function (item) {\n                        return (values === null || values === void 0 ? void 0 : values.accept_place) === translate('Aleppo') ? item.ar_name === 'هندسة طيران' : item.ar_name !== 'هندسة طيران';\n                      }).map(function (speciality) {\n                        return /*#__PURE__*/_jsx(MenuItem, {\n                          value: speciality.id,\n                          children: locale === 'ar' ? speciality.ar_name : speciality.en_name\n                        }, speciality.id);\n                      })\n                    })]\n                  })\n                }), values.status === translate('Waiting') && /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  md: 3,\n                  children: /*#__PURE__*/_jsxs(Box, {\n                    mb: 2,\n                    children: [/*#__PURE__*/_jsx(Box, {\n                      mb: 1,\n                      ml: 0.5,\n                      children: /*#__PURE__*/_jsx(Typography, {\n                        component: \"label\",\n                        variant: \"caption\",\n                        children: translate(\"Waiting number\")\n                      })\n                    }), /*#__PURE__*/_jsx(TextField, {\n                      disabled: disabled,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"number\",\n                      min: 0,\n                      id: \"backup_no\",\n                      name: \"backup_no\",\n                      value: values.backup_no,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.backup_no && errors.backup_no),\n                      helperText: touched.backup_no && errors.backup_no,\n                      placeholder: translate(\"Waiting number\"),\n                      fullWidth: true\n                    })]\n                  })\n                })]\n              }), /*#__PURE__*/_jsx(Box, {\n                mt: 4,\n                mb: 1,\n                children: isSubmitting ? /*#__PURE__*/_jsx(SuiButton, {\n                  disabled: true,\n                  variant: \"gradient\",\n                  color: \"info\",\n                  fullWidth: true,\n                  children: translate('Processing ...')\n                }) : /*#__PURE__*/_jsx(SuiButton, {\n                  disabled: !(dirty && isValid),\n                  type: \"submit\",\n                  variant: \"gradient\",\n                  color: \"info\",\n                  fullWidth: true,\n                  children: translate(\"Save\")\n                })\n              })]\n            });\n          }\n        })]\n      })]\n    })]\n  });\n};\n\nEditRegistration.layout = Admin;\nEditRegistration.auth = false;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  console.log('state', state);\n  return {\n    candidate: state.baseReducer.candidate\n  };\n};\n\nexport default connect(mapStateToProps, null)(EditRegistration);","map":null,"metadata":{},"sourceType":"module"}