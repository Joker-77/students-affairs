{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from \"react\";\nimport Admin from \"../../../layouts/Admin\";\nimport GridContainer from \"../../../components/Grid/GridContainer.js\";\nimport GridItem from \"../../../components/Grid/GridItem.js\";\nimport Card from \"../../../components/Card/Card.js\";\nimport CardHeader from \"../../../components/Card/CardHeader.js\";\nimport CardBody from \"../../../components/Card/CardBody.js\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport styles from \"../../../assets/jss/nextjs-material-dashboard/views/rtlStyle.js\";\nimport { TextField, Button, Grid } from \"@material-ui/core\";\nimport Privilege from \"../../../components/Privilege/Privilege\";\nimport { DragDropContext, Droppable, Draggable, resetServerContext } from \"react-beautiful-dnd\";\n\nfunction UsersManagement() {\n  resetServerContext();\n  const useStyles = makeStyles(styles);\n  const classes = useStyles();\n  let sysOpts = [{\n    id: \"1\",\n    name: \"Accepted Students\",\n    permissions: [{\n      id: 1,\n      name: \"Read Only\"\n    }, {\n      id: 2,\n      name: \"Write & Read\"\n    }],\n    selectedPermission: 1\n  }, {\n    id: \"2\",\n    name: \"Another One\",\n    permissions: [{\n      id: 1,\n      name: \"Read Only\"\n    }, {\n      id: 2,\n      name: \"Write & Read\"\n    }],\n    selectedPermission: 1\n  }, {\n    id: \"3\",\n    name: \"Another One 1\",\n    permissions: [{\n      id: 1,\n      name: \"Read Only\"\n    }, {\n      id: 2,\n      name: \"Write & Read\"\n    }],\n    selectedPermission: 1\n  }];\n  const privilegeStatus = {\n    system: {\n      type: 1,\n      name: \"System Permissions\",\n      items: sysOpts\n    },\n    user: {\n      type: 2,\n      name: \"User Permissions\",\n      items: []\n    }\n  };\n\n  const changePermissionType = (id, val, type) => {\n    let _item = columns.system.items.find(e => e.id == id.toString());\n\n    if (!!_item) {\n      let _sysOpts = columns.system;\n      _item = _sysOpts.items.find(e => e.id == id.toString());\n\n      let itemIndex = _sysOpts.items.indexOf(_item);\n\n      console.log(itemIndex, _item);\n      _item.selectedPermission = parseInt(val);\n      _sysOpts.items[itemIndex] = _item;\n      console.log(\"result\", {\n        [\"system\"]: _sysOpts,\n        [\"user\"]: columns.user\n      });\n      setColumns({\n        [\"system\"]: _sysOpts,\n        [\"user\"]: columns.user\n      });\n    } else {\n      let item = columns.user.items.find(e => e.id == id.toString());\n      let _userPrivlgs = columns.user;\n\n      let itemIndex = _userPrivlgs.items.indexOf(item);\n\n      item.selectedPermission = parseInt(val);\n      _userPrivlgs.items[itemIndex] = item;\n      console.log(\"result\", {\n        [\"system\"]: columns.system,\n        [\"user\"]: _userPrivlgs\n      });\n      setColumns({\n        [\"system\"]: columns.system,\n        [\"user\"]: _userPrivlgs\n      });\n    }\n  };\n\n  const onDragEnd = (result, columns, setColumns) => {\n    console.log(result, columns);\n    if (!result.destination) return;\n    const {\n      source,\n      destination\n    } = result;\n\n    if (source.droppableId !== destination.droppableId) {\n      const sourceColumn = columns[source.droppableId];\n      const destColumn = columns[destination.droppableId];\n      const sourceItems = [...sourceColumn.items];\n      const destItems = [...destColumn.items];\n      const [removed] = sourceItems.splice(source.index, 1);\n      destItems.splice(destination.index, 0, removed);\n      setColumns(_objectSpread(_objectSpread({}, columns), {}, {\n        [source.droppableId]: _objectSpread(_objectSpread({}, sourceColumn), {}, {\n          items: sourceItems\n        }),\n        [destination.droppableId]: _objectSpread(_objectSpread({}, destColumn), {}, {\n          items: destItems\n        })\n      }));\n    } else {\n      const column = columns[source.droppableId];\n      const copiedItems = [...column.items];\n      const [removed] = copiedItems.splice(source.index, 1);\n      copiedItems.splice(destination.index, 0, removed);\n      setColumns(_objectSpread(_objectSpread({}, columns), {}, {\n        [source.droppableId]: _objectSpread(_objectSpread({}, column), {}, {\n          items: copiedItems\n        })\n      }));\n    }\n  };\n\n  const {\n    0: columns,\n    1: setColumns\n  } = useState(privilegeStatus);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(GridContainer, {\n      children: /*#__PURE__*/_jsx(GridItem, {\n        xs: 12,\n        sm: 12,\n        md: 12,\n        children: /*#__PURE__*/_jsxs(Card, {\n          children: [/*#__PURE__*/_jsx(CardHeader, {\n            color: \"primary\",\n            children: /*#__PURE__*/_jsx(\"h4\", {\n              className: classes.cardTitleWhite,\n              children: \"Users Definitions\"\n            })\n          }), /*#__PURE__*/_jsx(CardBody, {\n            children: /*#__PURE__*/_jsxs(GridContainer, {\n              children: [/*#__PURE__*/_jsx(GridItem, {\n                xs: 12,\n                sm: 12,\n                md: 3,\n                children: /*#__PURE__*/_jsx(TextField //onChange={handleChange}\n                , {\n                  required: true,\n                  label: \"Username\",\n                  variant: \"standard\",\n                  size: \"small\",\n                  type: \"email\",\n                  id: \"email\",\n                  name: \"email\",\n                  className: classes.textField //   value={values.email}\n                  //   onBlur={handleBlur}\n                  //   error={Boolean(touched.email && errors.email)}\n                  //   helperText={touched.email && errors.email}\n                  //   placeholder=\"example@hiast.edu.sy\"\n                  //   fullWidth\n\n                })\n              }), /*#__PURE__*/_jsx(GridItem, {\n                xs: 12,\n                sm: 12,\n                md: 3,\n                children: /*#__PURE__*/_jsx(TextField //onChange={handleChange}\n                , {\n                  required: true,\n                  label: \"Password\",\n                  variant: \"standard\",\n                  size: \"small\",\n                  type: \"password\",\n                  id: \"password\",\n                  name: \"password\",\n                  className: classes.textField //   value={values.email}\n                  //   onBlur={handleBlur}\n                  //   error={Boolean(touched.email && errors.email)}\n                  //   helperText={touched.email && errors.email}\n                  //   placeholder=\"example@hiast.edu.sy\"\n                  //   fullWidth\n\n                })\n              }), /*#__PURE__*/_jsx(GridItem, {\n                xs: 12,\n                sm: 12,\n                md: 3,\n                children: /*#__PURE__*/_jsx(TextField //onChange={handleChange}\n                , {\n                  required: true,\n                  label: \"Confirm Password\",\n                  variant: \"standard\",\n                  size: \"small\",\n                  type: \"password\",\n                  id: \"confirm-password\",\n                  name: \"confirmPassword\",\n                  className: classes.textField //   value={values.email}\n                  //   onBlur={handleBlur}\n                  //   error={Boolean(touched.email && errors.email)}\n                  //   helperText={touched.email && errors.email}\n                  //   placeholder=\"example@hiast.edu.sy\"\n                  //   fullWidth\n\n                })\n              }), /*#__PURE__*/_jsx(GridItem, {\n                xs: 12,\n                sm: 12,\n                md: 2,\n                style: {\n                  marginTop: \".5em\"\n                },\n                children: /*#__PURE__*/_jsx(Button, {\n                  disabled: false,\n                  variant: \"contained\",\n                  className: classes.submitBtn,\n                  fullWidth: true,\n                  children: \"Submit\"\n                })\n              })]\n            })\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(DragDropContext, {\n      onDragEnd: result => onDragEnd(result, columns, setColumns),\n      children: /*#__PURE__*/_jsx(Grid, {\n        container: true,\n        xs: 12,\n        md: 12,\n        sm: 12,\n        children: Object.entries(columns).map(([columnId, column], index) => {\n          console.log(\"idddd\", columnId);\n          return /*#__PURE__*/_jsx(Grid, {\n            md: 6,\n            xs: 12,\n            sm: 12,\n            style: {\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"center\"\n            },\n            children: /*#__PURE__*/_jsxs(Card, {\n              children: [/*#__PURE__*/_jsx(CardHeader, {\n                color: \"primary\",\n                children: /*#__PURE__*/_jsx(\"h4\", {\n                  className: classes.cardTitleWhite,\n                  children: column.name\n                })\n              }), /*#__PURE__*/_jsxs(CardBody, {\n                children: [/*#__PURE__*/_jsxs(Grid, {\n                  container: true,\n                  md: 12,\n                  children: [/*#__PURE__*/_jsx(Grid, {\n                    md: 8,\n                    children: \"System Options\"\n                  }), /*#__PURE__*/_jsx(Grid, {\n                    md: 4,\n                    children: \"Permission Type\"\n                  })]\n                }), /*#__PURE__*/_jsx(Droppable, {\n                  droppableId: columnId,\n                  children: (provided, snapshot) => {\n                    return /*#__PURE__*/_jsxs(Grid, _objectSpread(_objectSpread({\n                      md: 12,\n                      container: true\n                    }, provided.droppableProps), {}, {\n                      ref: provided.innerRef,\n                      style: {\n                        background: snapshot.isDraggingOver ? \"lightblue\" : \"lightgrey\",\n                        padding: 4\n                      },\n                      children: [column.items.map((item, index) => {\n                        return /*#__PURE__*/_jsx(Draggable, {\n                          draggableId: item.id,\n                          index: index,\n                          children: (provided, snapshot) => {\n                            return /*#__PURE__*/_jsx(Grid, _objectSpread(_objectSpread(_objectSpread({\n                              md: 12,\n                              ref: provided.innerRef\n                            }, provided.draggableProps), provided.dragHandleProps), {}, {\n                              style: _objectSpread({\n                                userSelect: \"none\",\n                                margin: \"3px 0 3px 0\",\n                                borderRadius: \"12px\",\n                                backgroundColor: snapshot.isDragging ? \"#263B4A\" : \"#456C86\",\n                                color: \"white\"\n                              }, provided.draggableProps.style),\n                              children: /*#__PURE__*/_jsx(Privilege, {\n                                id: item.id,\n                                index: index,\n                                name: item.name,\n                                permissions: item.permissions,\n                                selectedPermission: item.selectedPermission,\n                                type: column.type,\n                                changePermissionType: changePermissionType\n                              }, item.id)\n                            }));\n                          }\n                        }, item.id);\n                      }), provided.placeholder]\n                    }));\n                  }\n                }, columnId)]\n              })]\n            })\n          }, columnId);\n        })\n      })\n    })]\n  });\n}\n\nUsersManagement.layout = Admin;\nUsersManagement.auth = false;\nexport default UsersManagement;","map":null,"metadata":{},"sourceType":"module"}