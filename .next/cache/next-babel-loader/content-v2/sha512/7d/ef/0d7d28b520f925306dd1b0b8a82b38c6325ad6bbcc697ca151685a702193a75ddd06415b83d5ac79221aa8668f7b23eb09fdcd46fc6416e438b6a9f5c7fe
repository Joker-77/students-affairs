{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useState } from \"react\";\nimport Admin from \"../../../../layouts/Admin\";\nimport { useTranslation } from \"../../../../Utility/Translations/useTranslation\";\nimport * as yup from \"yup\";\nimport { Form, Formik } from \"formik\";\nimport SuiButton from \"../../../../components/SuiButton\";\nimport { toast } from \"react-toastify\";\nimport ObserverService from \"../../../../Services/ObserverService\";\nimport { useRouter } from \"next/router\";\nimport { ArrowBack } from \"@material-ui/icons\";\nimport Card from \"../../../../components/Card/Card\";\nimport { Box, CardActions, Divider, Grid, MenuItem, TextField, Typography, FormControlLabel, Checkbox } from \"@material-ui/core\";\nimport GridItem from \"../../../../components/Grid/GridItem\";\nimport { statuses } from \"../../../../Static/resources\";\n\nvar ObserverDetail = function ObserverDetail(_ref) {\n  var isCreate = _ref.isCreate,\n      details = _ref.details,\n      isEditable = _ref.isEditable,\n      setShow = _ref.setShow,\n      activateEdit = _ref.activateEdit,\n      levels = _ref.levels,\n      activities = _ref.activities;\n\n  var _useTranslation = useTranslation(),\n      translate = _useTranslation.translate;\n\n  var router = useRouter();\n\n  var _useState = useState(details),\n      observer = _useState[0],\n      setDetails = _useState[1];\n\n  var observerSchema = //isCreate ?\n  yup.object({\n    first_name: yup.string(translate(\"First name\")).required(translate(\"Field is required\")),\n    last_name: yup.string(translate(\"Last name\")).required(translate(\"Field is required\")),\n    number: yup.number(translate(\"ID Number\")).required(translate(\"Field is required\")),\n    //bulding: yup\n    //.string(translate(\"Building\")),\n    //.required(translate(\"Field is required\")),\n    level_id: yup.number(translate(\"Functional Body\")).required(translate(\"Field is required\")),\n    nick_name: yup.string(translate(\"Title\")).required(translate(\"Field is required\")),\n    activity_id: yup.number(translate(\"Activity\")).required(translate(\"Field is required\")),\n    office_number: yup.number(translate(\"Office number\")).required(translate(\"Field is required\")),\n    mobile_number: yup.number(translate(\"Mobile\")).required(translate(\"Field is required\")),\n    excluded: yup.boolean(translate(\"Excluded\")).required(translate(\"Field is required\")),\n    status: yup.string(translate(\"Status\")),\n    //.required(translate(\"Field is required\")),\n    printing_name: yup.string(translate(\"Printing name\")).required(translate(\"Field is required\"))\n  });\n  var initialValues = //isCreate ?\n  {\n    first_name: observer === null || observer === void 0 ? void 0 : observer.first_name,\n    last_name: observer === null || observer === void 0 ? void 0 : observer.last_name,\n    number: observer === null || observer === void 0 ? void 0 : observer.number,\n    //bulding: observer?.bulding,\n    level_id: observer === null || observer === void 0 ? void 0 : observer.level_id,\n    activity_id: observer === null || observer === void 0 ? void 0 : observer.activity_id,\n    office_number: observer === null || observer === void 0 ? void 0 : observer.office_number,\n    mobile_number: observer === null || observer === void 0 ? void 0 : observer.mobile_number,\n    excluded: observer ? observer.excluded : 0,\n    status: observer === null || observer === void 0 ? void 0 : observer.status,\n    nick_name: observer === null || observer === void 0 ? void 0 : observer.nick_name,\n    printing_name: observer === null || observer === void 0 ? void 0 : observer.printing_name\n  };\n  /************************* Handle Edit Observer ************/\n\n  var handleEditObserver = function handleEditObserver(event) {\n    event.preventDefault();\n    activateEdit();\n  };\n  /*************** Handle End Add Description For Observer ******/\n\n\n  var submitForm = function submitForm(values, setSubmitting) {\n    if (isCreate) {\n      var payload = {\n        first_name: values.first_name,\n        last_name: values.last_name,\n        number: values.number,\n        //bulding: values.bulding,\n        level_id: values.level_id,\n        activity_id: values.activity_id,\n        office_number: values.office_number,\n        mobile_number: values.mobile_number,\n        excluded: values.excluded,\n        status: values.status,\n        nick_name: values.nick_name,\n        printing_name: values.printing_name\n      }; //console.clear();\n\n      console.log(payload);\n      ObserverService.Add(payload).then(function (response) {\n        if (response.success) {\n          toast.success(translate(\"Observer Added Successfully\"));\n          setShow();\n        } else {\n          console.log(response.error);\n          toast.error(response.error.message);\n        }\n      }).catch(function (error) {\n        console.log(error.message);\n        toast.error(error.message);\n        throw new Error(error);\n      });\n    } else {\n      var _payload = {\n        id: observer.id,\n        first_name: values.first_name,\n        last_name: values.last_name,\n        number: values.number,\n        //bulding: values.bulding,\n        level_id: values.level_id,\n        activity_id: values.activity_id,\n        office_number: values.office_number,\n        mobile_number: values.mobile_number,\n        excluded: values.excluded,\n        status: values.status,\n        nick_name: values.nick_name,\n        printing_name: values.printing_name\n      };\n      console.log(_payload);\n      ObserverService.Edit(_payload).then(function (response) {\n        if (response.success) {\n          toast.success(translate(\"Observer Edited Successfully\"));\n          setShow();\n        } else {\n          console.log(response.error);\n          toast.error(response.error.message);\n        }\n      }).catch(function (error) {\n        console.log(error.message);\n        toast.error(error.message);\n        throw new Error(error);\n      });\n    }\n\n    setSubmitting(false);\n  };\n\n  return /*#__PURE__*/_jsx(Grid, {\n    container: true,\n    md: 12,\n    sm: 12,\n    children: /*#__PURE__*/_jsxs(Grid, {\n      md: 12,\n      sm: 12,\n      xs: 12,\n      children: [/*#__PURE__*/_jsx(Card, {\n        style: {\n          padding: \"1em 4em\",\n          margin: \"5px 0px\"\n        },\n        children: /*#__PURE__*/_jsxs(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsx(GridItem, {\n            item: true,\n            md: 9,\n            xs: 12,\n            sm: 12,\n            children: !isCreate ? /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsxs(Typography, {\n                variant: \"h5\",\n                component: \"div\",\n                children: [translate(\"Observer Name\"), \":\", \" \", \"\".concat(details === null || details === void 0 ? void 0 : details.first_name, \" \").concat(details === null || details === void 0 ? void 0 : details.last_name)]\n              }), /*#__PURE__*/_jsx(Typography, {\n                sx: {\n                  mb: 1.5\n                },\n                color: \"text.secondary\",\n                children: translate(\"Observer Details\")\n              })]\n            }) : /*#__PURE__*/_jsx(Typography, {\n              variant: \"h5\",\n              component: \"div\",\n              children: translate(\"Add New Observer\")\n            })\n          }), /*#__PURE__*/_jsx(GridItem, {\n            md: 3,\n            xs: 12,\n            sm: 12,\n            children: /*#__PURE__*/_jsxs(SuiButton, {\n              onClick: setShow,\n              color: \"warning\",\n              children: [/*#__PURE__*/_jsx(ArrowBack, {}), translate(\"Back To Previous Page\")]\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(Card, {\n        style: {\n          padding: \"3em 3em\",\n          margin: \"5px 0px\"\n        },\n        children: /*#__PURE__*/_jsx(Formik, {\n          enableReinitialize: true,\n          initialValues: initialValues,\n          validationSchema: observerSchema,\n          onSubmit: function onSubmit(values, _ref2) {\n            var setSubmitting = _ref2.setSubmitting;\n            submitForm(values, setSubmitting); // console.clear();\n            // console.log(values);\n          },\n          children: function children(formik) {\n            var values = formik.values,\n                handleChange = formik.handleChange,\n                handleSubmit = formik.handleSubmit,\n                errors = formik.errors,\n                touched = formik.touched,\n                handleBlur = formik.handleBlur,\n                isSubmitting = formik.isSubmitting,\n                isValid = formik.isValid,\n                dirty = formik.dirty,\n                setFieldValue = formik.setFieldValue;\n            return /*#__PURE__*/_jsxs(Form, {\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxs(Grid, {\n                container: true,\n                md: 12,\n                xs: 12,\n                style: {\n                  margin: \"1em 0em\"\n                },\n                children: [/*#__PURE__*/_jsx(Grid, {\n                  container: true,\n                  md: 12,\n                  style: {\n                    margin: \"1em 0em\",\n                    color: \"red\",\n                    display: errors && // ðŸ‘ˆ null and undefined check\n                    Object.keys(errors).length === 0 && Object.getPrototypeOf(errors) === Object.prototype ? \"none\" : \"block\"\n                  },\n                  children: /*#__PURE__*/_jsx(Grid, {\n                    item: true,\n                    xs: 3,\n                    md: 3,\n                    style: {\n                      color: \"red\"\n                    },\n                    children: JSON.stringify(errors)\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 6,\n                  md: 6,\n                  children: /*#__PURE__*/_jsx(GridItem, {\n                    children: /*#__PURE__*/_jsx(TextField, {\n                      disabled: !isEditable,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"text\",\n                      id: \"number\",\n                      name: \"number\",\n                      value: values.number,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.number && errors.number),\n                      helperText: touched.number && errors.number,\n                      placeholder: translate(\"ID Number\"),\n                      label: translate(\"ID Number\"),\n                      fullWidth: true\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 6,\n                  md: 6,\n                  children: /*#__PURE__*/_jsx(GridItem, {\n                    children: /*#__PURE__*/_jsx(TextField, {\n                      disabled: !isEditable,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"text\",\n                      id: \"nick_name\",\n                      name: \"nick_name\",\n                      value: values.nick_name,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.nick_name && errors.nick_name),\n                      helperText: touched.nick_name && errors.nick_name,\n                      placeholder: translate(\"Title\"),\n                      label: translate(\"Title\"),\n                      fullWidth: true\n                    })\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(Grid, {\n                container: true,\n                md: 12,\n                xs: 12,\n                style: {\n                  margin: \"1em 0em\"\n                },\n                children: [/*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 6,\n                  md: 6,\n                  children: /*#__PURE__*/_jsx(GridItem, {\n                    children: /*#__PURE__*/_jsx(TextField, {\n                      disabled: !isEditable,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"text\",\n                      id: \"first_name\",\n                      name: \"first_name\",\n                      value: values.first_name,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.first_name && errors.first_name),\n                      helperText: touched.first_name && errors.first_name,\n                      placeholder: translate(\"First name\"),\n                      label: translate(\"First name\"),\n                      fullWidth: true\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 6,\n                  md: 6,\n                  children: /*#__PURE__*/_jsx(GridItem, {\n                    children: /*#__PURE__*/_jsx(TextField, {\n                      disabled: !isEditable,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"text\",\n                      id: \"last_name\",\n                      name: \"last_name\",\n                      value: values.last_name,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.last_name && errors.last_name),\n                      helperText: touched.last_name && errors.last_name,\n                      placeholder: translate(\"Last name\"),\n                      label: translate(\"Last name\"),\n                      fullWidth: true\n                    })\n                  })\n                })]\n              }),\n              /*#__PURE__*/\n              //isCreate && (\n              _jsxs(Grid, {\n                container: true,\n                md: 12,\n                xs: 12,\n                style: {\n                  margin: \"1em 0em\"\n                },\n                children: [/*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 6,\n                  md: 6,\n                  children: /*#__PURE__*/_jsx(GridItem, {\n                    children: /*#__PURE__*/_jsx(TextField, {\n                      disabled: !isEditable,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"text\",\n                      id: \"printing_name\",\n                      name: \"printing_name\",\n                      value: values.printing_name,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.printing_name && errors.printing_name),\n                      helperText: touched.printing_name && errors.printing_name,\n                      placeholder: translate(\"Printing name\"),\n                      label: translate(\"Printing name\"),\n                      fullWidth: true\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 6,\n                  md: 6,\n                  children: /*#__PURE__*/_jsx(GridItem, {\n                    children: /*#__PURE__*/_jsx(TextField, {\n                      disabled: !isEditable,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"select\",\n                      id: \"level_id\",\n                      name: \"level_id\",\n                      select: true,\n                      value: values.level_id,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.level_id && errors.level_id),\n                      helperText: touched.level_id && errors.level_id,\n                      placeholder: translate(\"Functional Body\"),\n                      label: translate(\"Functional Body\"),\n                      fullWidth: true,\n                      children: levels === null || levels === void 0 ? void 0 : levels.map(function (level) {\n                        return /*#__PURE__*/_jsx(MenuItem, {\n                          value: level.id,\n                          children: level.name\n                        }, level.id);\n                      })\n                    })\n                  })\n                })]\n              }),\n              /*#__PURE__*/\n              //isCreate && (\n              _jsxs(Grid, {\n                container: true,\n                md: 12,\n                xs: 12,\n                style: {\n                  margin: \"1em 0em\"\n                },\n                children: [/*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 6,\n                  md: 6,\n                  children: /*#__PURE__*/_jsx(GridItem, {\n                    children: /*#__PURE__*/_jsx(TextField, {\n                      disabled: !isEditable,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"select\",\n                      id: \"activity_id\",\n                      name: \"activity_id\",\n                      select: true,\n                      value: values.activity_id,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.activity_id && errors.activity_id),\n                      helperText: touched.activity_id && errors.activity_id,\n                      placeholder: translate(\"Activity in HIAST\"),\n                      label: translate(\"Activity in HIAST\"),\n                      fullWidth: true,\n                      children: activities === null || activities === void 0 ? void 0 : activities.map(function (activity) {\n                        return /*#__PURE__*/_jsx(MenuItem, {\n                          value: activity.id,\n                          children: activity.name\n                        }, activity.id);\n                      })\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 6,\n                  md: 6,\n                  children: /*#__PURE__*/_jsx(GridItem, {\n                    children: /*#__PURE__*/_jsx(TextField, {\n                      disabled: !isEditable,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"select\",\n                      id: \"status\",\n                      name: \"status\",\n                      select: true,\n                      value: values.status,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.status && errors.status),\n                      helperText: touched.status && errors.status,\n                      placeholder: translate(\"Status\"),\n                      label: translate(\"Status\"),\n                      fullWidth: true,\n                      children: statuses(translate).map(function (status) {\n                        return /*#__PURE__*/_jsx(MenuItem, {\n                          value: status.id,\n                          children: status.value\n                        }, status.id);\n                      })\n                    })\n                  })\n                })]\n              }) //)\n              ,\n              /*#__PURE__*/\n              //isCreate && (\n              _jsxs(Grid, {\n                container: true,\n                md: 12,\n                xs: 12,\n                style: {\n                  margin: \"1em 0em\"\n                },\n                children: [/*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 6,\n                  md: 6,\n                  children: /*#__PURE__*/_jsx(GridItem, {\n                    children: /*#__PURE__*/_jsx(TextField, {\n                      disabled: !isEditable,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"text\",\n                      id: \"office_number\",\n                      name: \"office_number\",\n                      value: values.office_number,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.office_number && errors.office_number),\n                      helperText: touched.office_number && errors.office_number,\n                      placeholder: translate(\"Office number\"),\n                      label: translate(\"Office number\"),\n                      fullWidth: true\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 6,\n                  md: 6,\n                  children: /*#__PURE__*/_jsx(GridItem, {\n                    children: /*#__PURE__*/_jsx(TextField, {\n                      disabled: !isEditable,\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      size: \"small\",\n                      type: \"text\",\n                      id: \"mobile_number\",\n                      name: \"mobile_number\",\n                      value: values.mobile_number,\n                      onBlur: handleBlur,\n                      error: Boolean(touched.mobile_number && errors.mobile_number),\n                      helperText: touched.mobile_number && errors.mobile_number,\n                      placeholder: translate(\"Mobile\"),\n                      label: translate(\"Mobile\"),\n                      fullWidth: true\n                    })\n                  })\n                })]\n              }) //)\n              ,\n              /*#__PURE__*/\n              //isCreate && (\n              _jsxs(Grid, {\n                container: true,\n                md: 12,\n                xs: 12,\n                style: {\n                  margin: \"1em 0em\"\n                },\n                children: [/*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 6,\n                  md: 6,\n                  children: /*#__PURE__*/_jsx(GridItem, {\n                    children: /*#__PURE__*/_jsx(FormControlLabel, {\n                      label: translate(\"Excluded\"),\n                      onChange: handleChange,\n                      control: /*#__PURE__*/_jsx(Checkbox, {\n                        disabled: !isEditable,\n                        onChange: handleChange,\n                        id: \"excluded\",\n                        name: \"excluded\",\n                        checked: values.excluded == 1,\n                        onBlur: handleBlur,\n                        placeholder: translate(\"Excluded\")\n                      })\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 6,\n                  md: 6,\n                  children: /*#__PURE__*/_jsx(GridItem, {})\n                })]\n              }) //)\n              , /*#__PURE__*/_jsx(Divider, {\n                style: {\n                  margin: \"2em 0em\"\n                }\n              }), /*#__PURE__*/_jsx(Box, {\n                mt: 4,\n                mb: 1,\n                style: {\n                  display: \"flex\",\n                  justifyContent: \"space-between\"\n                },\n                children: isEditable ? isSubmitting ? /*#__PURE__*/_jsx(SuiButton, {\n                  type: \"button\",\n                  disabled: true,\n                  variant: \"gradient\",\n                  color: \"info\",\n                  children: translate(\"Processing ...\")\n                }) : /*#__PURE__*/_jsx(SuiButton, {\n                  style: {\n                    color: \"rgb(255, 255, 255)\",\n                    background: \"rgb(23, 193, 232)\"\n                  },\n                  disabled: !isValid && isSubmitting,\n                  type: \"submit\",\n                  children: translate(\"Save\")\n                }) : /*#__PURE__*/_jsx(SuiButton, {\n                  onClick: handleEditObserver,\n                  type: \"button\",\n                  variant: \"gradient\",\n                  color: \"info\",\n                  children: translate(\"Edit Observer\")\n                })\n              })]\n            });\n          }\n        })\n      }), /*#__PURE__*/_jsx(CardActions, {})]\n    })\n  });\n};\n\nObserverDetail.layout = Admin;\nObserverDetail.auth = false;\nexport default ObserverDetail;","map":null,"metadata":{},"sourceType":"module"}