{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"F:\\\\StudentAffairs\\\\students\\\\students\\\\components\\\\Modals\\\\AddTestResultsFileModal.tsx\";\nimport React from \"react\";\nimport { Formik, Form } from \"formik\";\nimport { Modal, Box, Typography, IconButton, Grid, Button } from \"@material-ui/core\";\nimport { AttachFile, Close } from \"@material-ui/icons\";\nimport Card from \"../Card/Card.js\";\nimport CardHeader from \"../Card/CardHeader.js\";\nimport CardBody from \"../Card/CardBody.js\";\nimport SuiButton from \"../SuiButton\";\nimport { useRouter } from \"next/router\";\nimport { useTranslation } from \"../../Utility/Translations/useTranslation\";\nimport colors from \"../../assets/theme/base/colors\";\nimport * as Yup from \"yup\";\nimport RegisterationService from \"../../Services/RegisterationService\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport customstyles from \"../../assets/jss/nextjs-material-dashboard/views/rtlStyle\";\nimport { toast } from \"react-toastify\";\n\nconst AddTestResultsFileModal = ({\n  disabled = false,\n  title,\n  open,\n  submitForm,\n  handleClose\n}) => {\n  const {\n    locale\n  } = useRouter();\n  const {\n    translate\n  } = useTranslation();\n  const useStyles = makeStyles(customstyles);\n  const classes = useStyles();\n  const style = {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    width: \"40%\",\n    bgcolor: \"background.paper\",\n    // btype: \"2px solid brown\",\n    boxShadow: 24,\n    btypeRadius: \"20px\"\n  };\n  const cardStyle = {\n    position: \"absolute\",\n    //top: \"50%\",\n    //left: \"50%\",\n    //transform: \"translate(-50%, -50%)\",\n    // width: 700,\n    bgcolor: \"background.paper\",\n    // btype: \"2px solid brown\",\n    boxShadow: 24,\n    btypeRadius: \"20px\",\n    marginTop: \"0px\",\n    marginBottom: \"0px\"\n  };\n  const styles = {\n    modal: {\n      overflowY: \"scroll\",\n      overflowX: \"hidden\",\n      height: \"300px\",\n      direction: locale === 'ar' ? \"rtl\" : \"ltr\"\n    },\n    header: {\n      height: \"5em\",\n      position: \"sticky\",\n      btypeTopRightRadius: \"inherit\",\n      btypeTopLeftRadius: \"inherit\",\n      backgroundColor: colors.gradients.primary.main,\n      color: \"#fff\"\n    }\n  };\n  const [file, setFile] = React.useState(null);\n\n  const submitTestResults = async setSubmitting => {\n    setSubmitting(true);\n    RegisterationService.Add({\n      csv_file: file === null || file === void 0 ? void 0 : file.base64\n      /*.replace('data:text/csv;base64,', '')*/\n\n    }).then(res => {\n      submitForm();\n      toast(translate('Test results updated.'), {\n        type: 'success'\n      });\n    }).catch(error => {\n      console.error(\"error\", error);\n    }).finally(() => {\n      setSubmitting(false);\n    });\n    ;\n  };\n\n  const handleUpload = ({\n    target\n  }) => {\n    console.log('file: ', target.files[0]);\n    const fileReader = new FileReader();\n    fileReader.readAsDataURL(target.files[0]);\n\n    fileReader.onload = e => {\n      var _target$files$;\n\n      setFile({\n        name: (_target$files$ = target.files[0]) === null || _target$files$ === void 0 ? void 0 : _target$files$.name,\n        base64: e.target.result\n      });\n    };\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"modal-modal-title\",\n    \"aria-describedby\": \"modal-modal-description\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: style,\n      style: styles.modal,\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        style: cardStyle,\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          style: styles.header,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              md: 8,\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: \"bold\"\n                },\n                children: [title, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              md: 4,\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                style: {\n                  color: '#fff',\n                  position: \"absolute\",\n                  top: \"1em\",\n                  [locale === 'ar' ? 'left' : 'right']: \"2em\"\n                },\n                onClick: handleClose,\n                children: /*#__PURE__*/_jsxDEV(Close, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n          children: /*#__PURE__*/_jsxDEV(Formik, {\n            initialValues: {},\n            validationSchema: Yup.object().shape({}),\n            onSubmit: (values, {\n              setSubmitting\n            }) => {\n              submitTestResults(setSubmitting);\n            },\n            children: formik => {\n              const {\n                isSubmitting\n              } = formik;\n              return /*#__PURE__*/_jsxDEV(Form, {\n                children: [/*#__PURE__*/_jsxDEV(Box, {\n                  mb: 2,\n                  children: [/*#__PURE__*/_jsxDEV(Box, {\n                    mb: 1,\n                    ml: 0.5,\n                    children: /*#__PURE__*/_jsxDEV(Typography, {\n                      component: \"label\",\n                      variant: \"caption\",\n                      children: [translate(\"Results File\"), !!file && /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [\": \", file === null || file === void 0 ? void 0 : file.name]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 162,\n                        columnNumber: 69\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    disabled: isSubmitting,\n                    variant: \"contained\",\n                    className: classes.submitBtn,\n                    component: \"label\",\n                    style: {\n                      minWidth: 200,\n                      color: 'white'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(AttachFile, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 172,\n                      columnNumber: 29\n                    }, this), translate(\"Upload\"), \" \", translate(\"Results File\"), /*#__PURE__*/_jsxDEV(\"input\", {\n                      accept: \".csv\",\n                      type: \"file\",\n                      name: 'csv_file',\n                      hidden: true,\n                      onChange: handleUpload\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  mt: 4,\n                  mb: 1,\n                  children: isSubmitting ? /*#__PURE__*/_jsxDEV(SuiButton, {\n                    disabled: true,\n                    variant: \"gradient\",\n                    color: \"info\",\n                    fullWidth: true,\n                    children: translate('Processing ...')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 31\n                  }, this) : /*#__PURE__*/_jsxDEV(SuiButton, {\n                    disabled: !file,\n                    type: \"submit\",\n                    variant: \"gradient\",\n                    color: \"info\",\n                    fullWidth: true,\n                    children: translate(\"Save\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 23\n              }, this);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 7\n  }, this);\n};\n\nexport default AddTestResultsFileModal;","map":{"version":3,"sources":["F:/StudentAffairs/students/students/components/Modals/AddTestResultsFileModal.tsx"],"names":["React","Formik","Form","Modal","Box","Typography","IconButton","Grid","Button","AttachFile","Close","Card","CardHeader","CardBody","SuiButton","useRouter","useTranslation","colors","Yup","RegisterationService","makeStyles","customstyles","toast","AddTestResultsFileModal","disabled","title","open","submitForm","handleClose","locale","translate","useStyles","classes","style","position","top","left","transform","width","bgcolor","boxShadow","btypeRadius","cardStyle","marginTop","marginBottom","styles","modal","overflowY","overflowX","height","direction","header","btypeTopRightRadius","btypeTopLeftRadius","backgroundColor","gradients","primary","main","color","file","setFile","useState","submitTestResults","setSubmitting","Add","csv_file","base64","then","res","type","catch","error","console","finally","handleUpload","target","log","files","fileReader","FileReader","readAsDataURL","onload","e","name","result","fontWeight","object","shape","values","formik","isSubmitting","submitBtn","minWidth"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,MAAR,EAAgBC,IAAhB,QAAuC,QAAvC;AACA,SACEC,KADF,EAGEC,GAHF,EAIEC,UAJF,EAOEC,UAPF,EAQEC,IARF,EAQQC,MARR,QASO,mBATP;AAUA,SAAQC,UAAR,EAAoBC,KAApB,QAAgC,oBAAhC;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AACA,OAAOC,UAAP,MAAuB,uBAAvB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,SAAP,MAAsB,cAAtB;AAEA,SAAQC,SAAR,QAAwB,aAAxB;AACA,SAAQC,cAAR,QAA6B,2CAA7B;AAEA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,OAAOC,oBAAP,MAAiC,qCAAjC;AACA,SAAQC,UAAR,QAAyB,0BAAzB;AACA,OAAOC,YAAP,MAAyB,2DAAzB;AACA,SAAQC,KAAR,QAAoB,gBAApB;;AASA,MAAMC,uBAAmD,GAAG,CAAC;AACFC,EAAAA,QAAQ,GAAG,KADT;AAEFC,EAAAA,KAFE;AAGFC,EAAAA,IAHE;AAIFC,EAAAA,UAJE;AAKFC,EAAAA;AALE,CAAD,KAMG;AAC7D,QAAM;AAACC,IAAAA;AAAD,MAAWd,SAAS,EAA1B;AACA,QAAM;AAACe,IAAAA;AAAD,MAAcd,cAAc,EAAlC;AACA,QAAMe,SAAS,GAAGX,UAAU,CAACC,YAAD,CAA5B;AACA,QAAMW,OAAO,GAAGD,SAAS,EAAzB;AAEA,QAAME,KAAK,GAAG;AACZC,IAAAA,QAAQ,EAAE,UADE;AAEZC,IAAAA,GAAG,EAAE,KAFO;AAGZC,IAAAA,IAAI,EAAE,KAHM;AAIZC,IAAAA,SAAS,EAAE,uBAJC;AAKZC,IAAAA,KAAK,EAAE,KALK;AAMZC,IAAAA,OAAO,EAAE,kBANG;AAOZ;AACAC,IAAAA,SAAS,EAAE,EARC;AASZC,IAAAA,WAAW,EAAE;AATD,GAAd;AAWA,QAAMC,SAAS,GAAG;AAChBR,IAAAA,QAAQ,EAAE,UADM;AAEhB;AACA;AACA;AACA;AACAK,IAAAA,OAAO,EAAE,kBANO;AAOhB;AACAC,IAAAA,SAAS,EAAE,EARK;AAShBC,IAAAA,WAAW,EAAE,MATG;AAUhBE,IAAAA,SAAS,EAAE,KAVK;AAWhBC,IAAAA,YAAY,EAAE;AAXE,GAAlB;AAcA,QAAMC,MAAM,GAAG;AACbC,IAAAA,KAAK,EAAE;AACLC,MAAAA,SAAS,EAAE,QADN;AAELC,MAAAA,SAAS,EAAE,QAFN;AAGLC,MAAAA,MAAM,EAAE,OAHH;AAILC,MAAAA,SAAS,EAAErB,MAAM,KAAK,IAAX,GAAkB,KAAlB,GAA0B;AAJhC,KADM;AAObsB,IAAAA,MAAM,EAAE;AACNF,MAAAA,MAAM,EAAE,KADF;AAENf,MAAAA,QAAQ,EAAE,QAFJ;AAGNkB,MAAAA,mBAAmB,EAAE,SAHf;AAINC,MAAAA,kBAAkB,EAAE,SAJd;AAKNC,MAAAA,eAAe,EAAErC,MAAM,CAACsC,SAAP,CAAiBC,OAAjB,CAAyBC,IALpC;AAMNC,MAAAA,KAAK,EAAE;AAND;AAPK,GAAf;AAgBA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkB5D,KAAK,CAAC6D,QAAN,CAAe,IAAf,CAAxB;;AAEA,QAAMC,iBAAiB,GAAG,MAAOC,aAAP,IAAyB;AACjDA,IAAAA,aAAa,CAAC,IAAD,CAAb;AACA5C,IAAAA,oBAAoB,CAAC6C,GAArB,CAAyB;AAACC,MAAAA,QAAQ,EAAEN,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEO;AAAM;;AAAvB,KAAzB,EACKC,IADL,CACWC,GAAD,IAAS;AACbzC,MAAAA,UAAU;AACVL,MAAAA,KAAK,CAACQ,SAAS,CAAC,uBAAD,CAAV,EAAqC;AAACuC,QAAAA,IAAI,EAAE;AAAP,OAArC,CAAL;AACD,KAJL,EAKKC,KALL,CAKYC,KAAD,IAAW;AAChBC,MAAAA,OAAO,CAACD,KAAR,CAAc,OAAd,EAAuBA,KAAvB;AACD,KAPL,EAQKE,OARL,CAQa,MAAM;AACbV,MAAAA,aAAa,CAAC,KAAD,CAAb;AACD,KAVL;AAWA;AACD,GAdD;;AAgBA,QAAMW,YAAY,GAAG,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAgB;AACnCH,IAAAA,OAAO,CAACI,GAAR,CAAY,QAAZ,EAAsBD,MAAM,CAACE,KAAP,CAAa,CAAb,CAAtB;AACA,UAAMC,UAAU,GAAG,IAAIC,UAAJ,EAAnB;AACAD,IAAAA,UAAU,CAACE,aAAX,CAAyBL,MAAM,CAACE,KAAP,CAAa,CAAb,CAAzB;;AACAC,IAAAA,UAAU,CAACG,MAAX,GAAqBC,CAAD,IAAO;AAAA;;AACvBtB,MAAAA,OAAO,CAAC;AAACuB,QAAAA,IAAI,oBAAER,MAAM,CAACE,KAAP,CAAa,CAAb,CAAF,mDAAE,eAAiBM,IAAxB;AAA8BjB,QAAAA,MAAM,EAAEgB,CAAC,CAACP,MAAF,CAASS;AAA/C,OAAD,CAAP;AACH,KAFD;AAGD,GAPD;;AASA,sBACI,QAAC,KAAD;AACI,IAAA,IAAI,EAAE1D,IADV;AAEI,IAAA,OAAO,EAAEE,WAFb;AAGI,uBAAgB,mBAHpB;AAII,wBAAiB,yBAJrB;AAAA,2BAME,QAAC,GAAD;AAAK,MAAA,EAAE,EAAEK,KAAT;AAAgB,MAAA,KAAK,EAAEY,MAAM,CAACC,KAA9B;AAAA,6BACE,QAAC,IAAD;AAAM,QAAA,KAAK,EAAEJ,SAAb;AAAA,gCACE,QAAC,UAAD;AAAY,UAAA,KAAK,EAAEG,MAAM,CAACM,MAA1B;AAAA,iCACE,QAAC,IAAD;AAAM,YAAA,SAAS,MAAf;AAAA,oCACE,QAAC,IAAD;AAAM,cAAA,EAAE,EAAE,CAAV;AAAA,qCACE;AAAI,gBAAA,KAAK,EAAE;AAAEkC,kBAAAA,UAAU,EAAE;AAAd,iBAAX;AAAA,2BAAoC5D,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE,QAAC,IAAD;AAAM,cAAA,EAAE,EAAE,CAAV;AAAA,qCACE,QAAC,UAAD;AACI,gBAAA,KAAK,EAAE;AACLiC,kBAAAA,KAAK,EAAE,MADF;AAELxB,kBAAAA,QAAQ,EAAE,UAFL;AAGLC,kBAAAA,GAAG,EAAE,KAHA;AAIL,mBAACN,MAAM,KAAK,IAAX,GAAkB,MAAlB,GAA2B,OAA5B,GAAsC;AAJjC,iBADX;AAOI,gBAAA,OAAO,EAAED,WAPb;AAAA,uCASE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AATF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAqBE,QAAC,QAAD;AAAA,iCACE,QAAC,MAAD;AACI,YAAA,aAAa,EAAE,EADnB;AAEI,YAAA,gBAAgB,EAAEV,GAAG,CAACoE,MAAJ,GAAaC,KAAb,CAAmB,EAAnB,CAFtB;AAGI,YAAA,QAAQ,EAAE,CAACC,MAAD,EAAS;AAAEzB,cAAAA;AAAF,aAAT,KAA+B;AACvCD,cAAAA,iBAAiB,CAACC,aAAD,CAAjB;AACD,aALL;AAAA,sBAOI0B,MAAD,IAAY;AACX,oBAAM;AACJC,gBAAAA;AADI,kBAEFD,MAFJ;AAGA,kCACI,QAAC,IAAD;AAAA,wCACE,QAAC,GAAD;AAAK,kBAAA,EAAE,EAAE,CAAT;AAAA,0CACE,QAAC,GAAD;AAAK,oBAAA,EAAE,EAAE,CAAT;AAAY,oBAAA,EAAE,EAAE,GAAhB;AAAA,2CACE,QAAC,UAAD;AAAY,sBAAA,SAAS,EAAC,OAAtB;AAA8B,sBAAA,OAAO,EAAC,SAAtC;AAAA,iCACG3D,SAAS,CAAC,cAAD,CADZ,EAC8B,CAAC,CAAC6B,IAAF,iBAAU;AAAA,yCAASA,IAAT,aAASA,IAAT,uBAASA,IAAI,CAAEwB,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA,8BADxC;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BADF,eAME,QAAC,MAAD;AACI,oBAAA,QAAQ,EAAEO,YADd;AAEI,oBAAA,OAAO,EAAC,WAFZ;AAGI,oBAAA,SAAS,EAAE1D,OAAO,CAAC2D,SAHvB;AAII,oBAAA,SAAS,EAAC,OAJd;AAKI,oBAAA,KAAK,EAAE;AAACC,sBAAAA,QAAQ,EAAE,GAAX;AAAgBlC,sBAAAA,KAAK,EAAE;AAAvB,qBALX;AAAA,4CAOE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,4BAPF,EAQG5B,SAAS,CAAC,QAAD,CARZ,OAQyBA,SAAS,CAAC,cAAD,CARlC,eASE;AACI,sBAAA,MAAM,EAAC,MADX;AAEI,sBAAA,IAAI,EAAC,MAFT;AAGI,sBAAA,IAAI,EAAE,UAHV;AAII,sBAAA,MAAM,MAJV;AAKI,sBAAA,QAAQ,EAAE4C;AALd;AAAA;AAAA;AAAA;AAAA,4BATF;AAAA;AAAA;AAAA;AAAA;AAAA,0BANF;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAyBE,QAAC,GAAD;AAAK,kBAAA,EAAE,EAAE,CAAT;AAAY,kBAAA,EAAE,EAAE,CAAhB;AAAA,4BACGgB,YAAY,gBACT,QAAC,SAAD;AACI,oBAAA,QAAQ,EAAE,IADd;AAEI,oBAAA,OAAO,EAAC,UAFZ;AAGI,oBAAA,KAAK,EAAC,MAHV;AAII,oBAAA,SAAS,MAJb;AAAA,8BAMG5D,SAAS,CAAC,gBAAD;AANZ;AAAA;AAAA;AAAA;AAAA,0BADS,gBAUT,QAAC,SAAD;AACI,oBAAA,QAAQ,EAAE,CAAC6B,IADf;AAEI,oBAAA,IAAI,EAAC,QAFT;AAGI,oBAAA,OAAO,EAAC,UAHZ;AAII,oBAAA,KAAK,EAAC,MAJV;AAKI,oBAAA,SAAS,MALb;AAAA,8BAOG7B,SAAS,CAAC,MAAD;AAPZ;AAAA;AAAA;AAAA;AAAA;AAXN;AAAA;AAAA;AAAA;AAAA,wBAzBF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ;AAkDD;AA7DH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBArBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,UADJ;AAkGD,CAlLD;;AAoLA,eAAeP,uBAAf","sourcesContent":["import React from \"react\";\r\nimport {Formik, Form, FieldArray} from \"formik\";\r\nimport {\r\n  Modal,\r\n  TextField,\r\n  Box,\r\n  Typography,\r\n  Select,\r\n  MenuItem,\r\n  IconButton,\r\n  Grid, Button,\r\n} from \"@material-ui/core\";\r\nimport {AttachFile, Close} from \"@material-ui/icons\";\r\nimport Card from \"../Card/Card.js\";\r\nimport CardHeader from \"../Card/CardHeader.js\";\r\nimport CardBody from \"../Card/CardBody.js\";\r\nimport SuiButton from \"../SuiButton\";\r\nimport { IPersonModel } from \"../../Models/ApiResponse/PersonModel.jsx\";\r\nimport {useRouter} from \"next/router\";\r\nimport {useTranslation} from \"../../Utility/Translations/useTranslation\";\r\nimport {governorates} from \"../../Static/resources\";\r\nimport colors from \"../../assets/theme/base/colors\";\r\nimport * as Yup from \"yup\";\r\nimport RegisterationService from \"../../Services/RegisterationService\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport customstyles from \"../../assets/jss/nextjs-material-dashboard/views/rtlStyle\";\r\nimport {toast} from \"react-toastify\";\r\n\r\ninterface ICusomModalProps {\r\n  disabled?: boolean;\r\n  title: string;\r\n  open: boolean;\r\n  handleClose();\r\n  submitForm(): void;\r\n}\r\nconst AddTestResultsFileModal: React.FC<ICusomModalProps> = ({\r\n                                                           disabled = false,\r\n                                                           title,\r\n                                                           open,\r\n                                                           submitForm,\r\n                                                           handleClose,\r\n                                                         }) => {\r\n  const {locale} = useRouter();\r\n  const {translate} = useTranslation();\r\n  const useStyles = makeStyles(customstyles);\r\n  const classes = useStyles();\r\n\r\n  const style = {\r\n    position: \"absolute\" as \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    width: \"40%\",\r\n    bgcolor: \"background.paper\",\r\n    // btype: \"2px solid brown\",\r\n    boxShadow: 24,\r\n    btypeRadius: \"20px\",\r\n  };\r\n  const cardStyle = {\r\n    position: \"absolute\" as \"absolute\",\r\n    //top: \"50%\",\r\n    //left: \"50%\",\r\n    //transform: \"translate(-50%, -50%)\",\r\n    // width: 700,\r\n    bgcolor: \"background.paper\",\r\n    // btype: \"2px solid brown\",\r\n    boxShadow: 24,\r\n    btypeRadius: \"20px\",\r\n    marginTop: \"0px\",\r\n    marginBottom: \"0px\",\r\n  };\r\n\r\n  const styles = {\r\n    modal: {\r\n      overflowY: \"scroll\",\r\n      overflowX: \"hidden\",\r\n      height: \"300px\",\r\n      direction: locale === 'ar' ? \"rtl\" : \"ltr\",\r\n    },\r\n    header: {\r\n      height: \"5em\",\r\n      position: \"sticky\",\r\n      btypeTopRightRadius: \"inherit\",\r\n      btypeTopLeftRadius: \"inherit\",\r\n      backgroundColor: colors.gradients.primary.main,\r\n      color: \"#fff\",    },\r\n  };\r\n\r\n  const [file, setFile] = React.useState(null);\r\n\r\n  const submitTestResults = async (setSubmitting) => {\r\n    setSubmitting(true);\r\n    RegisterationService.Add({csv_file: file?.base64/*.replace('data:text/csv;base64,', '')*/})\r\n        .then((res) => {\r\n          submitForm();\r\n          toast(translate('Test results updated.'), {type: 'success'});\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"error\", error);\r\n        })\r\n        .finally(() => {\r\n          setSubmitting(false);\r\n        });\r\n    ;\r\n  };\r\n\r\n  const handleUpload = ({ target }) => {\r\n    console.log('file: ', target.files[0]);\r\n    const fileReader = new FileReader();\r\n    fileReader.readAsDataURL(target.files[0]);\r\n    fileReader.onload = (e) => {\r\n        setFile({name: target.files[0]?.name, base64: e.target.result});\r\n    };\r\n  };\r\n\r\n  return (\r\n      <Modal\r\n          open={open}\r\n          onClose={handleClose}\r\n          aria-labelledby=\"modal-modal-title\"\r\n          aria-describedby=\"modal-modal-description\"\r\n      >\r\n        <Box sx={style} style={styles.modal}>\r\n          <Card style={cardStyle}>\r\n            <CardHeader style={styles.header}>\r\n              <Grid container>\r\n                <Grid md={8}>\r\n                  <h4 style={{ fontWeight: \"bold\" }}>{title} </h4>\r\n                </Grid>\r\n                <Grid md={4}>\r\n                  <IconButton\r\n                      style={{\r\n                        color: '#fff',\r\n                        position: \"absolute\",\r\n                        top: \"1em\",\r\n                        [locale === 'ar' ? 'left' : 'right']: \"2em\",\r\n                      }}\r\n                      onClick={handleClose}\r\n                  >\r\n                    <Close />\r\n                  </IconButton>\r\n                </Grid>\r\n              </Grid>\r\n            </CardHeader>\r\n            <CardBody>\r\n              <Formik\r\n                  initialValues={{}}\r\n                  validationSchema={Yup.object().shape({})}\r\n                  onSubmit={(values, { setSubmitting }) => {\r\n                    submitTestResults(setSubmitting);\r\n                  }}\r\n              >\r\n                {(formik) => {\r\n                  const {\r\n                    isSubmitting,\r\n                  } = formik;\r\n                  return (\r\n                      <Form>\r\n                        <Box mb={2}>\r\n                          <Box mb={1} ml={0.5}>\r\n                            <Typography component=\"label\" variant=\"caption\">\r\n                              {translate(\"Results File\")}{!!file && <span>: {file?.name}</span>}\r\n                            </Typography>\r\n                          </Box>\r\n                          <Button\r\n                              disabled={isSubmitting}\r\n                              variant=\"contained\"\r\n                              className={classes.submitBtn}\r\n                              component=\"label\"\r\n                              style={{minWidth: 200, color: 'white'}}\r\n                          >\r\n                            <AttachFile />\r\n                            {translate(\"Upload\")} {translate(\"Results File\")}\r\n                            <input\r\n                                accept=\".csv\"\r\n                                type=\"file\"\r\n                                name={'csv_file'}\r\n                                hidden\r\n                                onChange={handleUpload}\r\n                            />\r\n                          </Button>\r\n                        </Box>\r\n                        <Box mt={4} mb={1}>\r\n                          {isSubmitting ? (\r\n                              <SuiButton\r\n                                  disabled={true}\r\n                                  variant=\"gradient\"\r\n                                  color=\"info\"\r\n                                  fullWidth\r\n                              >\r\n                                {translate('Processing ...')}\r\n                              </SuiButton>\r\n                          ) : (\r\n                              <SuiButton\r\n                                  disabled={!file}\r\n                                  type=\"submit\"\r\n                                  variant=\"gradient\"\r\n                                  color=\"info\"\r\n                                  fullWidth\r\n                              >\r\n                                {translate(\"Save\")}\r\n                              </SuiButton>\r\n                          )}\r\n                        </Box>\r\n                      </Form>\r\n                  );\r\n                }}\r\n              </Formik>\r\n            </CardBody>\r\n          </Card>\r\n        </Box>\r\n      </Modal>\r\n  );\r\n};\r\n\r\nexport default AddTestResultsFileModal;\r\n"]},"metadata":{},"sourceType":"module"}