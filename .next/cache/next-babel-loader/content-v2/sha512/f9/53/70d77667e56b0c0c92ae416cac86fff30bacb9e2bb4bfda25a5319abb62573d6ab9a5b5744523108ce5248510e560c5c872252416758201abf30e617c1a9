{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useRef } from \"react\";\nimport styles from \"../../../../assets/jss/nextjs-material-dashboard/views/rtlStyle.js\";\nimport { useTranslation } from \"../../../../Utility/Translations/useTranslation\";\nimport { useRouter } from \"next/router\";\nimport Placeholder from \"../../../../Utility/Placeholders\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport GridItem from \"components/Grid/GridItem.js\";\nimport { Button, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions } from \"@material-ui/core\";\nimport ActionTable from \"../../../../components/MaterialTable/ActionTable\";\nimport SuiButton from \"../../../../components/SuiButton\";\nimport { Grid } from \"@material-ui/core\";\nimport StudentsImportService from \"../../../../Services/StudentsImportService\";\n\nconst StudentListCourses = ({\n  courses\n}) => {\n  const {\n    translate\n  } = useTranslation();\n  const useStyles = makeStyles(styles);\n  const classes = useStyles();\n  const router = useRouter();\n  const [confirm, setConfirm] = React.useState(false);\n  const [deleteCourse, setDeleteCourse] = React.useState(false);\n  const [data, setData] = React.useState(courses);\n  const tableRef = useRef();\n\n  const handleConfirmDialog = data => {\n    setDeleteCourse(data.id);\n    setConfirm(true);\n  }; // const [data, setData] = useState(courses);\n\n\n  const handleConfirmClose = () => {\n    setConfirm(false);\n  };\n\n  const handleDeleteCourse = () => {\n    StudentsImportService.DeleteStudentCourss(deleteCourse).then(msg => {\n      console.log(deleteCourse);\n      let courses = data.filter(e => e.id != deleteCourse);\n      setData(courses);\n      toast.success(\"تم حذف المقرّر بنجاح\");\n      setConfirm(false);\n    }).catch(e => {});\n  };\n\n  const ConfirmDialog = () => /*#__PURE__*/_jsx(\"div\", {\n    children: /*#__PURE__*/_jsxs(Dialog, {\n      open: confirm,\n      onClose: handleConfirmClose,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsx(DialogTitle, {\n        id: \"alert-dialog-title\",\n        children: translate(\"حذف مقرر طالب\")\n      }), /*#__PURE__*/_jsx(DialogContent, {\n        children: /*#__PURE__*/_jsx(DialogContentText, {\n          id: \"alert-dialog-description\",\n          children: translate(\"هل أنت متأكد من حذف هذا المقرر للطالب\")\n        })\n      }), /*#__PURE__*/_jsxs(DialogActions, {\n        children: [/*#__PURE__*/_jsx(Button, {\n          className: classes.submitBtn,\n          onClick: handleDeleteCourse,\n          children: translate(\"Yes\")\n        }), /*#__PURE__*/_jsx(Button, {\n          style: {\n            minWidth: 80,\n            color: \"#dc3545\",\n            backgroundColor: \"transparent\",\n            border: \"1px solid #dc3545\"\n          },\n          color: \"danger\",\n          onClick: handleConfirmClose,\n          autoFocus: true,\n          children: translate(\"No\")\n        })]\n      })]\n    })\n  });\n\n  useEffect(() => {\n    setData(courses);\n  }, [courses]);\n\n  const renderCourses = () => {\n    let columns = [{\n      title: translate(\"Id\"),\n      field: \"id\",\n      hidden: true\n    }, {\n      title: translate(\"English Name\"),\n      field: \"en_name\"\n    }, {\n      title: translate(\"Arabic Name\"),\n      field: \"ar_name\"\n    }, {\n      title: translate(\"Code\"),\n      field: \"code\"\n    }];\n\n    if (courses != null && courses.length > 0) {\n      // let data = courses;\n      console.log(data);\n      let options = {\n        actionsColumnIndex: -1,\n        headerStyle: {\n          backgroundColor: \"#01579b\",\n          color: \"#FFF\",\n          fontWeight: \"bold\"\n        },\n        filtering: false,\n        paging: true,\n        pageSize: 10,\n        maxBodyHeight: \"500px\",\n        search: false,\n        tableLayout: \"auto\"\n      };\n      let actions = [{\n        icon: () => /*#__PURE__*/_jsx(SuiButton, {\n          style: {\n            minWidth: 80,\n            color: \"#dc3545\",\n            backgroundColor: \"transparent\",\n            border: \"1px solid #dc3545\"\n          },\n          color: \"danger\",\n          children: translate(\"Delete\")\n        }),\n        onClick: (evt, data) => handleConfirmDialog(data)\n      }];\n      return /*#__PURE__*/_jsx(\"div\", {\n        ref: tableRef,\n        children: /*#__PURE__*/_jsx(ActionTable, {\n          Title: translate(\"قائمة مقررات الطالب\"),\n          Columns: columns,\n          Data: data.map(item => {\n            var _item$edu_course, _item$edu_course$cour, _item$edu_course2, _item$edu_course2$cou, _item$edu_course3, _item$edu_course3$cou;\n\n            return _objectSpread(_objectSpread({}, item), {}, {\n              en_name: `${(_item$edu_course = item.edu_course) === null || _item$edu_course === void 0 ? void 0 : (_item$edu_course$cour = _item$edu_course.course) === null || _item$edu_course$cour === void 0 ? void 0 : _item$edu_course$cour.en_name}`,\n              ar_name: `${(_item$edu_course2 = item.edu_course) === null || _item$edu_course2 === void 0 ? void 0 : (_item$edu_course2$cou = _item$edu_course2.course) === null || _item$edu_course2$cou === void 0 ? void 0 : _item$edu_course2$cou.ar_name}`,\n              code: `${(_item$edu_course3 = item.edu_course) === null || _item$edu_course3 === void 0 ? void 0 : (_item$edu_course3$cou = _item$edu_course3.course) === null || _item$edu_course3$cou === void 0 ? void 0 : _item$edu_course3$cou.code}`\n            });\n          }),\n          Options: options,\n          Actions: actions\n        })\n      });\n    } else return /*#__PURE__*/_jsx(Placeholder, {\n      loading: false\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(Grid, {\n    container: true,\n    md: 12,\n    style: {\n      margin: \"2em 0em\"\n    },\n    children: [/*#__PURE__*/_jsx(GridItem, {\n      md: 12,\n      children: renderCourses()\n    }), /*#__PURE__*/_jsx(ConfirmDialog, {})]\n  });\n};\n\nexport default StudentListCourses;","map":null,"metadata":{},"sourceType":"module"}