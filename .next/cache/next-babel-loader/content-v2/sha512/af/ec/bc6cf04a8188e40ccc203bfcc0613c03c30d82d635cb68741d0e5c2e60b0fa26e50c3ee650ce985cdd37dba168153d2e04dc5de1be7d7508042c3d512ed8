{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport NextAuth from \"next-auth\";\nimport CredentialsProvider from \"next-auth/providers/credentials\";\nimport axios from \"../../../Services/ApiClient\"; //Api route function that is returned from next auth\n\nexport default NextAuth({\n  logger: {\n    error(code, metadata) {\n      console.log({\n        type: \"inside error logger\",\n        code,\n        metadata\n      });\n    },\n\n    warn(code) {\n      console.log({\n        type: \"inside warn logger\",\n        code\n      });\n    },\n\n    debug(code, metadata) {\n      console.log({\n        type: \"inside debug logger\",\n        code,\n        metadata\n      });\n    }\n\n  },\n  providers: [CredentialsProvider({\n    id: \"Hiast\",\n    name: \"Hiast\",\n\n    async authorize(credentials, req) {\n      const payload = {\n        // userName: credentials.user,\n        email: credentials.username,\n        password: credentials.password\n      };\n      console.log(\"Starting the signup/login process ---\");\n      const response = await axios.post(\"/login\", payload).then(resp => {\n        console.log(\"resp\", resp);\n        if (resp.data.success) return resp.data;else console.log(resp.data.error);\n      }).catch(error => {\n        console.log(\"error resp\", error);\n      }); // credentials will to passed from our login form\n      // Your own logic here either check agains database or api endpoint\n      // e.g. verify password if valid return user object.\n\n      console.log(\"Credentials\", response);\n\n      if (response && response.success) {\n        let _user = {\n          name: response.result.userName,\n          img: response.result.image,\n          email: response.result.email,\n          token: response.result.token\n        };\n        return _user;\n      } else return null;\n    }\n\n  })],\n  secret: process.env.SECRET,\n  callbacks: {\n    // called after sucessful signin\n    jwt: async ({\n      token,\n      user\n    }) => {\n      user && (token.user = user);\n      if (user) return _objectSpread(_objectSpread({}, token), {}, {\n        accessToken: user.token\n      });\n      return token;\n    },\n    // called whenever session is checked\n    session: async ({\n      session,\n      token\n    }) => {\n      token && (session.user = token.user);\n      return session;\n    }\n  },\n  session: {\n    strategy: \"jwt\",\n    jwt: true,\n    maxAge: 30 * 24 * 60 * 60\n  },\n  pages: \"/authentication/sign-in\"\n});","map":{"version":3,"sources":["F:/StudentAffairs/students/students/pages/api/auth/[...nextauth].js"],"names":["NextAuth","CredentialsProvider","axios","logger","error","code","metadata","console","log","type","warn","debug","providers","id","name","authorize","credentials","req","payload","email","username","password","response","post","then","resp","data","success","catch","_user","result","userName","img","image","token","secret","process","env","SECRET","callbacks","jwt","user","accessToken","session","strategy","maxAge","pages"],"mappings":"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","sourcesContent":["import NextAuth from \"next-auth\";\r\nimport CredentialsProvider from \"next-auth/providers/credentials\";\r\nimport axios from \"../../../Services/ApiClient\";\r\n//Api route function that is returned from next auth\r\nexport default NextAuth({\r\n  logger: {\r\n    error(code, metadata) {\r\n      console.log({ type: \"inside error logger\", code, metadata });\r\n    },\r\n    warn(code) {\r\n      console.log({ type: \"inside warn logger\", code });\r\n    },\r\n    debug(code, metadata) {\r\n      console.log({ type: \"inside debug logger\", code, metadata });\r\n    },\r\n  },\r\n  providers: [\r\n    CredentialsProvider({\r\n      id: \"Hiast\",\r\n      name: \"Hiast\",\r\n      async authorize(credentials, req) {\r\n        const payload = {\r\n          // userName: credentials.user,\r\n          email: credentials.username,\r\n          password: credentials.password,\r\n        };\r\n        console.log(\"Starting the signup/login process ---\");\r\n        const response = await axios\r\n          .post(\"/login\", payload)\r\n          .then((resp) => {\r\n            console.log(\"resp\", resp);\r\n            if (resp.data.success) return resp.data;\r\n            else console.log(resp.data.error);\r\n          })\r\n          .catch((error) => {\r\n            console.log(\"error resp\", error);\r\n          });\r\n        // credentials will to passed from our login form\r\n        // Your own logic here either check agains database or api endpoint\r\n        // e.g. verify password if valid return user object.\r\n        console.log(\"Credentials\", response);\r\n        if (response && response.success) {\r\n          let _user = {\r\n            name: response.result.userName,\r\n            img: response.result.image,\r\n            email: response.result.email,\r\n            token: response.result.token,\r\n          };\r\n          return _user;\r\n        } else return null;\r\n      },\r\n    }),\r\n  ],\r\n  secret: process.env.SECRET,\r\n  callbacks: {\r\n    // called after sucessful signin\r\n    jwt: async ({ token, user }) => {\r\n      user && (token.user = user);\r\n      if (user)\r\n        return {\r\n          ...token,\r\n          accessToken: user.token,\r\n        };\r\n      return token;\r\n    }, // called whenever session is checked\r\n    session: async ({ session, token }) => {\r\n      token && (session.user = token.user);\r\n      return session;\r\n    },\r\n  },\r\n  session: {\r\n    strategy: \"jwt\",\r\n    jwt: true,\r\n    maxAge: 30 * 24 * 60 * 60\r\n  },\r\n  pages: \"/authentication/sign-in\",\r\n});\r\n"]},"metadata":{},"sourceType":"module"}