{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"F:\\\\StudentAffairs\\\\students\\\\students\\\\pages\\\\students_affairs\\\\affairs_officer\\\\candidates\\\\CandidateDesiresList.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport Admin from \"../../../../layouts/Admin\";\nimport Card from \"../../../../components/Card/Card.js\";\nimport CardHeader from \"../../../../components/Card/CardHeader.js\";\nimport CardBody from \"../../../../components/Card/CardBody.js\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport styles from \"../../../../assets/jss/nextjs-material-dashboard/views/rtlStyle.js\";\nimport { Grid } from \"@material-ui/core\";\nimport Desire from \"../../../../components/Desire/Desire\";\nimport { DragDropContext, Droppable, Draggable, resetServerContext } from \"react-beautiful-dnd\";\nimport { useTranslation } from \"../../../../Utility/Translations/useTranslation\";\nimport SpecialityService from \"../../../../Services/SpecialityService\";\nimport DesireService from \"../../../../Services/DesireService\";\nimport SuiButton from \"../../../../components/SuiButton\";\n\nconst CandidateDesireList = ({\n  candidateId\n}) => {\n  _s();\n\n  resetServerContext();\n  const {\n    translate\n  } = useTranslation();\n  const useStyles = makeStyles(styles);\n  const [Desires, setDesires] = React.useState(null);\n  const {\n    0: columns,\n    1: setColumns\n  } = useState({});\n\n  const getSpecialities = () => {\n    SpecialityService.GetAll().then(res => {\n      console.log(\"Speciality\", res);\n      setColumns({\n        system: {\n          type: 1,\n          name: translate('Desires'),\n          items: res.result.map(item => {\n            return _objectSpread(_objectSpread({}, item), {}, {\n              id: item.id.toString()\n            });\n          })\n        }\n      });\n    }).catch(error => {\n      console.error(\"error\", error);\n    });\n  };\n  /************************** Data ****************************/\n\n\n  useEffect(() => {\n    DesireService.GetAll(candidateId).then(res => {\n      console.log(\"Desire\", res);\n      const desires = res.result;\n\n      if (desires.length > 0) {\n        setColumns({\n          system: {\n            type: 1,\n            name: translate('Desires'),\n            items: desires.map(item => {\n              return _objectSpread(_objectSpread({}, item.speciality), {}, {\n                id: item.speciality_id.toString()\n              });\n            })\n          }\n        });\n      } else {\n        getSpecialities();\n      }\n    }).catch(error => {\n      console.error(\"error\", error);\n    });\n  }, []);\n  /************************** Finish Data ****************************/\n\n  const {\n    0: isSubmitting,\n    1: setSubmitting\n  } = useState(false);\n  /************************** Handle edit data ****************************/\n\n  const submitUpdateDesire = async () => {\n    setSubmitting(true);\n    console.log(\"items order: \", columns.system.items);\n    const values = {\n      candidate_id: candidateId,\n      desires: columns.system.items.map((item, index) => {\n        return {\n          speciality_id: item.id,\n          order: index + 1\n        };\n      })\n    };\n    DesireService.Save(values).then(res => {\n      console.log(\"Desire\", res);\n    }).catch(error => {\n      console.error(\"error\", error);\n    }).finally(() => {\n      setSubmitting(false);\n    });\n  };\n  /************************** Finish Edit Data ****************************/\n\n\n  const onDragEnd = (result, columns, setColumns) => {\n    console.log(result, columns);\n    if (!result.destination) return;\n    const {\n      source,\n      destination\n    } = result;\n    const column = columns[source.droppableId];\n    const copiedItems = [...column.items];\n    const [removed] = copiedItems.splice(source.index, 1);\n    copiedItems.splice(destination.index, 0, removed);\n    setColumns(_objectSpread(_objectSpread({}, columns), {}, {\n      [source.droppableId]: _objectSpread(_objectSpread({}, column), {}, {\n        items: copiedItems\n      })\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: result => onDragEnd(result, columns, setColumns),\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        xs: 12,\n        md: 12,\n        sm: 12,\n        children: Object.entries(columns).map(([columnId, column], index) => {\n          return /*#__PURE__*/_jsxDEV(Grid, {\n            md: 12,\n            xs: 12,\n            sm: 12,\n            style: {\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"center\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n                children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                  style: {\n                    fontWeight: \"bold\",\n                    color: \"#01579b\"\n                  },\n                  children: column.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n                children: [/*#__PURE__*/_jsxDEV(Droppable, {\n                  droppableId: columnId,\n                  children: (provided, snapshot) => {\n                    return /*#__PURE__*/_jsxDEV(Grid, _objectSpread(_objectSpread({\n                      md: 12,\n                      container: true\n                    }, provided.droppableProps), {}, {\n                      ref: provided.innerRef,\n                      style: {\n                        background: snapshot.isDraggingOver ? \"rgb(1, 87, 155, 0.4)\" : \"rgba(211, 211, 211, 0.15)\",\n                        padding: 20,\n                        marginBottom: 20,\n                        borderRadius: 10\n                      },\n                      children: [column.items.map((item, index) => {\n                        return /*#__PURE__*/_jsxDEV(Draggable, {\n                          draggableId: item.id,\n                          index: index,\n                          children: (provided, snapshot) => {\n                            return /*#__PURE__*/_jsxDEV(Grid, _objectSpread(_objectSpread(_objectSpread({\n                              md: 12,\n                              ref: provided.innerRef\n                            }, provided.draggableProps), provided.dragHandleProps), {}, {\n                              style: _objectSpread({\n                                userSelect: \"none\",\n                                margin: \"3px 0 3px 0\",\n                                padding: \"0 20px\",\n                                borderRadius: \"12px\",\n                                backgroundColor: snapshot.isDragging ? \"#c2c2c2\" : \"white\",\n                                color: \"black\"\n                              }, provided.draggableProps.style),\n                              children: /*#__PURE__*/_jsxDEV(Desire, {\n                                id: item.id,\n                                index: index,\n                                name: item.ar_short_name,\n                                type: column.type\n                              }, item.id, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 181,\n                                columnNumber: 51\n                              }, this)\n                            }), void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 164,\n                              columnNumber: 49\n                            }, this);\n                          }\n                        }, item.id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 157,\n                          columnNumber: 41\n                        }, this);\n                      }), provided.placeholder]\n                    }), void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 141,\n                      columnNumber: 33\n                    }, this);\n                  }\n                }, columnId, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 25\n                }, this), isSubmitting ? /*#__PURE__*/_jsxDEV(SuiButton, {\n                  disabled: true,\n                  variant: \"gradient\",\n                  color: \"info\",\n                  fullWidth: true,\n                  children: translate(\"Processing ...\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 31\n                }, this) : /*#__PURE__*/_jsxDEV(SuiButton, {\n                  variant: \"gradient\",\n                  color: \"info\",\n                  fullWidth: true,\n                  onClick: submitUpdateDesire,\n                  children: translate(\"Save\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 31\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 21\n            }, this)\n          }, columnId, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 19\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 7\n  }, this);\n};\n\n_s(CandidateDesireList, \"TblkvM098uqvb8a7C4Jg7bDsy4U=\", false, function () {\n  return [useTranslation];\n});\n\n_c = CandidateDesireList;\nCandidateDesireList.auth = true;\nCandidateDesireList.layout = Admin;\nexport default CandidateDesireList;\n\nvar _c;\n\n$RefreshReg$(_c, \"CandidateDesireList\");","map":{"version":3,"sources":["F:/StudentAffairs/students/students/pages/students_affairs/affairs_officer/candidates/CandidateDesiresList.tsx"],"names":["React","useEffect","useState","Admin","Card","CardHeader","CardBody","makeStyles","styles","Grid","Desire","DragDropContext","Droppable","Draggable","resetServerContext","useTranslation","SpecialityService","DesireService","SuiButton","CandidateDesireList","candidateId","translate","useStyles","Desires","setDesires","columns","setColumns","getSpecialities","GetAll","then","res","console","log","system","type","name","items","result","map","item","id","toString","catch","error","desires","length","speciality","speciality_id","isSubmitting","setSubmitting","submitUpdateDesire","values","candidate_id","index","order","Save","finally","onDragEnd","destination","source","column","droppableId","copiedItems","removed","splice","Object","entries","columnId","display","flexDirection","alignItems","fontWeight","color","provided","snapshot","droppableProps","innerRef","background","isDraggingOver","padding","marginBottom","borderRadius","draggableProps","dragHandleProps","userSelect","margin","backgroundColor","isDragging","style","ar_short_name","placeholder","auth","layout"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Admin from \"../../../../layouts/Admin\";\r\nimport Card from \"../../../../components/Card/Card.js\";\r\nimport CardHeader from \"../../../../components/Card/CardHeader.js\";\r\nimport CardBody from \"../../../../components/Card/CardBody.js\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"../../../../assets/jss/nextjs-material-dashboard/views/rtlStyle.js\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport Desire from \"../../../../components/Desire/Desire\";\r\n\r\nimport {\r\n  DragDropContext,\r\n  Droppable,\r\n  Draggable,\r\n  resetServerContext,\r\n} from \"react-beautiful-dnd\";\r\nimport {useTranslation} from \"../../../../Utility/Translations/useTranslation\";\r\nimport SpecialityService from \"../../../../Services/SpecialityService\";\r\nimport DesireService from \"../../../../Services/DesireService\";\r\nimport {IDesireModel} from \"../../../../Models/ApiResponse/DesireModel\";\r\nimport SuiButton from \"../../../../components/SuiButton\";\r\n\r\ninterface IDesireListProps {candidateId: number}\r\nconst CandidateDesireList: React.FC<IDesireListProps> = ({candidateId}) => {\r\n  resetServerContext();\r\n  const {translate} = useTranslation();\r\n  const useStyles = makeStyles(styles);\r\n  const [Desires, setDesires] = React.useState<IDesireModel[]>(null);\r\n  const [columns, setColumns] = useState({});\r\n\r\n  const getSpecialities = () => {\r\n    SpecialityService.GetAll()\r\n        .then((res) => {\r\n          console.log(\"Speciality\", res);\r\n          setColumns({\r\n            system: {\r\n              type: 1,\r\n              name: translate('Desires'),\r\n              items: res.result.map((item) => {return {...item, id: item.id.toString()}}),\r\n            },\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"error\", error);\r\n        });\r\n  };\r\n\r\n  /************************** Data ****************************/\r\n  useEffect(() => {\r\n    DesireService.GetAll(candidateId)\r\n        .then((res) => {\r\n          console.log(\"Desire\", res);\r\n          const desires = res.result;\r\n          if(desires.length > 0) {\r\n              setColumns({\r\n                  system: {\r\n                      type: 1,\r\n                      name: translate('Desires'),\r\n                      items: desires.map((item) => {return {...item.speciality, id: item.speciality_id.toString()}}),\r\n                  },\r\n              });\r\n          } else {\r\n              getSpecialities();\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"error\", error);\r\n        });\r\n  }, []);\r\n  /************************** Finish Data ****************************/\r\n\r\n  const [isSubmitting, setSubmitting] = useState(false);\r\n  /************************** Handle edit data ****************************/\r\n  const submitUpdateDesire = async () => {\r\n      setSubmitting(true);\r\n      console.log(\"items order: \", columns.system.items);\r\n      const values = {\r\n          candidate_id: candidateId,\r\n          desires: columns.system.items.map((item, index) => {return {speciality_id: item.id, order: index + 1}})\r\n      }\r\n      DesireService.Save(values)\r\n          .then((res) => {\r\n              console.log(\"Desire\", res);\r\n          })\r\n          .catch((error) => {\r\n              console.error(\"error\", error);\r\n          })\r\n          .finally(() => {\r\n              setSubmitting(false);\r\n          });\r\n  };\r\n  /************************** Finish Edit Data ****************************/\r\n\r\n\r\n  const onDragEnd = (result, columns, setColumns) => {\r\n    console.log(result, columns);\r\n    if (!result.destination) return;\r\n    const { source, destination } = result;\r\n\r\n    const column = columns[source.droppableId];\r\n    const copiedItems = [...column.items];\r\n    const [removed] = copiedItems.splice(source.index, 1);\r\n    copiedItems.splice(destination.index, 0, removed);\r\n    setColumns({\r\n      ...columns,\r\n      [source.droppableId]: {\r\n        ...column,\r\n        items: copiedItems,\r\n      },\r\n    });\r\n\r\n  };\r\n\r\n  return (\r\n      <div>\r\n        <DragDropContext\r\n            onDragEnd={(result) => onDragEnd(result, columns, setColumns)}\r\n        >\r\n          <Grid container xs={12} md={12} sm={12}>\r\n            {Object.entries(columns).map(([columnId, column], index) => {\r\n              return (\r\n                  <Grid\r\n                      md={12}\r\n                      xs={12}\r\n                      sm={12}\r\n                      style={{\r\n                        display: \"flex\",\r\n                        flexDirection: \"column\",\r\n                        alignItems: \"center\",\r\n                      }}\r\n                      key={columnId}\r\n                  >\r\n                    <Card>\r\n                      <CardHeader>\r\n                        <h4 style={{ fontWeight: \"bold\", color: \"#01579b\" }}>{column.name}</h4>\r\n                      </CardHeader>\r\n                      <CardBody>\r\n                        <Droppable droppableId={columnId} key={columnId}>\r\n                          {(provided, snapshot) => {\r\n                            return (\r\n                                <Grid\r\n                                    md={12}\r\n                                    container\r\n                                    {...provided.droppableProps}\r\n                                    ref={provided.innerRef}\r\n                                    style={{\r\n                                      background: snapshot.isDraggingOver\r\n                                          ? \"rgb(1, 87, 155, 0.4)\"\r\n                                          : \"rgba(211, 211, 211, 0.15)\",\r\n                                      padding: 20,\r\n                                      marginBottom: 20,\r\n                                      borderRadius: 10,\r\n                                    }}\r\n                                >\r\n                                  {column.items.map((item, index) => {\r\n                                    return (\r\n                                        <Draggable\r\n                                            key={item.id}\r\n                                            draggableId={item.id}\r\n                                            index={index}\r\n                                        >\r\n                                          {(provided, snapshot) => {\r\n                                            return (\r\n                                                <Grid\r\n                                                    md={12}\r\n                                                    ref={provided.innerRef}\r\n                                                    {...provided.draggableProps}\r\n                                                    {...provided.dragHandleProps}\r\n                                                    style={{\r\n                                                      userSelect: \"none\",\r\n                                                      margin: \"3px 0 3px 0\",\r\n                                                      padding: \"0 20px\",\r\n                                                      borderRadius: \"12px\",\r\n                                                      backgroundColor: snapshot.isDragging\r\n                                                          ? \"#c2c2c2\"\r\n                                                          : \"white\",\r\n                                                      color: \"black\",\r\n                                                      ...provided.draggableProps.style,\r\n                                                    }}\r\n                                                >\r\n                                                  <Desire\r\n                                                      id={item.id}\r\n                                                      index={index}\r\n                                                      name={item.ar_short_name}\r\n                                                      key={item.id}\r\n                                                      type={column.type}\r\n                                                  ></Desire>\r\n                                                </Grid>\r\n                                            );\r\n                                          }}\r\n                                        </Draggable>\r\n                                    );\r\n                                  })}\r\n                                  {provided.placeholder}\r\n                                </Grid>\r\n                            );\r\n                          }}\r\n                        </Droppable>\r\n\r\n                          {isSubmitting ? (\r\n                              <SuiButton\r\n                                  disabled={true}\r\n                                  variant=\"gradient\"\r\n                                  color=\"info\"\r\n                                  fullWidth\r\n                              >\r\n                                  {translate(\"Processing ...\")}\r\n                              </SuiButton>\r\n                          ) : (\r\n                              <SuiButton\r\n                                  variant=\"gradient\"\r\n                                  color=\"info\"\r\n                                  fullWidth\r\n                                  onClick={submitUpdateDesire}\r\n                              >\r\n                                  {translate(\"Save\")}\r\n                              </SuiButton>\r\n                          )}\r\n\r\n\r\n                      </CardBody>\r\n                    </Card>\r\n                  </Grid>\r\n              );\r\n            })}\r\n          </Grid>\r\n        </DragDropContext>\r\n      </div>\r\n  );\r\n}\r\n\r\n(CandidateDesireList as any).auth = true;\r\n(CandidateDesireList as any).layout = Admin;\r\nexport default CandidateDesireList;\r\n"]},"metadata":{},"sourceType":"module"}