{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"F:\\\\StudentAffairs\\\\students\\\\students\\\\pages\\\\students_affairs\\\\affairs_officer\\\\candidates\\\\CandidateDesiresList.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from \"react\";\nimport Admin from \"../../../../layouts/Admin\";\nimport Card from \"../../../../components/Card/Card.js\";\nimport CardHeader from \"../../../../components/Card/CardHeader.js\";\nimport CardBody from \"../../../../components/Card/CardBody.js\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport styles from \"../../../../assets/jss/nextjs-material-dashboard/views/rtlStyle.js\";\nimport { Grid } from \"@material-ui/core\";\nimport Desire from \"../../../../components/Desire/Desire\";\nimport { DragDropContext, Droppable, Draggable, resetServerContext } from \"react-beautiful-dnd\";\nimport { useTranslation } from \"../../../../Utility/Translations/useTranslation\";\nimport SpecialityService from \"../../../../Services/SpecialityService\";\nimport DesireService from \"../../../../Services/DesireService\";\nimport SuiButton from \"../../../../components/SuiButton\";\nimport { toast } from \"react-toastify\";\n\nconst CandidateDesireList = ({\n  candidateId,\n  callback,\n  updateCandidate\n}) => {\n  resetServerContext();\n  const {\n    translate\n  } = useTranslation();\n  const useStyles = makeStyles(styles);\n  const [Desires, setDesires] = React.useState(null);\n  const {\n    0: columns,\n    1: setColumns\n  } = useState({});\n\n  const getSpecialities = () => {\n    SpecialityService.GetAll().then(res => {\n      console.log(\"Speciality\", res);\n      setColumns({\n        system: {\n          type: 1,\n          name: translate('Desires'),\n          items: res.result.map(item => {\n            return _objectSpread(_objectSpread({}, item), {}, {\n              id: item.id.toString()\n            });\n          })\n        }\n      });\n    }).catch(error => {\n      console.error(\"error\", error);\n    });\n  };\n  /************************** Data ****************************/\n\n\n  useEffect(() => {\n    DesireService.GetAll(candidateId).then(res => {\n      console.log(\"Desire\", res);\n      const desires = res.result;\n\n      if (desires.length > 0) {\n        setColumns({\n          system: {\n            type: 1,\n            name: translate('Desires'),\n            items: desires.map(item => {\n              return _objectSpread(_objectSpread({}, item.speciality), {}, {\n                id: item.speciality_id.toString()\n              });\n            })\n          }\n        });\n      } else {\n        getSpecialities();\n      }\n    }).catch(error => {\n      console.error(\"error\", error);\n    });\n  }, []);\n  /************************** Finish Data ****************************/\n\n  const {\n    0: isSubmitting,\n    1: setSubmitting\n  } = useState(false);\n  /************************** Handle edit data ****************************/\n\n  const submitUpdateDesire = async () => {\n    setSubmitting(true);\n    console.log(\"items order: \", columns.system.items);\n    const values = {\n      candidate_id: candidateId,\n      desires: columns.system.items.map((item, index) => {\n        return {\n          speciality_id: item.id,\n          order: index + 1\n        };\n      })\n    };\n    DesireService.Save(values).then(res => {\n      console.log(\"Desire\", res);\n      toast(translate('Desires updated.'), {\n        type: 'success'\n      });\n      callback && callback(res.result);\n    }).catch(error => {\n      console.error(\"error\", error);\n    }).finally(() => {\n      setSubmitting(false);\n    });\n  };\n  /************************** Finish Edit Data ****************************/\n\n\n  const onDragEnd = (result, columns, setColumns) => {\n    console.log(result, columns);\n    if (!result.destination) return;\n    const {\n      source,\n      destination\n    } = result;\n    const column = columns[source.droppableId];\n    const copiedItems = [...column.items];\n    const [removed] = copiedItems.splice(source.index, 1);\n    copiedItems.splice(destination.index, 0, removed);\n    setColumns(_objectSpread(_objectSpread({}, columns), {}, {\n      [source.droppableId]: _objectSpread(_objectSpread({}, column), {}, {\n        items: copiedItems\n      })\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: result => onDragEnd(result, columns, setColumns),\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        xs: 12,\n        md: 12,\n        sm: 12,\n        children: Object.entries(columns).map(([columnId, column], index) => {\n          return /*#__PURE__*/_jsxDEV(Grid, {\n            md: 12,\n            xs: 12,\n            sm: 12,\n            style: {\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"center\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n                children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                  style: {\n                    fontWeight: \"bold\",\n                    color: \"#01579b\"\n                  },\n                  children: column.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n                children: [/*#__PURE__*/_jsxDEV(Droppable, {\n                  droppableId: columnId,\n                  children: (provided, snapshot) => {\n                    return /*#__PURE__*/_jsxDEV(Grid, _objectSpread(_objectSpread({\n                      md: 12,\n                      container: true\n                    }, provided.droppableProps), {}, {\n                      ref: provided.innerRef,\n                      style: {\n                        background: snapshot.isDraggingOver ? \"rgb(1, 87, 155, 0.4)\" : \"rgba(211, 211, 211, 0.15)\",\n                        padding: 20,\n                        marginBottom: 20,\n                        borderRadius: 10\n                      },\n                      children: [column.items.map((item, index) => {\n                        return /*#__PURE__*/_jsxDEV(Draggable, {\n                          draggableId: item.id,\n                          index: index,\n                          children: (provided, snapshot) => {\n                            return /*#__PURE__*/_jsxDEV(Grid, _objectSpread(_objectSpread(_objectSpread({\n                              md: 12,\n                              ref: provided.innerRef\n                            }, provided.draggableProps), provided.dragHandleProps), {}, {\n                              style: _objectSpread({\n                                userSelect: \"none\",\n                                margin: \"3px 0 3px 0\",\n                                padding: \"0 20px\",\n                                borderRadius: \"12px\",\n                                backgroundColor: snapshot.isDragging ? \"#c2c2c2\" : \"white\",\n                                color: \"black\"\n                              }, provided.draggableProps.style),\n                              children: /*#__PURE__*/_jsxDEV(Desire, {\n                                id: item.id,\n                                index: index,\n                                name: item.ar_short_name,\n                                type: column.type\n                              }, item.id, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 184,\n                                columnNumber: 41\n                              }, this)\n                            }), void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 167,\n                              columnNumber: 39\n                            }, this);\n                          }\n                        }, item.id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 160,\n                          columnNumber: 33\n                        }, this);\n                      }), provided.placeholder]\n                    }), void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 27\n                    }, this);\n                  }\n                }, columnId, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 21\n                }, this), isSubmitting ? /*#__PURE__*/_jsxDEV(SuiButton, {\n                  disabled: true,\n                  variant: \"gradient\",\n                  color: \"info\",\n                  fullWidth: true,\n                  children: translate(\"Processing ...\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(SuiButton, {\n                  variant: \"gradient\",\n                  color: \"info\",\n                  fullWidth: true,\n                  onClick: submitUpdateDesire,\n                  children: translate(\"Save\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this)\n          }, columnId, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n};\n\nCandidateDesireList.auth = true;\nCandidateDesireList.layout = Admin;\nexport default CandidateDesireList;","map":{"version":3,"sources":["F:/StudentAffairs/students/students/pages/students_affairs/affairs_officer/candidates/CandidateDesiresList.tsx"],"names":["React","useEffect","useState","Admin","Card","CardHeader","CardBody","makeStyles","styles","Grid","Desire","DragDropContext","Droppable","Draggable","resetServerContext","useTranslation","SpecialityService","DesireService","SuiButton","toast","CandidateDesireList","candidateId","callback","updateCandidate","translate","useStyles","Desires","setDesires","columns","setColumns","getSpecialities","GetAll","then","res","console","log","system","type","name","items","result","map","item","id","toString","catch","error","desires","length","speciality","speciality_id","isSubmitting","setSubmitting","submitUpdateDesire","values","candidate_id","index","order","Save","finally","onDragEnd","destination","source","column","droppableId","copiedItems","removed","splice","Object","entries","columnId","display","flexDirection","alignItems","fontWeight","color","provided","snapshot","droppableProps","innerRef","background","isDraggingOver","padding","marginBottom","borderRadius","draggableProps","dragHandleProps","userSelect","margin","backgroundColor","isDragging","style","ar_short_name","placeholder","auth","layout"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Admin from \"../../../../layouts/Admin\";\r\nimport Card from \"../../../../components/Card/Card.js\";\r\nimport CardHeader from \"../../../../components/Card/CardHeader.js\";\r\nimport CardBody from \"../../../../components/Card/CardBody.js\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"../../../../assets/jss/nextjs-material-dashboard/views/rtlStyle.js\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport Desire from \"../../../../components/Desire/Desire\";\r\n\r\nimport {\r\n  DragDropContext,\r\n  Droppable,\r\n  Draggable,\r\n  resetServerContext,\r\n} from \"react-beautiful-dnd\";\r\nimport { useTranslation } from \"../../../../Utility/Translations/useTranslation\";\r\nimport SpecialityService from \"../../../../Services/SpecialityService\";\r\nimport DesireService from \"../../../../Services/DesireService\";\r\nimport { IDesireModel } from \"../../../../Models/ApiResponse/DesireModel\";\r\nimport SuiButton from \"../../../../components/SuiButton\";\r\nimport { toast } from \"react-toastify\";\r\n\r\ninterface IDesireListProps { candidateId: number; callback(candidate); updateCandidate(candidate) }\r\nconst CandidateDesireList: React.FC<IDesireListProps> = ({ candidateId, callback, updateCandidate }) => {\r\n  resetServerContext();\r\n  const { translate } = useTranslation();\r\n  const useStyles = makeStyles(styles);\r\n  const [Desires, setDesires] = React.useState<IDesireModel[]>(null);\r\n  const [columns, setColumns] = useState({});\r\n\r\n  const getSpecialities = () => {\r\n    SpecialityService.GetAll()\r\n      .then((res) => {\r\n        console.log(\"Speciality\", res);\r\n        setColumns({\r\n          system: {\r\n            type: 1,\r\n            name: translate('Desires'),\r\n            items: res.result.map((item) => { return { ...item, id: item.id.toString() } }),\r\n          },\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"error\", error);\r\n      });\r\n  };\r\n\r\n  /************************** Data ****************************/\r\n  useEffect(() => {\r\n    DesireService.GetAll(candidateId)\r\n      .then((res) => {\r\n        console.log(\"Desire\", res);\r\n        const desires = res.result;\r\n        if (desires.length > 0) {\r\n          setColumns({\r\n            system: {\r\n              type: 1,\r\n              name: translate('Desires'),\r\n              items: desires.map((item) => { return { ...item.speciality, id: item.speciality_id.toString() } }),\r\n            },\r\n          });\r\n        } else {\r\n          getSpecialities();\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"error\", error);\r\n      });\r\n  }, []);\r\n  /************************** Finish Data ****************************/\r\n\r\n  const [isSubmitting, setSubmitting] = useState(false);\r\n  /************************** Handle edit data ****************************/\r\n  const submitUpdateDesire = async () => {\r\n    setSubmitting(true);\r\n    console.log(\"items order: \", columns.system.items);\r\n    const values = {\r\n      candidate_id: candidateId,\r\n      desires: columns.system.items.map((item, index) => { return { speciality_id: item.id, order: index + 1 } })\r\n    }\r\n    DesireService.Save(values)\r\n      .then((res) => {\r\n        console.log(\"Desire\", res);\r\n        toast(translate('Desires updated.'), { type: 'success' });\r\n        callback && callback(res.result);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"error\", error);\r\n      })\r\n      .finally(() => {\r\n        setSubmitting(false);\r\n      });\r\n  };\r\n  /************************** Finish Edit Data ****************************/\r\n\r\n\r\n  const onDragEnd = (result, columns, setColumns) => {\r\n    console.log(result, columns);\r\n    if (!result.destination) return;\r\n    const { source, destination } = result;\r\n\r\n    const column = columns[source.droppableId];\r\n    const copiedItems = [...column.items];\r\n    const [removed] = copiedItems.splice(source.index, 1);\r\n    copiedItems.splice(destination.index, 0, removed);\r\n    setColumns({\r\n      ...columns,\r\n      [source.droppableId]: {\r\n        ...column,\r\n        items: copiedItems,\r\n      },\r\n    });\r\n\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <DragDropContext\r\n        onDragEnd={(result) => onDragEnd(result, columns, setColumns)}\r\n      >\r\n        <Grid container xs={12} md={12} sm={12}>\r\n          {Object.entries(columns).map(([columnId, column], index) => {\r\n            return (\r\n              <Grid\r\n                md={12}\r\n                xs={12}\r\n                sm={12}\r\n                style={{\r\n                  display: \"flex\",\r\n                  flexDirection: \"column\",\r\n                  alignItems: \"center\",\r\n                }}\r\n                key={columnId}\r\n              >\r\n                <Card>\r\n                  <CardHeader>\r\n                    <h4 style={{ fontWeight: \"bold\", color: \"#01579b\" }}>{column.name}</h4>\r\n                  </CardHeader>\r\n                  <CardBody>\r\n                    <Droppable droppableId={columnId} key={columnId}>\r\n                      {(provided, snapshot) => {\r\n                        return (\r\n                          <Grid\r\n                            md={12}\r\n                            container\r\n                            {...provided.droppableProps}\r\n                            ref={provided.innerRef}\r\n                            style={{\r\n                              background: snapshot.isDraggingOver\r\n                                ? \"rgb(1, 87, 155, 0.4)\"\r\n                                : \"rgba(211, 211, 211, 0.15)\",\r\n                              padding: 20,\r\n                              marginBottom: 20,\r\n                              borderRadius: 10,\r\n                            }}\r\n                          >\r\n                            {column.items.map((item, index) => {\r\n                              return (\r\n                                <Draggable\r\n                                  key={item.id}\r\n                                  draggableId={item.id}\r\n                                  index={index}\r\n                                >\r\n                                  {(provided, snapshot) => {\r\n                                    return (\r\n                                      <Grid\r\n                                        md={12}\r\n                                        ref={provided.innerRef}\r\n                                        {...provided.draggableProps}\r\n                                        {...provided.dragHandleProps}\r\n                                        style={{\r\n                                          userSelect: \"none\",\r\n                                          margin: \"3px 0 3px 0\",\r\n                                          padding: \"0 20px\",\r\n                                          borderRadius: \"12px\",\r\n                                          backgroundColor: snapshot.isDragging\r\n                                            ? \"#c2c2c2\"\r\n                                            : \"white\",\r\n                                          color: \"black\",\r\n                                          ...provided.draggableProps.style,\r\n                                        }}\r\n                                      >\r\n                                        <Desire\r\n                                          id={item.id}\r\n                                          index={index}\r\n                                          name={item.ar_short_name}\r\n                                          key={item.id}\r\n                                          type={column.type}\r\n                                        ></Desire>\r\n                                      </Grid>\r\n                                    );\r\n                                  }}\r\n                                </Draggable>\r\n                              );\r\n                            })}\r\n                            {provided.placeholder}\r\n                          </Grid>\r\n                        );\r\n                      }}\r\n                    </Droppable>\r\n\r\n                    {isSubmitting ? (\r\n                      <SuiButton\r\n                        disabled={true}\r\n                        variant=\"gradient\"\r\n                        color=\"info\"\r\n                        fullWidth\r\n                      >\r\n                        {translate(\"Processing ...\")}\r\n                      </SuiButton>\r\n                    ) : (\r\n                        <SuiButton\r\n                          variant=\"gradient\"\r\n                          color=\"info\"\r\n                          fullWidth\r\n                          onClick={submitUpdateDesire}\r\n                        >\r\n                          {translate(\"Save\")}\r\n                        </SuiButton>\r\n                      )}\r\n\r\n\r\n                  </CardBody>\r\n                </Card>\r\n              </Grid>\r\n            );\r\n          })}\r\n        </Grid>\r\n      </DragDropContext>\r\n    </div>\r\n  );\r\n}\r\n\r\n(CandidateDesireList as any).auth = true;\r\n(CandidateDesireList as any).layout = Admin;\r\nexport default CandidateDesireList;\r\n"]},"metadata":{},"sourceType":"module"}