_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[29],{b4Ab:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/students_affairs/admin/roles-managements",function(){return n("cwBb")}])},cwBb:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),a=n("rePB"),o=n("o0o1"),i=n.n(o),c=n("HaE+"),s=n("ODXe"),l=n("q1tI"),u=n.n(l),d=n("UGp+"),b=n("bXiM"),f=n("dfam"),p=n("JrkS"),h=n("Z3vd"),j=n("i6E2"),m=n("7VIw"),O=n.n(m),x=n("g7aZ"),g=n("dCKf"),v=n("R/WZ"),w=n("mtPR"),y=n("i4t8"),k=n("2j+g"),S=n("1OyB"),C=n("vuIU"),A=n("B6G6"),R=function(){function e(){Object(S.a)(this,e)}return Object(C.a)(e,null,[{key:"GetAll",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/roles",e.next=3,A.a.get("/roles").then((function(e){if(e.data.success)return e.data})).catch((function(e){throw console.log("Api Error:",e),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"Add",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/roles/add",e.next=3,A.a.get("/roles/add").then((function(e){if(e.data.success)return e.data})).catch((function(e){throw console.log("Api Error:",e),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"Delete",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/roles/delete",e.next=3,A.a.get("/roles/delete").then((function(e){if(e.data.success)return e.data})).catch((function(e){throw console.log("Api Error:",e),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"AssignUserToRole",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/user/assign-role",e.next=3,A.a.get("/user/assign-role").then((function(e){if(e.data.success)return e.data})).catch((function(e){throw console.log("Api Error:",e),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),E=n("drkM"),D=n("KYPV"),P=n("Xt1q"),N=n("hlFM"),T=n("ofer"),B=n("r9w1"),_=n("A2So"),F=n("2zww"),q=n("UsYt"),U=n("8uep"),W=function(e){var t=e.title,n=e.open,a=e.initValues,o=e.submitForm,i=e.formScheme,c=e.handleClose;return Object(r.jsx)(P.a,{open:n,onClose:c,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(r.jsx)(N.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,borderRadius:"20px"},children:Object(r.jsxs)(_.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,borderRadius:"20px",marginTop:"0px",marginBottom:"0px"},children:[Object(r.jsx)(F.a,{style:{height:"5em",borderTopRightRadius:"inherit",borderTopLeftRadius:"inherit",backgroundColor:"#A69577"},children:Object(r.jsx)("center",{children:Object(r.jsx)("h4",{style:{fontWeight:"bold"},children:t})})}),Object(r.jsx)(q.a,{children:Object(r.jsx)(D.c,{initialValues:a,validationSchema:i,onSubmit:function(e,t){var n=t.setSubmitting;o(e,n)},children:function(e){var t=e.values,n=e.handleChange,a=(e.handleSubmit,e.errors),o=e.touched,i=e.handleBlur,c=e.isSubmitting,s=e.isValid,l=e.dirty;return Object(r.jsxs)(D.b,{children:[Object(r.jsxs)(N.a,{mb:2,children:[Object(r.jsx)(N.a,{mb:1,ml:.5,children:Object(r.jsx)(T.a,{component:"label",variant:"caption",children:"Name"})}),Object(r.jsx)(B.a,{onChange:n,variant:"outlined",size:"small",type:"text",id:"roleName",name:"name",value:t.name,onBlur:i,error:Boolean(o.name&&a.name),helperText:o.name&&a.name,placeholder:"Role name",fullWidth:!0})]}),Object(r.jsx)(N.a,{mt:4,mb:1,children:c?Object(r.jsx)(U.a,{disabled:!0,variant:"gradient",color:"info",fullWidth:!0,children:"Processing"}):Object(r.jsx)(U.a,{disabled:!(l&&s),type:"submit",variant:"gradient",color:"info",fullWidth:!0,children:"Save"})})]})}})})]})})})},I=n("kfFl"),M=n("wx14"),V=n("Ff2n"),G=(n("17x9"),n("iuhU")),X=n("H2TA"),H=l.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,o=e.disableTypography,i=void 0!==o&&o,c=Object(V.a)(e,["children","classes","className","disableTypography"]);return l.createElement("div",Object(M.a)({className:Object(G.a)(r.root,a),ref:t},c),i?n:l.createElement(T.a,{component:"h2",variant:"h6"},n))})),J=Object(X.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(H),K=n("EQI2"),Z=l.forwardRef((function(e,t){return l.createElement(T.a,Object(M.a)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))})),z=Object(X.a)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(Z),Y=n("+JwS"),L=function(e){var t=e.open,n=e.handleClose,a=e.text,o=e.handleSubmitDelete,i=e.submitDelete,c=e.discard,s=e.confirmMsg;return Object(r.jsxs)(I.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(r.jsx)(J,{id:"alert-dialog-title",children:s}),Object(r.jsx)(K.a,{children:Object(r.jsx)(z,{id:"alert-dialog-description",children:a})}),Object(r.jsxs)(Y.a,{children:[Object(r.jsx)(h.a,{onClick:n,children:c}),Object(r.jsx)(h.a,{style:{color:"red"},onClick:o,autoFocus:!0,children:i})]})]})},Q=function(){function e(){Object(S.a)(this,e)}return Object(C.a)(e,null,[{key:"GetAll",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/permissions",t&&(n+="?role_id=".concat(t)),e.next=4,A.a.get(n).then((function(e){if(e.data.success)return e.data})).catch((function(e){throw console.log("Api Error:",e),e}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Add",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/permissions/add",e.next=3,A.a.get("/permissions/add").then((function(e){if(e.data.success)return e.data})).catch((function(e){throw console.log("Api Error:",e),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"AssignToRole",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/role/assign-permission",e.next=3,A.a.get("/role/assign-permission").then((function(e){if(e.data.success)return e.data})).catch((function(e){throw console.log("Api Error:",e),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=function(e){var t=e.value,n=u.a.useState(!1),a=Object(s.a)(n,2),o=a[0],j=a[1],m=function(){j(!0)},S=u.a.useState(!1),C=Object(s.a)(S,2),A=C[0],D=C[1],P=u.a.useState(!1),N=Object(s.a)(P,2),T=N[0],B=N[1],_=Object(v.a)(g.a)(),F=u.a.useState(t),q=Object(s.a)(F,2),U=q[0],I=q[1],M=u.a.useState(""),V=Object(s.a)(M,2),G=(V[0],V[1],function(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}),X=u.a.useState({id:0,name:""}),H=Object(s.a)(X,2),J=H[0],K=H[1],Z=d.b().shape({name:d.c().required("name is required")}),z=d.b().shape({id:d.a().required("id is required"),name:d.c().required("name is required")}),Y=function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("values",t),n(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("values",t),n(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),te=u.a.useState(null),ne=Object(s.a)(te,2),re=ne[0],ae=ne[1],oe=u.a.useState(null),ie=Object(s.a)(oe,2),ce=ie[0],se=ie[1];Object(l.useEffect)((function(){R.GetAll().then((function(e){console.log("roles",e),ae(e.result)})).catch((function(e){console.error("roles",e)})),Q.GetAll().then((function(e){console.log("permissions",e),se(e.result)})).catch((function(e){console.error("permissions",e)}))}),[]);var le=u.a.useState(""),ue=Object(s.a)(le,2),de=ue[0],be=ue[1],fe=u.a.useState(null),pe=Object(s.a)(fe,2),he=pe[0],je=pe[1];return Object(r.jsxs)(w.a,{children:[Object(r.jsxs)(y.a,{md:12,children:[Object(r.jsx)(b.a,{position:"static",children:Object(r.jsxs)(f.a,{value:U,onChange:function(e,t){I(t)},indicatorColor:"secondary",textColor:"inherit",variant:"fullWidth","aria-label":"full width tabs example",children:[Object(r.jsx)(p.a,ee({label:"Roles"},G(0))),Object(r.jsx)(p.a,ee({label:"Permissions"},G(1)))]})}),Object(r.jsxs)(O.a,{index:U,onChangeIndex:function(e){I(e)},children:[Object(r.jsxs)(x.a,{value:U,index:0,children:[Object(r.jsx)(h.a,{disabled:!1,variant:"contained",className:_.submitBtn,onClick:m,children:"Add New Role"}),function(){if(null!=re&&re.length>0){var e=re;return Object(r.jsx)(E.a,{Title:"Roles",Columns:[{title:"Id",field:"id"},{title:"Name",field:"name"}],Data:e,Options:{headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontWeight:"bold"},filtering:!1,paging:!0,maxBodyHeight:"500px"},Actions:[{tooltip:"Update Role",icon:"edit",onClick:function(e,t){return n=t.id,r=t.name,K({id:n,name:r}),void D(!0);var n,r}},{tooltip:"Delete Role",icon:"delete",onClick:function(e,t){return n=t.id,r=t.name,be("Are you sure you want to delete role: ".concat(r,"?")),je(n),void B(!0);var n,r}}]})}return Object(r.jsx)(k.a,{})}()]}),Object(r.jsxs)(x.a,{value:U,index:1,children:[Object(r.jsx)(h.a,{disabled:!1,variant:"contained",className:_.submitBtn,onClick:m,children:"Add New Permission"}),function(){if(null!=ce&&ce.length>0){var e=ce;return Object(r.jsx)(E.a,{Title:"Permissions",Columns:[{title:"Id",field:"id"},{title:"Name",field:"name"}],Data:e,Options:{headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontWeight:"bold"},filtering:!1,paging:!0,maxBodyHeight:"500px"}})}return Object(r.jsx)(k.a,{})}()]})]})]}),Object(r.jsx)(W,{title:"Add Role",open:o,formScheme:Z,handleClose:function(){j(!1)},initValues:{name:""},submitForm:Y},"addRole"),Object(r.jsx)(W,{title:"Update Role",open:A,formScheme:z,handleClose:function(){D(!1)},initValues:J,submitForm:$},"editRole"),Object(r.jsx)(L,{open:T,confirmMsg:de,text:"",discard:"Discard",submitDelete:"Delete",handleSubmitDelete:function(){B(!1),alert(he)},handleClose:function(){B(!1)}},"deleteRole")]})};te.auth=!0,te.layout=j.a;t.default=te}},[["b4Ab",0,2,16,1,3,5,6,7,8,9,10,12,11,14,20,4]]]);